"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Qa=require("ethers"),Xa=require("http"),Za=require("https"),es=require("os"),Pe=require("@haechi-labs/face-sdk");function Kr(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var ts=Kr(Xa),rs=Kr(Za),ns=Kr(es);class or{constructor(e,r,n){this._chains={},this._externalAccountChangedHandlers=[],this._externalChainChangedHandlers=[],this._externalDisconnectHandlers=[],this._checkConnectionDelayMs=500,this.name=r,this.logger=e,n.forEach(o=>this._chains[o.chainId]=o)}async CheckConnection(){await this.isConnected||(this._timerId&&(clearInterval(this._timerId),this.logger.debug(`${this.name}Connector. CheckConnection stopped`)),this._externalDisconnectHandlers.forEach(e=>e(void 0)),this._externalDisconnectHandlers=[])}initListeners(e){this.logger.debug("initListeners");const r=this;this.accountsChangedHandler=n=>{this.logger.debug(`${this.name}.accountsChangedHandler`),r._externalAccountChangedHandlers.forEach(o=>o(n))},this.chainChangedHandler=n=>{this.logger.debug(`${this.name}.chainChangedHandler`),r._externalChainChangedHandlers.forEach(o=>o(n))},this.disconnectHandler=n=>{this.logger.debug(`${this.name}.disconnectHandler ${JSON.stringify(n)}`),r._externalDisconnectHandlers.forEach(o=>o(n))},e.on("accountsChanged",this.accountsChangedHandler),e.on("chainChanged",this.chainChangedHandler)}removeListeners(e){e.removeListener("accountsChanged",this.accountsChangedHandler),e.removeListener("chainChanged",this.chainChangedHandler),this._externalAccountChangedHandlers=[],this._externalChainChangedHandlers=[],this._externalDisconnectHandlers=[]}onAccountsChanged(e){this._externalAccountChangedHandlers.push(e)}onChainChanged(e){this._externalChainChangedHandlers.push(e)}onDisconnect(e){if(!this._timerId){const r=this;this._timerId=setInterval(()=>r.CheckConnection(),this._checkConnectionDelayMs)}this._externalDisconnectHandlers.push(e)}async getSigner(){return new Qa.providers.Web3Provider(await this.getRawProvider()).getSigner()}async disconnect(){this.removeListeners(await this.getRawProvider())}}const Jr="cur_connector",is=()=>{const t=localStorage.getItem(Jr);return t?JSON.parse(t):void 0},os=t=>localStorage.setItem(Jr,JSON.stringify(t)),as=()=>localStorage.removeItem(Jr);class ss{constructor(e,r){this.connectorsByName={},this._logger=e,this.WaitInitialisationAsync=this.InitAsync(r,is())}async InitAsync(e,r){let n;for(let o=0;o<e.length;o++){const i=e[o];this.connectorsByName[i.name]=i,i.name===r?.name&&await i.isConnected&&(n=i)}n&&await n.connect(r.chainId)&&(this._curConnector=n,this._logger.debug(`Current connector is ${this._curConnector.name}`))}get CurConnector(){return this._curConnector}async connect(e,r){await this.WaitInitialisationAsync;const n=this.connectorsByName[r];await n.connect(e)&&(os({chainId:e,name:r}),this._curConnector=n)}async disconnect(){var e;await((e=this._curConnector)==null?void 0:e.disconnect()),as(),this._curConnector=void 0}}var jt=(t=>(t.Undefined="",t.Injected="Injected",t.WalletConnect="WalletConnect",t.FaceWallet="FaceWallet",t))(jt||{});const ar={UserReject:4001,UnknownChain:4902};class cs extends or{constructor(e,r){super(e,jt.Injected,r),this.addEthereumChain=async(n,o)=>{try{const i=this._chains[n],f=i.blockExplorer?[i.blockExplorer]:void 0;await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:o,chainName:i.name,rpcUrls:[i.rpcUrl],nativeCurrency:i.nativeCurrency,blockExplorerUrls:f}]})}catch(i){if(i.code===ar.UserReject)return!1;throw i}return!0},this._ethRequestAccounts=void 0,this.isInstalled&&this.initListeners(window.ethereum)}get canSwitchChain(){return!!window.ethereum.isMetaMask}async connect(e){if(this._ethRequestAccounts)return this.logger.debug("InjectedConnector.enable already called"),await this._ethRequestAccounts;this.logger.debug("InjectedConnector.enable"),this._ethRequestAccounts=this.prvEnable();const r=await this._ethRequestAccounts;return this._ethRequestAccounts=void 0,await(await this.getSigner()).getChainId()!==e&&await this.switchChain(e),r}async switchChain(e){const r=`0x${e.toString(16)}`;try{if(!this._chains[e])throw new Error(`Chain ${e} not supported`);await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:r}]})}catch(n){if(n.code===ar.UnknownChain)return await this.addEthereumChain(e,r);if(n.code===ar.UserReject)return!1;throw n}return!0}get isConnected(){return this.isConnectedAsync()}get isInstalled(){return!!window.ethereum}get installUrl(){return"https://metamask.io/download"}getRawProvider(){return Promise.resolve(window.ethereum)}async prvEnable(){try{await window.ethereum.request({method:"eth_requestAccounts"})}catch(e){return e.code===ar.UserReject?this.logger.warn("Please connect to MetaMask."):this.logger.error(e),!1}return!0}async isConnectedAsync(){return(await window.ethereum.request({method:"eth_accounts"})).length>0}}var Ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vr(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}),r}var Yr={},ge={};Object.defineProperty(ge,"__esModule",{value:!0});var ii=ge.getLocalStorage=gi=ge.getLocalStorageOrThrow=pi=ge.getCrypto=di=ge.getCryptoOrThrow=fi=ge.getLocation=li=ge.getLocationOrThrow=hi=ge.getNavigator=ui=ge.getNavigatorOrThrow=ci=ge.getDocument=si=ge.getDocumentOrThrow=ai=ge.getFromWindowOrThrow=oi=ge.getFromWindow=void 0;function Mt(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}var oi=ge.getFromWindow=Mt;function St(t){const e=Mt(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}var ai=ge.getFromWindowOrThrow=St;function us(){return St("document")}var si=ge.getDocumentOrThrow=us;function hs(){return Mt("document")}var ci=ge.getDocument=hs;function ls(){return St("navigator")}var ui=ge.getNavigatorOrThrow=ls;function fs(){return Mt("navigator")}var hi=ge.getNavigator=fs;function ds(){return St("location")}var li=ge.getLocationOrThrow=ds;function ps(){return Mt("location")}var fi=ge.getLocation=ps;function gs(){return St("crypto")}var di=ge.getCryptoOrThrow=gs;function _s(){return Mt("crypto")}var pi=ge.getCrypto=_s;function ms(){return St("localStorage")}var gi=ge.getLocalStorageOrThrow=ms;function vs(){return Mt("localStorage")}ii=ge.getLocalStorage=vs,Object.defineProperty(Yr,"__esModule",{value:!0});var _i=Yr.getWindowMetadata=void 0;const mi=ge;function ws(){let t,e;try{t=mi.getDocumentOrThrow(),e=mi.getLocationOrThrow()}catch{return null}function r(){const k=t.getElementsByTagName("link"),B=[];for(let N=0;N<k.length;N++){const U=k[N],K=U.getAttribute("rel");if(K&&K.toLowerCase().indexOf("icon")>-1){const C=U.getAttribute("href");if(C)if(C.toLowerCase().indexOf("https:")===-1&&C.toLowerCase().indexOf("http:")===-1&&C.indexOf("//")!==0){let T=e.protocol+"//"+e.host;if(C.indexOf("/")===0)T+=C;else{const I=e.pathname.split("/");I.pop(),T+=I.join("/")+"/"+C}B.push(T)}else if(C.indexOf("//")===0){const T=e.protocol+C;B.push(T)}else B.push(C)}}return B}function n(...k){const B=t.getElementsByTagName("meta");for(let N=0;N<B.length;N++){const U=B[N],K=["itemprop","property","name"].map(C=>U.getAttribute(C)).filter(C=>C?k.includes(C):!1);if(K.length&&K){const C=U.getAttribute("content");if(C)return C}}return""}function o(){let k=n("name","og:site_name","og:title","twitter:title");return k||(k=t.title),k}function i(){return n("description","og:description","twitter:description","keywords")}const f=o(),u=i(),g=e.origin,y=r();return{description:u,url:g,icons:y,name:f}}_i=Yr.getWindowMetadata=ws;var ys=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<r;e++)for(var i=arguments[e],f=0,u=i.length;f<u;f++,o++)n[o]=i[f];return n},bs=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),xs=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Ms=function(){function t(e,r,n,o){this.name=e,this.version=r,this.os=n,this.bot=o,this.type="bot-device"}return t}(),Es=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Cs=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Ss=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,As=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,vi=3,ks=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",Ss]],wi=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Rs(t){return t?yi(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Cs:typeof navigator<"u"?yi(navigator.userAgent):Os()}function Is(t){return t!==""&&ks.reduce(function(e,r){var n=r[0],o=r[1];if(e)return e;var i=o.exec(t);return!!i&&[n,i]},!1)}function yi(t){var e=Is(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Es;var o=n[1]&&n[1].split(/[._]/).slice(0,3);o?o.length<vi&&(o=ys(o,Bs(vi-o.length))):o=[];var i=o.join("."),f=Ts(t),u=As.exec(t);return u&&u[1]?new Ms(r,i,f,u[1]):new bs(r,i,f)}function Ts(t){for(var e=0,r=wi.length;e<r;e++){var n=wi[e],o=n[0],i=n[1],f=i.exec(t);if(f)return o}return null}function Os(){var t=typeof process<"u"&&process.version;return t?new xs(process.version.slice(1)):null}function Bs(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}function sr(t){return Rs(t)}function cr(){const t=sr();return t&&t.os?t.os:void 0}function bi(){const t=cr();return t?t.toLowerCase().includes("android"):!1}function xi(){const t=cr();return t?t.toLowerCase().includes("ios")||t.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function Mi(){return cr()?bi()||xi():!1}function Ei(){const t=sr();return t&&t.name?t.name.toLowerCase()==="node":!1}function Ci(){return!Ei()&&!!Ai()}const Si=oi,Ns=ai,Ls=si,Us=ci,Fs=ui,Ai=hi,Ps=li,ki=fi,qs=di,Ds=pi,Hs=gi,ur=ii;function Gr(){return _i()}function $s(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}function Ws(t){return typeof t=="string"?t:JSON.stringify(t)}const Ri=$s,Ii=Ws;function Qr(t,e){const r=Ii(e),n=ur();n&&n.setItem(t,r)}function Xr(t){let e=null,r=null;const n=ur();return n&&(r=n.getItem(t)),e=r&&Ri(r),e}function Zr(t){const e=ur();e&&e.removeItem(t)}const hr="WALLETCONNECT_DEEPLINK_CHOICE";function js(t,e){const r=encodeURIComponent(t);return e.universalLink?`${e.universalLink}/wc?uri=${r}`:e.deepLink?`${e.deepLink}${e.deepLink.endsWith(":")?"//":"/"}wc?uri=${r}`:""}function zs(t){const e=t.href.split("?")[0];Qr(hr,Object.assign(Object.assign({},t),{href:e}))}function Ti(t,e){return t.filter(r=>r.name.toLowerCase().includes(e.toLowerCase()))[0]}function Ks(t,e){let r=t;return e&&(r=e.map(n=>Ti(t,n)).filter(Boolean)),r}const Oi="https://registry.walletconnect.com";function Js(){return Oi+"/api/v2/wallets"}function Vs(){return Oi+"/api/v2/dapps"}function Bi(t,e="mobile"){var r;return{name:t.name||"",shortName:t.metadata.shortName||"",color:t.metadata.colors.primary||"",logo:(r=t.image_url.sm)!==null&&r!==void 0?r:"",universalLink:t[e].universal||"",deepLink:t[e].native||""}}function Ys(t,e="mobile"){return Object.values(t).filter(r=>!!r[e].universal||!!r[e].native).map(r=>Bi(r,e))}var Gs=Object.freeze({__proto__:null,detectEnv:sr,detectOS:cr,isAndroid:bi,isIOS:xi,isMobile:Mi,isNode:Ei,isBrowser:Ci,getFromWindow:Si,getFromWindowOrThrow:Ns,getDocumentOrThrow:Ls,getDocument:Us,getNavigatorOrThrow:Fs,getNavigator:Ai,getLocationOrThrow:Ps,getLocation:ki,getCryptoOrThrow:qs,getCrypto:Ds,getLocalStorageOrThrow:Hs,getLocalStorage:ur,getClientMeta:Gr,safeJsonParse:Ri,safeJsonStringify:Ii,setLocal:Qr,getLocal:Xr,removeLocal:Zr,mobileLinkChoiceKey:hr,formatIOSMobile:js,saveMobileLinkInfo:zs,getMobileRegistryEntry:Ti,getMobileLinkRegistry:Ks,getWalletRegistryUrl:Js,getDappRegistryUrl:Vs,formatMobileRegistryEntry:Bi,formatMobileRegistry:Ys});const Qs=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],en=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Xs={1:"mainnet",3:"ropsten",4:"rinkeby",5:"goerli",42:"kovan"};var Ni={exports:{}},Zs={},ec=Object.freeze({__proto__:null,default:Zs}),tc=Vr(ec);(function(t){(function(e,r){function n(E,a){if(!E)throw new Error(a||"Assertion failed")}function o(E,a){E.super_=a;var l=function(){};l.prototype=a.prototype,E.prototype=new l,E.prototype.constructor=E}function i(E,a,l){if(i.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(E||0,a||10,l||"be"))}typeof e=="object"?e.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var f;try{f=tc.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,l){return a.cmp(l)>0?a:l},i.min=function(a,l){return a.cmp(l)<0?a:l},i.prototype._init=function(a,l,p){if(typeof a=="number")return this._initNumber(a,l,p);if(typeof a=="object")return this._initArray(a,l,p);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var m=0;a[0]==="-"&&m++,l===16?this._parseHex(a,m):this._parseBase(a,l,m),a[0]==="-"&&(this.negative=1),this.strip(),p==="le"&&this._initArray(this.toArray(),l,p)},i.prototype._initNumber=function(a,l,p){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),l,p)},i.prototype._initArray=function(a,l,p){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var x,S,O=0;if(p==="be")for(m=a.length-1,x=0;m>=0;m-=3)S=a[m]|a[m-1]<<8|a[m-2]<<16,this.words[x]|=S<<O&67108863,this.words[x+1]=S>>>26-O&67108863,O+=24,O>=26&&(O-=26,x++);else if(p==="le")for(m=0,x=0;m<a.length;m+=3)S=a[m]|a[m+1]<<8|a[m+2]<<16,this.words[x]|=S<<O&67108863,this.words[x+1]=S>>>26-O&67108863,O+=24,O>=26&&(O-=26,x++);return this.strip()};function u(E,a,l){for(var p=0,m=Math.min(E.length,l),x=a;x<m;x++){var S=E.charCodeAt(x)-48;p<<=4,S>=49&&S<=54?p|=S-49+10:S>=17&&S<=22?p|=S-17+10:p|=S&15}return p}i.prototype._parseHex=function(a,l){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var m,x,S=0;for(p=a.length-6,m=0;p>=l;p-=6)x=u(a,p,p+6),this.words[m]|=x<<S&67108863,this.words[m+1]|=x>>>26-S&4194303,S+=24,S>=26&&(S-=26,m++);p+6!==l&&(x=u(a,l,p+6),this.words[m]|=x<<S&67108863,this.words[m+1]|=x>>>26-S&4194303),this.strip()};function g(E,a,l,p){for(var m=0,x=Math.min(E.length,l),S=a;S<x;S++){var O=E.charCodeAt(S)-48;m*=p,O>=49?m+=O-49+10:O>=17?m+=O-17+10:m+=O}return m}i.prototype._parseBase=function(a,l,p){this.words=[0],this.length=1;for(var m=0,x=1;x<=67108863;x*=l)m++;m--,x=x/l|0;for(var S=a.length-p,O=S%m,b=Math.min(S,S-O)+p,s=0,_=p;_<b;_+=m)s=g(a,_,_+m,l),this.imuln(x),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(O!==0){var D=1;for(s=g(a,_,a.length,l),_=0;_<O;_++)D*=l;this.imuln(D),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}},i.prototype.copy=function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],k=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,l){a=a||10,l=l|0||1;var p;if(a===16||a==="hex"){p="";for(var m=0,x=0,S=0;S<this.length;S++){var O=this.words[S],b=((O<<m|x)&16777215).toString(16);x=O>>>24-m&16777215,x!==0||S!==this.length-1?p=y[6-b.length]+b+p:p=b+p,m+=2,m>=26&&(m-=26,S--)}for(x!==0&&(p=x.toString(16)+p);p.length%l!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(a===(a|0)&&a>=2&&a<=36){var s=w[a],_=k[a];p="";var D=this.clone();for(D.negative=0;!D.isZero();){var P=D.modn(_).toString(a);D=D.idivn(_),D.isZero()?p=P+p:p=y[s-P.length]+P+p}for(this.isZero()&&(p="0"+p);p.length%l!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(a,l){return n(typeof f<"u"),this.toArrayLike(f,a,l)},i.prototype.toArray=function(a,l){return this.toArrayLike(Array,a,l)},i.prototype.toArrayLike=function(a,l,p){var m=this.byteLength(),x=p||Math.max(1,m);n(m<=x,"byte array longer than desired length"),n(x>0,"Requested array length <= 0"),this.strip();var S=l==="le",O=new a(x),b,s,_=this.clone();if(S){for(s=0;!_.isZero();s++)b=_.andln(255),_.iushrn(8),O[s]=b;for(;s<x;s++)O[s]=0}else{for(s=0;s<x-m;s++)O[s]=0;for(s=0;!_.isZero();s++)b=_.andln(255),_.iushrn(8),O[x-s-1]=b}return O},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var l=a,p=0;return l>=4096&&(p+=13,l>>>=13),l>=64&&(p+=7,l>>>=7),l>=8&&(p+=4,l>>>=4),l>=2&&(p+=2,l>>>=2),p+l},i.prototype._zeroBits=function(a){if(a===0)return 26;var l=a,p=0;return(l&8191)===0&&(p+=13,l>>>=13),(l&127)===0&&(p+=7,l>>>=7),(l&15)===0&&(p+=4,l>>>=4),(l&3)===0&&(p+=2,l>>>=2),(l&1)===0&&p++,p},i.prototype.bitLength=function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l};function B(E){for(var a=new Array(E.bitLength()),l=0;l<a.length;l++){var p=l/26|0,m=l%26;a[l]=(E.words[p]&1<<m)>>>m}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var p=this._zeroBits(this.words[l]);if(a+=p,p!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this.strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var l;this.length>a.length?l=a:l=this;for(var p=0;p<l.length;p++)this.words[p]=this.words[p]&a.words[p];return this.length=l.length,this.strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var l,p;this.length>a.length?(l=this,p=a):(l=a,p=this);for(var m=0;m<p.length;m++)this.words[m]=l.words[m]^p.words[m];if(this!==l)for(;m<l.length;m++)this.words[m]=l.words[m];return this.length=l.length,this.strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,p=a%26;this._expand(l),p>0&&l--;for(var m=0;m<l;m++)this.words[m]=~this.words[m]&67108863;return p>0&&(this.words[m]=~this.words[m]&67108863>>26-p),this.strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,l){n(typeof a=="number"&&a>=0);var p=a/26|0,m=a%26;return this._expand(p+1),l?this.words[p]=this.words[p]|1<<m:this.words[p]=this.words[p]&~(1<<m),this.strip()},i.prototype.iadd=function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var p,m;this.length>a.length?(p=this,m=a):(p=a,m=this);for(var x=0,S=0;S<m.length;S++)l=(p.words[S]|0)+(m.words[S]|0)+x,this.words[S]=l&67108863,x=l>>>26;for(;x!==0&&S<p.length;S++)l=(p.words[S]|0)+x,this.words[S]=l&67108863,x=l>>>26;if(this.length=p.length,x!==0)this.words[this.length]=x,this.length++;else if(p!==this)for(;S<p.length;S++)this.words[S]=p.words[S];return this},i.prototype.add=function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var p=this.cmp(a);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,x;p>0?(m=this,x=a):(m=a,x=this);for(var S=0,O=0;O<x.length;O++)l=(m.words[O]|0)-(x.words[O]|0)+S,S=l>>26,this.words[O]=l&67108863;for(;S!==0&&O<m.length;O++)l=(m.words[O]|0)+S,S=l>>26,this.words[O]=l&67108863;if(S===0&&O<m.length&&m!==this)for(;O<m.length;O++)this.words[O]=m.words[O];return this.length=Math.max(this.length,O),m!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function N(E,a,l){l.negative=a.negative^E.negative;var p=E.length+a.length|0;l.length=p,p=p-1|0;var m=E.words[0]|0,x=a.words[0]|0,S=m*x,O=S&67108863,b=S/67108864|0;l.words[0]=O;for(var s=1;s<p;s++){for(var _=b>>>26,D=b&67108863,P=Math.min(s,a.length-1),Y=Math.max(0,s-E.length+1);Y<=P;Y++){var X=s-Y|0;m=E.words[X]|0,x=a.words[Y]|0,S=m*x+D,_+=S/67108864|0,D=S&67108863}l.words[s]=D|0,b=_|0}return b!==0?l.words[s]=b|0:l.length--,l.strip()}var U=function(a,l,p){var m=a.words,x=l.words,S=p.words,O=0,b,s,_,D=m[0]|0,P=D&8191,Y=D>>>13,X=m[1]|0,d=X&8191,L=X>>>13,$=m[2]|0,q=$&8191,W=$>>>13,te=m[3]|0,V=te&8191,J=te>>>13,ce=m[4]|0,Q=ce&8191,ie=ce>>>13,v=m[5]|0,c=v&8191,h=v>>>13,M=m[6]|0,R=M&8191,H=M>>>13,z=m[7]|0,re=z&8191,oe=z>>>13,fe=m[8]|0,he=fe&8191,ae=fe>>>13,He=m[9]|0,de=He&8191,pe=He>>>13,dt=x[0]|0,_e=dt&8191,me=dt>>>13,pt=x[1]|0,ve=pt&8191,we=pt>>>13,gt=x[2]|0,ye=gt&8191,be=gt>>>13,_t=x[3]|0,xe=_t&8191,Me=_t>>>13,mt=x[4]|0,Ee=mt&8191,Ce=mt>>>13,vt=x[5]|0,Se=vt&8191,Ae=vt>>>13,wt=x[6]|0,ke=wt&8191,Re=wt>>>13,yt=x[7]|0,Ie=yt&8191,Te=yt>>>13,bt=x[8]|0,Oe=bt&8191,Be=bt>>>13,xt=x[9]|0,Ne=xt&8191,Le=xt>>>13;p.negative=a.negative^l.negative,p.length=19,b=Math.imul(P,_e),s=Math.imul(P,me),s=s+Math.imul(Y,_e)|0,_=Math.imul(Y,me);var Qe=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,b=Math.imul(d,_e),s=Math.imul(d,me),s=s+Math.imul(L,_e)|0,_=Math.imul(L,me),b=b+Math.imul(P,ve)|0,s=s+Math.imul(P,we)|0,s=s+Math.imul(Y,ve)|0,_=_+Math.imul(Y,we)|0;var Xe=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,b=Math.imul(q,_e),s=Math.imul(q,me),s=s+Math.imul(W,_e)|0,_=Math.imul(W,me),b=b+Math.imul(d,ve)|0,s=s+Math.imul(d,we)|0,s=s+Math.imul(L,ve)|0,_=_+Math.imul(L,we)|0,b=b+Math.imul(P,ye)|0,s=s+Math.imul(P,be)|0,s=s+Math.imul(Y,ye)|0,_=_+Math.imul(Y,be)|0;var Ze=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,b=Math.imul(V,_e),s=Math.imul(V,me),s=s+Math.imul(J,_e)|0,_=Math.imul(J,me),b=b+Math.imul(q,ve)|0,s=s+Math.imul(q,we)|0,s=s+Math.imul(W,ve)|0,_=_+Math.imul(W,we)|0,b=b+Math.imul(d,ye)|0,s=s+Math.imul(d,be)|0,s=s+Math.imul(L,ye)|0,_=_+Math.imul(L,be)|0,b=b+Math.imul(P,xe)|0,s=s+Math.imul(P,Me)|0,s=s+Math.imul(Y,xe)|0,_=_+Math.imul(Y,Me)|0;var et=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(et>>>26)|0,et&=67108863,b=Math.imul(Q,_e),s=Math.imul(Q,me),s=s+Math.imul(ie,_e)|0,_=Math.imul(ie,me),b=b+Math.imul(V,ve)|0,s=s+Math.imul(V,we)|0,s=s+Math.imul(J,ve)|0,_=_+Math.imul(J,we)|0,b=b+Math.imul(q,ye)|0,s=s+Math.imul(q,be)|0,s=s+Math.imul(W,ye)|0,_=_+Math.imul(W,be)|0,b=b+Math.imul(d,xe)|0,s=s+Math.imul(d,Me)|0,s=s+Math.imul(L,xe)|0,_=_+Math.imul(L,Me)|0,b=b+Math.imul(P,Ee)|0,s=s+Math.imul(P,Ce)|0,s=s+Math.imul(Y,Ee)|0,_=_+Math.imul(Y,Ce)|0;var tt=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(tt>>>26)|0,tt&=67108863,b=Math.imul(c,_e),s=Math.imul(c,me),s=s+Math.imul(h,_e)|0,_=Math.imul(h,me),b=b+Math.imul(Q,ve)|0,s=s+Math.imul(Q,we)|0,s=s+Math.imul(ie,ve)|0,_=_+Math.imul(ie,we)|0,b=b+Math.imul(V,ye)|0,s=s+Math.imul(V,be)|0,s=s+Math.imul(J,ye)|0,_=_+Math.imul(J,be)|0,b=b+Math.imul(q,xe)|0,s=s+Math.imul(q,Me)|0,s=s+Math.imul(W,xe)|0,_=_+Math.imul(W,Me)|0,b=b+Math.imul(d,Ee)|0,s=s+Math.imul(d,Ce)|0,s=s+Math.imul(L,Ee)|0,_=_+Math.imul(L,Ce)|0,b=b+Math.imul(P,Se)|0,s=s+Math.imul(P,Ae)|0,s=s+Math.imul(Y,Se)|0,_=_+Math.imul(Y,Ae)|0;var rt=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(rt>>>26)|0,rt&=67108863,b=Math.imul(R,_e),s=Math.imul(R,me),s=s+Math.imul(H,_e)|0,_=Math.imul(H,me),b=b+Math.imul(c,ve)|0,s=s+Math.imul(c,we)|0,s=s+Math.imul(h,ve)|0,_=_+Math.imul(h,we)|0,b=b+Math.imul(Q,ye)|0,s=s+Math.imul(Q,be)|0,s=s+Math.imul(ie,ye)|0,_=_+Math.imul(ie,be)|0,b=b+Math.imul(V,xe)|0,s=s+Math.imul(V,Me)|0,s=s+Math.imul(J,xe)|0,_=_+Math.imul(J,Me)|0,b=b+Math.imul(q,Ee)|0,s=s+Math.imul(q,Ce)|0,s=s+Math.imul(W,Ee)|0,_=_+Math.imul(W,Ce)|0,b=b+Math.imul(d,Se)|0,s=s+Math.imul(d,Ae)|0,s=s+Math.imul(L,Se)|0,_=_+Math.imul(L,Ae)|0,b=b+Math.imul(P,ke)|0,s=s+Math.imul(P,Re)|0,s=s+Math.imul(Y,ke)|0,_=_+Math.imul(Y,Re)|0;var nt=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(nt>>>26)|0,nt&=67108863,b=Math.imul(re,_e),s=Math.imul(re,me),s=s+Math.imul(oe,_e)|0,_=Math.imul(oe,me),b=b+Math.imul(R,ve)|0,s=s+Math.imul(R,we)|0,s=s+Math.imul(H,ve)|0,_=_+Math.imul(H,we)|0,b=b+Math.imul(c,ye)|0,s=s+Math.imul(c,be)|0,s=s+Math.imul(h,ye)|0,_=_+Math.imul(h,be)|0,b=b+Math.imul(Q,xe)|0,s=s+Math.imul(Q,Me)|0,s=s+Math.imul(ie,xe)|0,_=_+Math.imul(ie,Me)|0,b=b+Math.imul(V,Ee)|0,s=s+Math.imul(V,Ce)|0,s=s+Math.imul(J,Ee)|0,_=_+Math.imul(J,Ce)|0,b=b+Math.imul(q,Se)|0,s=s+Math.imul(q,Ae)|0,s=s+Math.imul(W,Se)|0,_=_+Math.imul(W,Ae)|0,b=b+Math.imul(d,ke)|0,s=s+Math.imul(d,Re)|0,s=s+Math.imul(L,ke)|0,_=_+Math.imul(L,Re)|0,b=b+Math.imul(P,Ie)|0,s=s+Math.imul(P,Te)|0,s=s+Math.imul(Y,Ie)|0,_=_+Math.imul(Y,Te)|0;var it=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(it>>>26)|0,it&=67108863,b=Math.imul(he,_e),s=Math.imul(he,me),s=s+Math.imul(ae,_e)|0,_=Math.imul(ae,me),b=b+Math.imul(re,ve)|0,s=s+Math.imul(re,we)|0,s=s+Math.imul(oe,ve)|0,_=_+Math.imul(oe,we)|0,b=b+Math.imul(R,ye)|0,s=s+Math.imul(R,be)|0,s=s+Math.imul(H,ye)|0,_=_+Math.imul(H,be)|0,b=b+Math.imul(c,xe)|0,s=s+Math.imul(c,Me)|0,s=s+Math.imul(h,xe)|0,_=_+Math.imul(h,Me)|0,b=b+Math.imul(Q,Ee)|0,s=s+Math.imul(Q,Ce)|0,s=s+Math.imul(ie,Ee)|0,_=_+Math.imul(ie,Ce)|0,b=b+Math.imul(V,Se)|0,s=s+Math.imul(V,Ae)|0,s=s+Math.imul(J,Se)|0,_=_+Math.imul(J,Ae)|0,b=b+Math.imul(q,ke)|0,s=s+Math.imul(q,Re)|0,s=s+Math.imul(W,ke)|0,_=_+Math.imul(W,Re)|0,b=b+Math.imul(d,Ie)|0,s=s+Math.imul(d,Te)|0,s=s+Math.imul(L,Ie)|0,_=_+Math.imul(L,Te)|0,b=b+Math.imul(P,Oe)|0,s=s+Math.imul(P,Be)|0,s=s+Math.imul(Y,Oe)|0,_=_+Math.imul(Y,Be)|0;var Lr=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,b=Math.imul(de,_e),s=Math.imul(de,me),s=s+Math.imul(pe,_e)|0,_=Math.imul(pe,me),b=b+Math.imul(he,ve)|0,s=s+Math.imul(he,we)|0,s=s+Math.imul(ae,ve)|0,_=_+Math.imul(ae,we)|0,b=b+Math.imul(re,ye)|0,s=s+Math.imul(re,be)|0,s=s+Math.imul(oe,ye)|0,_=_+Math.imul(oe,be)|0,b=b+Math.imul(R,xe)|0,s=s+Math.imul(R,Me)|0,s=s+Math.imul(H,xe)|0,_=_+Math.imul(H,Me)|0,b=b+Math.imul(c,Ee)|0,s=s+Math.imul(c,Ce)|0,s=s+Math.imul(h,Ee)|0,_=_+Math.imul(h,Ce)|0,b=b+Math.imul(Q,Se)|0,s=s+Math.imul(Q,Ae)|0,s=s+Math.imul(ie,Se)|0,_=_+Math.imul(ie,Ae)|0,b=b+Math.imul(V,ke)|0,s=s+Math.imul(V,Re)|0,s=s+Math.imul(J,ke)|0,_=_+Math.imul(J,Re)|0,b=b+Math.imul(q,Ie)|0,s=s+Math.imul(q,Te)|0,s=s+Math.imul(W,Ie)|0,_=_+Math.imul(W,Te)|0,b=b+Math.imul(d,Oe)|0,s=s+Math.imul(d,Be)|0,s=s+Math.imul(L,Oe)|0,_=_+Math.imul(L,Be)|0,b=b+Math.imul(P,Ne)|0,s=s+Math.imul(P,Le)|0,s=s+Math.imul(Y,Ne)|0,_=_+Math.imul(Y,Le)|0;var Ur=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,b=Math.imul(de,ve),s=Math.imul(de,we),s=s+Math.imul(pe,ve)|0,_=Math.imul(pe,we),b=b+Math.imul(he,ye)|0,s=s+Math.imul(he,be)|0,s=s+Math.imul(ae,ye)|0,_=_+Math.imul(ae,be)|0,b=b+Math.imul(re,xe)|0,s=s+Math.imul(re,Me)|0,s=s+Math.imul(oe,xe)|0,_=_+Math.imul(oe,Me)|0,b=b+Math.imul(R,Ee)|0,s=s+Math.imul(R,Ce)|0,s=s+Math.imul(H,Ee)|0,_=_+Math.imul(H,Ce)|0,b=b+Math.imul(c,Se)|0,s=s+Math.imul(c,Ae)|0,s=s+Math.imul(h,Se)|0,_=_+Math.imul(h,Ae)|0,b=b+Math.imul(Q,ke)|0,s=s+Math.imul(Q,Re)|0,s=s+Math.imul(ie,ke)|0,_=_+Math.imul(ie,Re)|0,b=b+Math.imul(V,Ie)|0,s=s+Math.imul(V,Te)|0,s=s+Math.imul(J,Ie)|0,_=_+Math.imul(J,Te)|0,b=b+Math.imul(q,Oe)|0,s=s+Math.imul(q,Be)|0,s=s+Math.imul(W,Oe)|0,_=_+Math.imul(W,Be)|0,b=b+Math.imul(d,Ne)|0,s=s+Math.imul(d,Le)|0,s=s+Math.imul(L,Ne)|0,_=_+Math.imul(L,Le)|0;var Fr=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,b=Math.imul(de,ye),s=Math.imul(de,be),s=s+Math.imul(pe,ye)|0,_=Math.imul(pe,be),b=b+Math.imul(he,xe)|0,s=s+Math.imul(he,Me)|0,s=s+Math.imul(ae,xe)|0,_=_+Math.imul(ae,Me)|0,b=b+Math.imul(re,Ee)|0,s=s+Math.imul(re,Ce)|0,s=s+Math.imul(oe,Ee)|0,_=_+Math.imul(oe,Ce)|0,b=b+Math.imul(R,Se)|0,s=s+Math.imul(R,Ae)|0,s=s+Math.imul(H,Se)|0,_=_+Math.imul(H,Ae)|0,b=b+Math.imul(c,ke)|0,s=s+Math.imul(c,Re)|0,s=s+Math.imul(h,ke)|0,_=_+Math.imul(h,Re)|0,b=b+Math.imul(Q,Ie)|0,s=s+Math.imul(Q,Te)|0,s=s+Math.imul(ie,Ie)|0,_=_+Math.imul(ie,Te)|0,b=b+Math.imul(V,Oe)|0,s=s+Math.imul(V,Be)|0,s=s+Math.imul(J,Oe)|0,_=_+Math.imul(J,Be)|0,b=b+Math.imul(q,Ne)|0,s=s+Math.imul(q,Le)|0,s=s+Math.imul(W,Ne)|0,_=_+Math.imul(W,Le)|0;var Pr=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,b=Math.imul(de,xe),s=Math.imul(de,Me),s=s+Math.imul(pe,xe)|0,_=Math.imul(pe,Me),b=b+Math.imul(he,Ee)|0,s=s+Math.imul(he,Ce)|0,s=s+Math.imul(ae,Ee)|0,_=_+Math.imul(ae,Ce)|0,b=b+Math.imul(re,Se)|0,s=s+Math.imul(re,Ae)|0,s=s+Math.imul(oe,Se)|0,_=_+Math.imul(oe,Ae)|0,b=b+Math.imul(R,ke)|0,s=s+Math.imul(R,Re)|0,s=s+Math.imul(H,ke)|0,_=_+Math.imul(H,Re)|0,b=b+Math.imul(c,Ie)|0,s=s+Math.imul(c,Te)|0,s=s+Math.imul(h,Ie)|0,_=_+Math.imul(h,Te)|0,b=b+Math.imul(Q,Oe)|0,s=s+Math.imul(Q,Be)|0,s=s+Math.imul(ie,Oe)|0,_=_+Math.imul(ie,Be)|0,b=b+Math.imul(V,Ne)|0,s=s+Math.imul(V,Le)|0,s=s+Math.imul(J,Ne)|0,_=_+Math.imul(J,Le)|0;var qr=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(qr>>>26)|0,qr&=67108863,b=Math.imul(de,Ee),s=Math.imul(de,Ce),s=s+Math.imul(pe,Ee)|0,_=Math.imul(pe,Ce),b=b+Math.imul(he,Se)|0,s=s+Math.imul(he,Ae)|0,s=s+Math.imul(ae,Se)|0,_=_+Math.imul(ae,Ae)|0,b=b+Math.imul(re,ke)|0,s=s+Math.imul(re,Re)|0,s=s+Math.imul(oe,ke)|0,_=_+Math.imul(oe,Re)|0,b=b+Math.imul(R,Ie)|0,s=s+Math.imul(R,Te)|0,s=s+Math.imul(H,Ie)|0,_=_+Math.imul(H,Te)|0,b=b+Math.imul(c,Oe)|0,s=s+Math.imul(c,Be)|0,s=s+Math.imul(h,Oe)|0,_=_+Math.imul(h,Be)|0,b=b+Math.imul(Q,Ne)|0,s=s+Math.imul(Q,Le)|0,s=s+Math.imul(ie,Ne)|0,_=_+Math.imul(ie,Le)|0;var Dr=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,b=Math.imul(de,Se),s=Math.imul(de,Ae),s=s+Math.imul(pe,Se)|0,_=Math.imul(pe,Ae),b=b+Math.imul(he,ke)|0,s=s+Math.imul(he,Re)|0,s=s+Math.imul(ae,ke)|0,_=_+Math.imul(ae,Re)|0,b=b+Math.imul(re,Ie)|0,s=s+Math.imul(re,Te)|0,s=s+Math.imul(oe,Ie)|0,_=_+Math.imul(oe,Te)|0,b=b+Math.imul(R,Oe)|0,s=s+Math.imul(R,Be)|0,s=s+Math.imul(H,Oe)|0,_=_+Math.imul(H,Be)|0,b=b+Math.imul(c,Ne)|0,s=s+Math.imul(c,Le)|0,s=s+Math.imul(h,Ne)|0,_=_+Math.imul(h,Le)|0;var Hr=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,b=Math.imul(de,ke),s=Math.imul(de,Re),s=s+Math.imul(pe,ke)|0,_=Math.imul(pe,Re),b=b+Math.imul(he,Ie)|0,s=s+Math.imul(he,Te)|0,s=s+Math.imul(ae,Ie)|0,_=_+Math.imul(ae,Te)|0,b=b+Math.imul(re,Oe)|0,s=s+Math.imul(re,Be)|0,s=s+Math.imul(oe,Oe)|0,_=_+Math.imul(oe,Be)|0,b=b+Math.imul(R,Ne)|0,s=s+Math.imul(R,Le)|0,s=s+Math.imul(H,Ne)|0,_=_+Math.imul(H,Le)|0;var $r=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+($r>>>26)|0,$r&=67108863,b=Math.imul(de,Ie),s=Math.imul(de,Te),s=s+Math.imul(pe,Ie)|0,_=Math.imul(pe,Te),b=b+Math.imul(he,Oe)|0,s=s+Math.imul(he,Be)|0,s=s+Math.imul(ae,Oe)|0,_=_+Math.imul(ae,Be)|0,b=b+Math.imul(re,Ne)|0,s=s+Math.imul(re,Le)|0,s=s+Math.imul(oe,Ne)|0,_=_+Math.imul(oe,Le)|0;var Wr=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,b=Math.imul(de,Oe),s=Math.imul(de,Be),s=s+Math.imul(pe,Oe)|0,_=Math.imul(pe,Be),b=b+Math.imul(he,Ne)|0,s=s+Math.imul(he,Le)|0,s=s+Math.imul(ae,Ne)|0,_=_+Math.imul(ae,Le)|0;var jr=(O+b|0)+((s&8191)<<13)|0;O=(_+(s>>>13)|0)+(jr>>>26)|0,jr&=67108863,b=Math.imul(de,Ne),s=Math.imul(de,Le),s=s+Math.imul(pe,Ne)|0,_=Math.imul(pe,Le);var zr=(O+b|0)+((s&8191)<<13)|0;return O=(_+(s>>>13)|0)+(zr>>>26)|0,zr&=67108863,S[0]=Qe,S[1]=Xe,S[2]=Ze,S[3]=et,S[4]=tt,S[5]=rt,S[6]=nt,S[7]=it,S[8]=Lr,S[9]=Ur,S[10]=Fr,S[11]=Pr,S[12]=qr,S[13]=Dr,S[14]=Hr,S[15]=$r,S[16]=Wr,S[17]=jr,S[18]=zr,O!==0&&(S[19]=O,p.length++),p};Math.imul||(U=N);function K(E,a,l){l.negative=a.negative^E.negative,l.length=E.length+a.length;for(var p=0,m=0,x=0;x<l.length-1;x++){var S=m;m=0;for(var O=p&67108863,b=Math.min(x,a.length-1),s=Math.max(0,x-E.length+1);s<=b;s++){var _=x-s,D=E.words[_]|0,P=a.words[s]|0,Y=D*P,X=Y&67108863;S=S+(Y/67108864|0)|0,X=X+O|0,O=X&67108863,S=S+(X>>>26)|0,m+=S>>>26,S&=67108863}l.words[x]=O,p=S,S=m}return p!==0?l.words[x]=p:l.length--,l.strip()}function C(E,a,l){var p=new T;return p.mulp(E,a,l)}i.prototype.mulTo=function(a,l){var p,m=this.length+a.length;return this.length===10&&a.length===10?p=U(this,a,l):m<63?p=N(this,a,l):m<1024?p=K(this,a,l):p=C(this,a,l),p};function T(E,a){this.x=E,this.y=a}T.prototype.makeRBT=function(a){for(var l=new Array(a),p=i.prototype._countBits(a)-1,m=0;m<a;m++)l[m]=this.revBin(m,p,a);return l},T.prototype.revBin=function(a,l,p){if(a===0||a===p-1)return a;for(var m=0,x=0;x<l;x++)m|=(a&1)<<l-x-1,a>>=1;return m},T.prototype.permute=function(a,l,p,m,x,S){for(var O=0;O<S;O++)m[O]=l[a[O]],x[O]=p[a[O]]},T.prototype.transform=function(a,l,p,m,x,S){this.permute(S,a,l,p,m,x);for(var O=1;O<x;O<<=1)for(var b=O<<1,s=Math.cos(2*Math.PI/b),_=Math.sin(2*Math.PI/b),D=0;D<x;D+=b)for(var P=s,Y=_,X=0;X<O;X++){var d=p[D+X],L=m[D+X],$=p[D+X+O],q=m[D+X+O],W=P*$-Y*q;q=P*q+Y*$,$=W,p[D+X]=d+$,m[D+X]=L+q,p[D+X+O]=d-$,m[D+X+O]=L-q,X!==b&&(W=s*P-_*Y,Y=s*Y+_*P,P=W)}},T.prototype.guessLen13b=function(a,l){var p=Math.max(l,a)|1,m=p&1,x=0;for(p=p/2|0;p;p=p>>>1)x++;return 1<<x+1+m},T.prototype.conjugate=function(a,l,p){if(!(p<=1))for(var m=0;m<p/2;m++){var x=a[m];a[m]=a[p-m-1],a[p-m-1]=x,x=l[m],l[m]=-l[p-m-1],l[p-m-1]=-x}},T.prototype.normalize13b=function(a,l){for(var p=0,m=0;m<l/2;m++){var x=Math.round(a[2*m+1]/l)*8192+Math.round(a[2*m]/l)+p;a[m]=x&67108863,x<67108864?p=0:p=x/67108864|0}return a},T.prototype.convert13b=function(a,l,p,m){for(var x=0,S=0;S<l;S++)x=x+(a[S]|0),p[2*S]=x&8191,x=x>>>13,p[2*S+1]=x&8191,x=x>>>13;for(S=2*l;S<m;++S)p[S]=0;n(x===0),n((x&-8192)===0)},T.prototype.stub=function(a){for(var l=new Array(a),p=0;p<a;p++)l[p]=0;return l},T.prototype.mulp=function(a,l,p){var m=2*this.guessLen13b(a.length,l.length),x=this.makeRBT(m),S=this.stub(m),O=new Array(m),b=new Array(m),s=new Array(m),_=new Array(m),D=new Array(m),P=new Array(m),Y=p.words;Y.length=m,this.convert13b(a.words,a.length,O,m),this.convert13b(l.words,l.length,_,m),this.transform(O,S,b,s,m,x),this.transform(_,S,D,P,m,x);for(var X=0;X<m;X++){var d=b[X]*D[X]-s[X]*P[X];s[X]=b[X]*P[X]+s[X]*D[X],b[X]=d}return this.conjugate(b,s,m),this.transform(b,s,Y,S,m,x),this.conjugate(Y,S,m),this.normalize13b(Y,m),p.negative=a.negative^l.negative,p.length=a.length+l.length,p.strip()},i.prototype.mul=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},i.prototype.mulf=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),C(this,a,l)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){n(typeof a=="number"),n(a<67108864);for(var l=0,p=0;p<this.length;p++){var m=(this.words[p]|0)*a,x=(m&67108863)+(l&67108863);l>>=26,l+=m/67108864|0,l+=x>>>26,this.words[p]=x&67108863}return l!==0&&(this.words[p]=l,this.length++),this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var l=B(a);if(l.length===0)return new i(1);for(var p=this,m=0;m<l.length&&l[m]===0;m++,p=p.sqr());if(++m<l.length)for(var x=p.sqr();m<l.length;m++,x=x.sqr())l[m]!==0&&(p=p.mul(x));return p},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var l=a%26,p=(a-l)/26,m=67108863>>>26-l<<26-l,x;if(l!==0){var S=0;for(x=0;x<this.length;x++){var O=this.words[x]&m,b=(this.words[x]|0)-O<<l;this.words[x]=b|S,S=O>>>26-l}S&&(this.words[x]=S,this.length++)}if(p!==0){for(x=this.length-1;x>=0;x--)this.words[x+p]=this.words[x];for(x=0;x<p;x++)this.words[x]=0;this.length+=p}return this.strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,l,p){n(typeof a=="number"&&a>=0);var m;l?m=(l-l%26)/26:m=0;var x=a%26,S=Math.min((a-x)/26,this.length),O=67108863^67108863>>>x<<x,b=p;if(m-=S,m=Math.max(0,m),b){for(var s=0;s<S;s++)b.words[s]=this.words[s];b.length=S}if(S!==0)if(this.length>S)for(this.length-=S,s=0;s<this.length;s++)this.words[s]=this.words[s+S];else this.words[0]=0,this.length=1;var _=0;for(s=this.length-1;s>=0&&(_!==0||s>=m);s--){var D=this.words[s]|0;this.words[s]=_<<26-x|D>>>x,_=D&O}return b&&_!==0&&(b.words[b.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(a,l,p){return n(this.negative===0),this.iushrn(a,l,p)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,p=(a-l)/26,m=1<<l;if(this.length<=p)return!1;var x=this.words[p];return!!(x&m)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,p=(a-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(l!==0&&p++,this.length=Math.min(p,this.length),l!==0){var m=67108863^67108863>>>l<<l;this.words[this.length-1]&=m}return this.strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,l,p){var m=a.length+p,x;this._expand(m);var S,O=0;for(x=0;x<a.length;x++){S=(this.words[x+p]|0)+O;var b=(a.words[x]|0)*l;S-=b&67108863,O=(S>>26)-(b/67108864|0),this.words[x+p]=S&67108863}for(;x<this.length-p;x++)S=(this.words[x+p]|0)+O,O=S>>26,this.words[x+p]=S&67108863;if(O===0)return this.strip();for(n(O===-1),O=0,x=0;x<this.length;x++)S=-(this.words[x]|0)+O,O=S>>26,this.words[x]=S&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(a,l){var p=this.length-a.length,m=this.clone(),x=a,S=x.words[x.length-1]|0,O=this._countBits(S);p=26-O,p!==0&&(x=x.ushln(p),m.iushln(p),S=x.words[x.length-1]|0);var b=m.length-x.length,s;if(l!=="mod"){s=new i(null),s.length=b+1,s.words=new Array(s.length);for(var _=0;_<s.length;_++)s.words[_]=0}var D=m.clone()._ishlnsubmul(x,1,b);D.negative===0&&(m=D,s&&(s.words[b]=1));for(var P=b-1;P>=0;P--){var Y=(m.words[x.length+P]|0)*67108864+(m.words[x.length+P-1]|0);for(Y=Math.min(Y/S|0,67108863),m._ishlnsubmul(x,Y,P);m.negative!==0;)Y--,m.negative=0,m._ishlnsubmul(x,1,P),m.isZero()||(m.negative^=1);s&&(s.words[P]=Y)}return s&&s.strip(),m.strip(),l!=="div"&&p!==0&&m.iushrn(p),{div:s||null,mod:m}},i.prototype.divmod=function(a,l,p){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var m,x,S;return this.negative!==0&&a.negative===0?(S=this.neg().divmod(a,l),l!=="mod"&&(m=S.div.neg()),l!=="div"&&(x=S.mod.neg(),p&&x.negative!==0&&x.iadd(a)),{div:m,mod:x}):this.negative===0&&a.negative!==0?(S=this.divmod(a.neg(),l),l!=="mod"&&(m=S.div.neg()),{div:m,mod:S.mod}):(this.negative&a.negative)!==0?(S=this.neg().divmod(a.neg(),l),l!=="div"&&(x=S.mod.neg(),p&&x.negative!==0&&x.isub(a)),{div:S.div,mod:x}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modn(a.words[0]))}:this._wordDiv(a,l)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var p=l.div.negative!==0?l.mod.isub(a):l.mod,m=a.ushrn(1),x=a.andln(1),S=p.cmp(m);return S<0||x===1&&S===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(a){n(a<=67108863);for(var l=(1<<26)%a,p=0,m=this.length-1;m>=0;m--)p=(l*p+(this.words[m]|0))%a;return p},i.prototype.idivn=function(a){n(a<=67108863);for(var l=0,p=this.length-1;p>=0;p--){var m=(this.words[p]|0)+l*67108864;this.words[p]=m/a|0,l=m%a}return this.strip()},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var l=this,p=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var m=new i(1),x=new i(0),S=new i(0),O=new i(1),b=0;l.isEven()&&p.isEven();)l.iushrn(1),p.iushrn(1),++b;for(var s=p.clone(),_=l.clone();!l.isZero();){for(var D=0,P=1;(l.words[0]&P)===0&&D<26;++D,P<<=1);if(D>0)for(l.iushrn(D);D-- >0;)(m.isOdd()||x.isOdd())&&(m.iadd(s),x.isub(_)),m.iushrn(1),x.iushrn(1);for(var Y=0,X=1;(p.words[0]&X)===0&&Y<26;++Y,X<<=1);if(Y>0)for(p.iushrn(Y);Y-- >0;)(S.isOdd()||O.isOdd())&&(S.iadd(s),O.isub(_)),S.iushrn(1),O.iushrn(1);l.cmp(p)>=0?(l.isub(p),m.isub(S),x.isub(O)):(p.isub(l),S.isub(m),O.isub(x))}return{a:S,b:O,gcd:p.iushln(b)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var l=this,p=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var m=new i(1),x=new i(0),S=p.clone();l.cmpn(1)>0&&p.cmpn(1)>0;){for(var O=0,b=1;(l.words[0]&b)===0&&O<26;++O,b<<=1);if(O>0)for(l.iushrn(O);O-- >0;)m.isOdd()&&m.iadd(S),m.iushrn(1);for(var s=0,_=1;(p.words[0]&_)===0&&s<26;++s,_<<=1);if(s>0)for(p.iushrn(s);s-- >0;)x.isOdd()&&x.iadd(S),x.iushrn(1);l.cmp(p)>=0?(l.isub(p),m.isub(x)):(p.isub(l),x.isub(m))}var D;return l.cmpn(1)===0?D=m:D=x,D.cmpn(0)<0&&D.iadd(a),D},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),p=a.clone();l.negative=0,p.negative=0;for(var m=0;l.isEven()&&p.isEven();m++)l.iushrn(1),p.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;p.isEven();)p.iushrn(1);var x=l.cmp(p);if(x<0){var S=l;l=p,p=S}else if(x===0||p.cmpn(1)===0)break;l.isub(p)}while(!0);return p.iushln(m)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var l=a%26,p=(a-l)/26,m=1<<l;if(this.length<=p)return this._expand(p+1),this.words[p]|=m,this;for(var x=m,S=p;x!==0&&S<this.length;S++){var O=this.words[S]|0;O+=x,x=O>>>26,O&=67108863,this.words[S]=O}return x!==0&&(this.words[S]=x,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var p;if(this.length>1)p=1;else{l&&(a=-a),n(a<=67108863,"Number is too big");var m=this.words[0]|0;p=m===a?0:m<a?-1:1}return this.negative!==0?-p|0:p},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,p=this.length-1;p>=0;p--){var m=this.words[p]|0,x=a.words[p]|0;if(m!==x){m<x?l=-1:m>x&&(l=1);break}}return l},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new ee(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var I={k256:null,p224:null,p192:null,p25519:null};function A(E,a){this.name=E,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}A.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},A.prototype.ireduce=function(a){var l=a,p;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),p=l.bitLength();while(p>this.n);var m=p<this.n?-1:l.ucmp(this.p);return m===0?(l.words[0]=0,l.length=1):m>0?l.isub(this.p):l.strip(),l},A.prototype.split=function(a,l){a.iushrn(this.n,0,l)},A.prototype.imulK=function(a){return a.imul(this.k)};function F(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(F,A),F.prototype.split=function(a,l){for(var p=4194303,m=Math.min(a.length,9),x=0;x<m;x++)l.words[x]=a.words[x];if(l.length=m,a.length<=9){a.words[0]=0,a.length=1;return}var S=a.words[9];for(l.words[l.length++]=S&p,x=10;x<a.length;x++){var O=a.words[x]|0;a.words[x-10]=(O&p)<<4|S>>>22,S=O}S>>>=22,a.words[x-10]=S,S===0&&a.length>10?a.length-=10:a.length-=9},F.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,p=0;p<a.length;p++){var m=a.words[p]|0;l+=m*977,a.words[p]=l&67108863,l=m*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function j(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(j,A);function G(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(G,A);function ne(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(ne,A),ne.prototype.imulK=function(a){for(var l=0,p=0;p<a.length;p++){var m=(a.words[p]|0)*19+l,x=m&67108863;m>>>=26,a.words[p]=x,l=m}return l!==0&&(a.words[a.length++]=l),a},i._prime=function(a){if(I[a])return I[a];var l;if(a==="k256")l=new F;else if(a==="p224")l=new j;else if(a==="p192")l=new G;else if(a==="p25519")l=new ne;else throw new Error("Unknown prime "+a);return I[a]=l,l};function ee(E){if(typeof E=="string"){var a=i._prime(E);this.m=a.p,this.prime=a}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}ee.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},ee.prototype._verify2=function(a,l){n((a.negative|l.negative)===0,"red works only with positives"),n(a.red&&a.red===l.red,"red works only with red numbers")},ee.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},ee.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},ee.prototype.add=function(a,l){this._verify2(a,l);var p=a.add(l);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},ee.prototype.iadd=function(a,l){this._verify2(a,l);var p=a.iadd(l);return p.cmp(this.m)>=0&&p.isub(this.m),p},ee.prototype.sub=function(a,l){this._verify2(a,l);var p=a.sub(l);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},ee.prototype.isub=function(a,l){this._verify2(a,l);var p=a.isub(l);return p.cmpn(0)<0&&p.iadd(this.m),p},ee.prototype.shl=function(a,l){return this._verify1(a),this.imod(a.ushln(l))},ee.prototype.imul=function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},ee.prototype.mul=function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},ee.prototype.isqr=function(a){return this.imul(a,a.clone())},ee.prototype.sqr=function(a){return this.mul(a,a)},ee.prototype.sqrt=function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var p=this.m.add(new i(1)).iushrn(2);return this.pow(a,p)}for(var m=this.m.subn(1),x=0;!m.isZero()&&m.andln(1)===0;)x++,m.iushrn(1);n(!m.isZero());var S=new i(1).toRed(this),O=S.redNeg(),b=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new i(2*s*s).toRed(this);this.pow(s,b).cmp(O)!==0;)s.redIAdd(O);for(var _=this.pow(s,m),D=this.pow(a,m.addn(1).iushrn(1)),P=this.pow(a,m),Y=x;P.cmp(S)!==0;){for(var X=P,d=0;X.cmp(S)!==0;d++)X=X.redSqr();n(d<Y);var L=this.pow(_,new i(1).iushln(Y-d-1));D=D.redMul(L),_=L.redSqr(),P=P.redMul(_),Y=d}return D},ee.prototype.invm=function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},ee.prototype.pow=function(a,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return a.clone();var p=4,m=new Array(1<<p);m[0]=new i(1).toRed(this),m[1]=a;for(var x=2;x<m.length;x++)m[x]=this.mul(m[x-1],a);var S=m[0],O=0,b=0,s=l.bitLength()%26;for(s===0&&(s=26),x=l.length-1;x>=0;x--){for(var _=l.words[x],D=s-1;D>=0;D--){var P=_>>D&1;if(S!==m[0]&&(S=this.sqr(S)),P===0&&O===0){b=0;continue}O<<=1,O|=P,b++,!(b!==p&&(x!==0||D!==0))&&(S=this.mul(S,m[O]),b=0,O=0)}s=26}return S},ee.prototype.convertTo=function(a){var l=a.umod(this.m);return l===a?l.clone():l},ee.prototype.convertFrom=function(a){var l=a.clone();return l.red=null,l},i.mont=function(a){return new ue(a)};function ue(E){ee.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(ue,ee),ue.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},ue.prototype.convertFrom=function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},ue.prototype.imul=function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var p=a.imul(l),m=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=p.isub(m).iushrn(this.shift),S=x;return x.cmp(this.m)>=0?S=x.isub(this.m):x.cmpn(0)<0&&(S=x.iadd(this.m)),S._forceRed(this)},ue.prototype.mul=function(a,l){if(a.isZero()||l.isZero())return new i(0)._forceRed(this);var p=a.mul(l),m=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=p.isub(m).iushrn(this.shift),S=x;return x.cmp(this.m)>=0?S=x.isub(this.m):x.cmpn(0)<0&&(S=x.iadd(this.m)),S._forceRed(this)},ue.prototype.invm=function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(t,Ue)})(Ni);var rc=Ni.exports,nc=tn;tn.strict=Li,tn.loose=Ui;var ic=Object.prototype.toString,oc={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function tn(t){return Li(t)||Ui(t)}function Li(t){return t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function Ui(t){return oc[ic.call(t)]}var ac=nc.strict,sc=function(e){if(ac(e)){var r=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(r=r.slice(e.byteOffset,e.byteOffset+e.byteLength)),r}else return Buffer.from(e)};const Fi="hex",Pi="utf8",lr="0";function At(t){return new Uint8Array(t)}function qi(t,e=!1){const r=t.toString(Fi);return e?It(r):r}function cc(t){return t.toString(Pi)}function fr(t){return sc(t)}function kt(t,e=!1){return qi(fr(t),e)}function uc(t){return cc(fr(t))}function hc(t){return Buffer.from(ot(t),Fi)}function Rt(t){return At(hc(t))}function rn(t){return Buffer.from(t,Pi)}function lc(t){return At(rn(t))}function fc(t,e=!1){return qi(rn(t),e)}function dc(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}function Di(...t){let e=[];return t.forEach(r=>e=e.concat(Array.from(r))),new Uint8Array([...e])}function pc(t,e=8){const r=t%e;return r?(t-r)/e*e+e:t}function gc(t,e=8,r=lr){return _c(t,pc(t.length,e),r)}function _c(t,e,r=lr){return vc(t,e,!0,r)}function ot(t){return t.replace(/^0x/,"")}function It(t){return t.startsWith("0x")?t:`0x${t}`}function Hi(t){return t=ot(t),t=gc(t,2),t&&(t=It(t)),t}function mc(t){const e=t.startsWith("0x");return t=ot(t),t=t.startsWith(lr)?t.substring(1):t,e?It(t):t}function vc(t,e,r,n=lr){const o=e-t.length;let i=t;if(o>0){const f=n.repeat(o);i=r?f+t:t+f}return i}function nn(t){return fr(new Uint8Array(t))}function wc(t,e){return kt(new Uint8Array(t),!e)}function yc(t){return At(t).buffer}function bc(t){return rn(t)}function xc(t,e){return fc(t,!e)}function Mc(t){return Rt(t).buffer}function $i(t,e){const r=ot(Hi(new rc(t).toString(16)));return e?r:It(r)}var Wi={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",o=n?window:{};o.JS_SHA3_NO_WINDOW&&(n=!1);var i=!n&&typeof self=="object",f=!o.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;f?o=Ue:i&&(o=self);var u=!o.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,g=!o.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",y="0123456789abcdef".split(""),w=[31,7936,2031616,520093696],k=[4,1024,262144,67108864],B=[1,256,65536,16777216],N=[6,1536,393216,100663296],U=[0,8,16,24],K=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],C=[224,256,384,512],T=[128,256],I=["hex","buffer","arrayBuffer","array","digest"],A={128:168,256:136};(o.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"}),g&&(o.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(d){return typeof d=="object"&&d.buffer&&d.buffer.constructor===ArrayBuffer});for(var F=function(d,L,$){return function(q){return new P(d,L,d).update(q)[$]()}},j=function(d,L,$){return function(q,W){return new P(d,L,W).update(q)[$]()}},G=function(d,L,$){return function(q,W,te,V){return m["cshake"+d].update(q,W,te,V)[$]()}},ne=function(d,L,$){return function(q,W,te,V){return m["kmac"+d].update(q,W,te,V)[$]()}},ee=function(d,L,$,q){for(var W=0;W<I.length;++W){var te=I[W];d[te]=L($,q,te)}return d},ue=function(d,L){var $=F(d,L,"hex");return $.create=function(){return new P(d,L,d)},$.update=function(q){return $.create().update(q)},ee($,F,d,L)},E=function(d,L){var $=j(d,L,"hex");return $.create=function(q){return new P(d,L,q)},$.update=function(q,W){return $.create(W).update(q)},ee($,j,d,L)},a=function(d,L){var $=A[d],q=G(d,L,"hex");return q.create=function(W,te,V){return!te&&!V?m["shake"+d].create(W):new P(d,L,W).bytepad([te,V],$)},q.update=function(W,te,V,J){return q.create(te,V,J).update(W)},ee(q,G,d,L)},l=function(d,L){var $=A[d],q=ne(d,L,"hex");return q.create=function(W,te,V){return new Y(d,L,te).bytepad(["KMAC",V],$).bytepad([W],$)},q.update=function(W,te,V,J){return q.create(W,V,J).update(te)},ee(q,ne,d,L)},p=[{name:"keccak",padding:B,bits:C,createMethod:ue},{name:"sha3",padding:N,bits:C,createMethod:ue},{name:"shake",padding:w,bits:T,createMethod:E},{name:"cshake",padding:k,bits:T,createMethod:a},{name:"kmac",padding:k,bits:T,createMethod:l}],m={},x=[],S=0;S<p.length;++S)for(var O=p[S],b=O.bits,s=0;s<b.length;++s){var _=O.name+"_"+b[s];if(x.push(_),m[_]=O.createMethod(b[s],O.padding),O.name!=="sha3"){var D=O.name+b[s];x.push(D),m[D]=m[_]}}function P(d,L,$){this.blocks=[],this.s=[],this.padding=L,this.outputBits=$,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(d<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=$>>5,this.extraBytes=($&31)>>3;for(var q=0;q<50;++q)this.s[q]=0}P.prototype.update=function(d){if(this.finalized)throw new Error(r);var L,$=typeof d;if($!=="string"){if($==="object"){if(d===null)throw new Error(e);if(g&&d.constructor===ArrayBuffer)d=new Uint8Array(d);else if(!Array.isArray(d)&&(!g||!ArrayBuffer.isView(d)))throw new Error(e)}else throw new Error(e);L=!0}for(var q=this.blocks,W=this.byteCount,te=d.length,V=this.blockCount,J=0,ce=this.s,Q,ie;J<te;){if(this.reset)for(this.reset=!1,q[0]=this.block,Q=1;Q<V+1;++Q)q[Q]=0;if(L)for(Q=this.start;J<te&&Q<W;++J)q[Q>>2]|=d[J]<<U[Q++&3];else for(Q=this.start;J<te&&Q<W;++J)ie=d.charCodeAt(J),ie<128?q[Q>>2]|=ie<<U[Q++&3]:ie<2048?(q[Q>>2]|=(192|ie>>6)<<U[Q++&3],q[Q>>2]|=(128|ie&63)<<U[Q++&3]):ie<55296||ie>=57344?(q[Q>>2]|=(224|ie>>12)<<U[Q++&3],q[Q>>2]|=(128|ie>>6&63)<<U[Q++&3],q[Q>>2]|=(128|ie&63)<<U[Q++&3]):(ie=65536+((ie&1023)<<10|d.charCodeAt(++J)&1023),q[Q>>2]|=(240|ie>>18)<<U[Q++&3],q[Q>>2]|=(128|ie>>12&63)<<U[Q++&3],q[Q>>2]|=(128|ie>>6&63)<<U[Q++&3],q[Q>>2]|=(128|ie&63)<<U[Q++&3]);if(this.lastByteIndex=Q,Q>=W){for(this.start=Q-W,this.block=q[V],Q=0;Q<V;++Q)ce[Q]^=q[Q];X(ce),this.reset=!0}else this.start=Q}return this},P.prototype.encode=function(d,L){var $=d&255,q=1,W=[$];for(d=d>>8,$=d&255;$>0;)W.unshift($),d=d>>8,$=d&255,++q;return L?W.push(q):W.unshift(q),this.update(W),W.length},P.prototype.encodeString=function(d){var L,$=typeof d;if($!=="string"){if($==="object"){if(d===null)throw new Error(e);if(g&&d.constructor===ArrayBuffer)d=new Uint8Array(d);else if(!Array.isArray(d)&&(!g||!ArrayBuffer.isView(d)))throw new Error(e)}else throw new Error(e);L=!0}var q=0,W=d.length;if(L)q=W;else for(var te=0;te<d.length;++te){var V=d.charCodeAt(te);V<128?q+=1:V<2048?q+=2:V<55296||V>=57344?q+=3:(V=65536+((V&1023)<<10|d.charCodeAt(++te)&1023),q+=4)}return q+=this.encode(q*8),this.update(d),q},P.prototype.bytepad=function(d,L){for(var $=this.encode(L),q=0;q<d.length;++q)$+=this.encodeString(d[q]);var W=L-$%L,te=[];return te.length=W,this.update(te),this},P.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var d=this.blocks,L=this.lastByteIndex,$=this.blockCount,q=this.s;if(d[L>>2]|=this.padding[L&3],this.lastByteIndex===this.byteCount)for(d[0]=d[$],L=1;L<$+1;++L)d[L]=0;for(d[$-1]|=2147483648,L=0;L<$;++L)q[L]^=d[L];X(q)}},P.prototype.toString=P.prototype.hex=function(){this.finalize();for(var d=this.blockCount,L=this.s,$=this.outputBlocks,q=this.extraBytes,W=0,te=0,V="",J;te<$;){for(W=0;W<d&&te<$;++W,++te)J=L[W],V+=y[J>>4&15]+y[J&15]+y[J>>12&15]+y[J>>8&15]+y[J>>20&15]+y[J>>16&15]+y[J>>28&15]+y[J>>24&15];te%d===0&&(X(L),W=0)}return q&&(J=L[W],V+=y[J>>4&15]+y[J&15],q>1&&(V+=y[J>>12&15]+y[J>>8&15]),q>2&&(V+=y[J>>20&15]+y[J>>16&15])),V},P.prototype.arrayBuffer=function(){this.finalize();var d=this.blockCount,L=this.s,$=this.outputBlocks,q=this.extraBytes,W=0,te=0,V=this.outputBits>>3,J;q?J=new ArrayBuffer($+1<<2):J=new ArrayBuffer(V);for(var ce=new Uint32Array(J);te<$;){for(W=0;W<d&&te<$;++W,++te)ce[te]=L[W];te%d===0&&X(L)}return q&&(ce[W]=L[W],J=J.slice(0,V)),J},P.prototype.buffer=P.prototype.arrayBuffer,P.prototype.digest=P.prototype.array=function(){this.finalize();for(var d=this.blockCount,L=this.s,$=this.outputBlocks,q=this.extraBytes,W=0,te=0,V=[],J,ce;te<$;){for(W=0;W<d&&te<$;++W,++te)J=te<<2,ce=L[W],V[J]=ce&255,V[J+1]=ce>>8&255,V[J+2]=ce>>16&255,V[J+3]=ce>>24&255;te%d===0&&X(L)}return q&&(J=te<<2,ce=L[W],V[J]=ce&255,q>1&&(V[J+1]=ce>>8&255),q>2&&(V[J+2]=ce>>16&255)),V};function Y(d,L,$){P.call(this,d,L,$)}Y.prototype=new P,Y.prototype.finalize=function(){return this.encode(this.outputBits,!0),P.prototype.finalize.call(this)};var X=function(d){var L,$,q,W,te,V,J,ce,Q,ie,v,c,h,M,R,H,z,re,oe,fe,he,ae,He,de,pe,dt,_e,me,pt,ve,we,gt,ye,be,_t,xe,Me,mt,Ee,Ce,vt,Se,Ae,wt,ke,Re,yt,Ie,Te,bt,Oe,Be,xt,Ne,Le,Qe,Xe,Ze,et,tt,rt,nt,it;for(q=0;q<48;q+=2)W=d[0]^d[10]^d[20]^d[30]^d[40],te=d[1]^d[11]^d[21]^d[31]^d[41],V=d[2]^d[12]^d[22]^d[32]^d[42],J=d[3]^d[13]^d[23]^d[33]^d[43],ce=d[4]^d[14]^d[24]^d[34]^d[44],Q=d[5]^d[15]^d[25]^d[35]^d[45],ie=d[6]^d[16]^d[26]^d[36]^d[46],v=d[7]^d[17]^d[27]^d[37]^d[47],c=d[8]^d[18]^d[28]^d[38]^d[48],h=d[9]^d[19]^d[29]^d[39]^d[49],L=c^(V<<1|J>>>31),$=h^(J<<1|V>>>31),d[0]^=L,d[1]^=$,d[10]^=L,d[11]^=$,d[20]^=L,d[21]^=$,d[30]^=L,d[31]^=$,d[40]^=L,d[41]^=$,L=W^(ce<<1|Q>>>31),$=te^(Q<<1|ce>>>31),d[2]^=L,d[3]^=$,d[12]^=L,d[13]^=$,d[22]^=L,d[23]^=$,d[32]^=L,d[33]^=$,d[42]^=L,d[43]^=$,L=V^(ie<<1|v>>>31),$=J^(v<<1|ie>>>31),d[4]^=L,d[5]^=$,d[14]^=L,d[15]^=$,d[24]^=L,d[25]^=$,d[34]^=L,d[35]^=$,d[44]^=L,d[45]^=$,L=ce^(c<<1|h>>>31),$=Q^(h<<1|c>>>31),d[6]^=L,d[7]^=$,d[16]^=L,d[17]^=$,d[26]^=L,d[27]^=$,d[36]^=L,d[37]^=$,d[46]^=L,d[47]^=$,L=ie^(W<<1|te>>>31),$=v^(te<<1|W>>>31),d[8]^=L,d[9]^=$,d[18]^=L,d[19]^=$,d[28]^=L,d[29]^=$,d[38]^=L,d[39]^=$,d[48]^=L,d[49]^=$,M=d[0],R=d[1],Re=d[11]<<4|d[10]>>>28,yt=d[10]<<4|d[11]>>>28,me=d[20]<<3|d[21]>>>29,pt=d[21]<<3|d[20]>>>29,tt=d[31]<<9|d[30]>>>23,rt=d[30]<<9|d[31]>>>23,Se=d[40]<<18|d[41]>>>14,Ae=d[41]<<18|d[40]>>>14,be=d[2]<<1|d[3]>>>31,_t=d[3]<<1|d[2]>>>31,H=d[13]<<12|d[12]>>>20,z=d[12]<<12|d[13]>>>20,Ie=d[22]<<10|d[23]>>>22,Te=d[23]<<10|d[22]>>>22,ve=d[33]<<13|d[32]>>>19,we=d[32]<<13|d[33]>>>19,nt=d[42]<<2|d[43]>>>30,it=d[43]<<2|d[42]>>>30,Ne=d[5]<<30|d[4]>>>2,Le=d[4]<<30|d[5]>>>2,xe=d[14]<<6|d[15]>>>26,Me=d[15]<<6|d[14]>>>26,re=d[25]<<11|d[24]>>>21,oe=d[24]<<11|d[25]>>>21,bt=d[34]<<15|d[35]>>>17,Oe=d[35]<<15|d[34]>>>17,gt=d[45]<<29|d[44]>>>3,ye=d[44]<<29|d[45]>>>3,de=d[6]<<28|d[7]>>>4,pe=d[7]<<28|d[6]>>>4,Qe=d[17]<<23|d[16]>>>9,Xe=d[16]<<23|d[17]>>>9,mt=d[26]<<25|d[27]>>>7,Ee=d[27]<<25|d[26]>>>7,fe=d[36]<<21|d[37]>>>11,he=d[37]<<21|d[36]>>>11,Be=d[47]<<24|d[46]>>>8,xt=d[46]<<24|d[47]>>>8,wt=d[8]<<27|d[9]>>>5,ke=d[9]<<27|d[8]>>>5,dt=d[18]<<20|d[19]>>>12,_e=d[19]<<20|d[18]>>>12,Ze=d[29]<<7|d[28]>>>25,et=d[28]<<7|d[29]>>>25,Ce=d[38]<<8|d[39]>>>24,vt=d[39]<<8|d[38]>>>24,ae=d[48]<<14|d[49]>>>18,He=d[49]<<14|d[48]>>>18,d[0]=M^~H&re,d[1]=R^~z&oe,d[10]=de^~dt&me,d[11]=pe^~_e&pt,d[20]=be^~xe&mt,d[21]=_t^~Me&Ee,d[30]=wt^~Re&Ie,d[31]=ke^~yt&Te,d[40]=Ne^~Qe&Ze,d[41]=Le^~Xe&et,d[2]=H^~re&fe,d[3]=z^~oe&he,d[12]=dt^~me&ve,d[13]=_e^~pt&we,d[22]=xe^~mt&Ce,d[23]=Me^~Ee&vt,d[32]=Re^~Ie&bt,d[33]=yt^~Te&Oe,d[42]=Qe^~Ze&tt,d[43]=Xe^~et&rt,d[4]=re^~fe&ae,d[5]=oe^~he&He,d[14]=me^~ve&gt,d[15]=pt^~we&ye,d[24]=mt^~Ce&Se,d[25]=Ee^~vt&Ae,d[34]=Ie^~bt&Be,d[35]=Te^~Oe&xt,d[44]=Ze^~tt&nt,d[45]=et^~rt&it,d[6]=fe^~ae&M,d[7]=he^~He&R,d[16]=ve^~gt&de,d[17]=we^~ye&pe,d[26]=Ce^~Se&be,d[27]=vt^~Ae&_t,d[36]=bt^~Be&wt,d[37]=Oe^~xt&ke,d[46]=tt^~nt&Ne,d[47]=rt^~it&Le,d[8]=ae^~M&H,d[9]=He^~R&z,d[18]=gt^~de&dt,d[19]=ye^~pe&_e,d[28]=Se^~be&xe,d[29]=Ae^~_t&Me,d[38]=Be^~wt&Re,d[39]=xt^~ke&yt,d[48]=nt^~Ne&Qe,d[49]=it^~Le&Xe,d[0]^=K[q],d[1]^=K[q+1]};if(u)t.exports=m;else for(S=0;S<x.length;++S)o[x[S]]=m[x[S]]})()})(Wi);var Tt={},at={};Object.defineProperty(at,"__esModule",{value:!0}),at.isBrowserCryptoAvailable=at.getSubtleCrypto=at.getBrowerCrypto=void 0;function on(){return Ue?.crypto||Ue?.msCrypto||{}}at.getBrowerCrypto=on;function ji(){const t=on();return t.subtle||t.webkitSubtle}at.getSubtleCrypto=ji;function Ec(){return!!on()&&!!ji()}at.isBrowserCryptoAvailable=Ec;var st={};Object.defineProperty(st,"__esModule",{value:!0}),st.isBrowser=st.isNode=st.isReactNative=void 0;function zi(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}st.isReactNative=zi;function Ki(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}st.isNode=Ki;function Cc(){return!zi()&&!Ki()}st.isBrowser=Cc,function(t){var e=Ue&&Ue.__createBinding||(Object.create?function(n,o,i,f){f===void 0&&(f=i),Object.defineProperty(n,f,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,f){f===void 0&&(f=i),n[f]=o[i]}),r=Ue&&Ue.__exportStar||function(n,o){for(var i in n)i!=="default"&&!o.hasOwnProperty(i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(at,t),r(st,t)}(Tt);function Sc(){const t=Date.now()*Math.pow(10,3),e=Math.floor(Math.random()*Math.pow(10,3));return t+e}function dr(t){return Hi(t)}function Ac(t){return mc(It(t))}const an=Sc;function sn(){return((e,r)=>{for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r})()}function kc(t,e){let r;const n=Xs[t];return n&&(r=`https://${n}.infura.io/v3/${e}`),r}function Rc(t,e){let r;const n=kc(t,e.infuraId);return e.custom&&e.custom[t]?r=e.custom[t]:n&&(r=n),r}function Ic(t){return t===""||typeof t=="string"&&t.trim()===""}function Tc(t){return!(t&&t.length)}function Ji(t,e){return dc(t,e)}function Oc(t){return typeof t.method<"u"}function zt(t){return typeof t.result<"u"}function pr(t){return typeof t.error<"u"}function Vi(t){return typeof t.event<"u"}function Bc(t){return Qs.includes(t)||t.startsWith("wc_")}function Nc(t){return t.method.startsWith("wc_")?!0:!en.includes(t.method)}function Lc(t){t=ot(t.toLowerCase());const e=ot(Wi.exports.keccak_256(bc(t)));let r="";for(let n=0;n<t.length;n++)parseInt(e[n],16)>7?r+=t[n].toUpperCase():r+=t[n];return It(r)}const Uc=t=>t?t.toLowerCase().substring(0,2)!=="0x"?!1:/^(0x)?[0-9a-f]{40}$/i.test(t)?/^(0x)?[0-9a-f]{40}$/.test(t)||/^(0x)?[0-9A-F]{40}$/.test(t)?!0:t===Lc(t):!1:!1;function gr(t){return!Tc(t)&&!Ji(t[0])&&(t[0]=xc(t[0])),t}function cn(t){if(typeof t.type<"u"&&t.type!=="0")return t;if(typeof t.from>"u"||!Uc(t.from))throw new Error("Transaction object must include a valid 'from' value.");function e(o){let i=o;return(typeof o=="number"||typeof o=="string"&&!Ic(o))&&(Ji(o)?typeof o=="string"&&(i=dr(o)):i=$i(o)),typeof i=="string"&&(i=Ac(i)),i}const r={from:dr(t.from),to:typeof t.to>"u"?void 0:dr(t.to),gasPrice:typeof t.gasPrice>"u"?"":e(t.gasPrice),gas:typeof t.gas>"u"?typeof t.gasLimit>"u"?"":e(t.gasLimit):e(t.gas),value:typeof t.value>"u"?"":e(t.value),nonce:typeof t.nonce>"u"?"":e(t.nonce),data:typeof t.data>"u"?"":dr(t.data)||"0x"},n=["gasPrice","gas","value","nonce"];return Object.keys(r).forEach(o=>{(typeof r[o]>"u"||typeof r[o]=="string"&&!r[o].trim().length)&&n.includes(o)&&delete r[o]}),r}function Fc(t){const e=t.message||"Failed or Rejected Request";let r=-32e3;if(t&&!t.code)switch(e){case"Parse error":r=-32700;break;case"Invalid request":r=-32600;break;case"Method not found":r=-32601;break;case"Invalid params":r=-32602;break;case"Internal error":r=-32603;break;default:r=-32e3;break}const n={code:r,message:e};return t.data&&(n.data=t.data),n}var un={},Pc=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Yi="%[a-f0-9]{2}",Gi=new RegExp(Yi,"gi"),Qi=new RegExp("("+Yi+")+","gi");function hn(t,e){try{return decodeURIComponent(t.join(""))}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],hn(r),hn(n))}function qc(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Gi),r=1;r<e.length;r++)t=hn(e,r).join(""),e=t.match(Gi);return t}}function Dc(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=Qi.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=qc(r[0]);n!==r[0]&&(e[r[0]]=n)}r=Qi.exec(t)}e["%C2"]="\uFFFD";for(var o=Object.keys(e),i=0;i<o.length;i++){var f=o[i];t=t.replace(new RegExp(f,"g"),e[f])}return t}var Hc=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return Dc(t)}},$c=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]};(function(t){const e=Pc,r=Hc,n=$c,o=C=>C==null;function i(C){switch(C.arrayFormat){case"index":return T=>(I,A)=>{const F=I.length;return A===void 0||C.skipNull&&A===null||C.skipEmptyString&&A===""?I:A===null?[...I,[g(T,C),"[",F,"]"].join("")]:[...I,[g(T,C),"[",g(F,C),"]=",g(A,C)].join("")]};case"bracket":return T=>(I,A)=>A===void 0||C.skipNull&&A===null||C.skipEmptyString&&A===""?I:A===null?[...I,[g(T,C),"[]"].join("")]:[...I,[g(T,C),"[]=",g(A,C)].join("")];case"comma":case"separator":return T=>(I,A)=>A==null||A.length===0?I:I.length===0?[[g(T,C),"=",g(A,C)].join("")]:[[I,g(A,C)].join(C.arrayFormatSeparator)];default:return T=>(I,A)=>A===void 0||C.skipNull&&A===null||C.skipEmptyString&&A===""?I:A===null?[...I,g(T,C)]:[...I,[g(T,C),"=",g(A,C)].join("")]}}function f(C){let T;switch(C.arrayFormat){case"index":return(I,A,F)=>{if(T=/\[(\d*)\]$/.exec(I),I=I.replace(/\[\d*\]$/,""),!T){F[I]=A;return}F[I]===void 0&&(F[I]={}),F[I][T[1]]=A};case"bracket":return(I,A,F)=>{if(T=/(\[\])$/.exec(I),I=I.replace(/\[\]$/,""),!T){F[I]=A;return}if(F[I]===void 0){F[I]=[A];return}F[I]=[].concat(F[I],A)};case"comma":case"separator":return(I,A,F)=>{const G=typeof A=="string"&&A.split("").indexOf(C.arrayFormatSeparator)>-1?A.split(C.arrayFormatSeparator).map(ne=>y(ne,C)):A===null?A:y(A,C);F[I]=G};default:return(I,A,F)=>{if(F[I]===void 0){F[I]=A;return}F[I]=[].concat(F[I],A)}}}function u(C){if(typeof C!="string"||C.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function g(C,T){return T.encode?T.strict?e(C):encodeURIComponent(C):C}function y(C,T){return T.decode?r(C):C}function w(C){return Array.isArray(C)?C.sort():typeof C=="object"?w(Object.keys(C)).sort((T,I)=>Number(T)-Number(I)).map(T=>C[T]):C}function k(C){const T=C.indexOf("#");return T!==-1&&(C=C.slice(0,T)),C}function B(C){let T="";const I=C.indexOf("#");return I!==-1&&(T=C.slice(I)),T}function N(C){C=k(C);const T=C.indexOf("?");return T===-1?"":C.slice(T+1)}function U(C,T){return T.parseNumbers&&!Number.isNaN(Number(C))&&typeof C=="string"&&C.trim()!==""?C=Number(C):T.parseBooleans&&C!==null&&(C.toLowerCase()==="true"||C.toLowerCase()==="false")&&(C=C.toLowerCase()==="true"),C}function K(C,T){T=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},T),u(T.arrayFormatSeparator);const I=f(T),A=Object.create(null);if(typeof C!="string"||(C=C.trim().replace(/^[?#&]/,""),!C))return A;for(const F of C.split("&")){let[j,G]=n(T.decode?F.replace(/\+/g," "):F,"=");G=G===void 0?null:["comma","separator"].includes(T.arrayFormat)?G:y(G,T),I(y(j,T),G,A)}for(const F of Object.keys(A)){const j=A[F];if(typeof j=="object"&&j!==null)for(const G of Object.keys(j))j[G]=U(j[G],T);else A[F]=U(j,T)}return T.sort===!1?A:(T.sort===!0?Object.keys(A).sort():Object.keys(A).sort(T.sort)).reduce((F,j)=>{const G=A[j];return Boolean(G)&&typeof G=="object"&&!Array.isArray(G)?F[j]=w(G):F[j]=G,F},Object.create(null))}t.extract=N,t.parse=K,t.stringify=(C,T)=>{if(!C)return"";T=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},T),u(T.arrayFormatSeparator);const I=G=>T.skipNull&&o(C[G])||T.skipEmptyString&&C[G]==="",A=i(T),F={};for(const G of Object.keys(C))I(G)||(F[G]=C[G]);const j=Object.keys(F);return T.sort!==!1&&j.sort(T.sort),j.map(G=>{const ne=C[G];return ne===void 0?"":ne===null?g(G,T):Array.isArray(ne)?ne.reduce(A(G),[]).join("&"):g(G,T)+"="+g(ne,T)}).filter(G=>G.length>0).join("&")},t.parseUrl=(C,T)=>{T=Object.assign({decode:!0},T);const[I,A]=n(C,"#");return Object.assign({url:I.split("?")[0]||"",query:K(N(C),T)},T&&T.parseFragmentIdentifier&&A?{fragmentIdentifier:y(A,T)}:{})},t.stringifyUrl=(C,T)=>{T=Object.assign({encode:!0,strict:!0},T);const I=k(C.url).split("?")[0]||"",A=t.extract(C.url),F=t.parse(A,{sort:!1}),j=Object.assign(F,C.query);let G=t.stringify(j,T);G&&(G=`?${G}`);let ne=B(C.url);return C.fragmentIdentifier&&(ne=`#${g(C.fragmentIdentifier,T)}`),`${I}${G}${ne}`}})(un);function Wc(t){const e=t.indexOf("?")!==-1?t.indexOf("?"):void 0;return typeof e<"u"?t.substr(e):""}function jc(t,e){let r=Xi(t);return r=Object.assign(Object.assign({},r),e),t=zc(r),t}function Xi(t){return un.parse(t)}function zc(t){return un.stringify(t)}function Kc(t){return typeof t.bridge<"u"}function Jc(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),o=t.substring(e+1,r);function i(k){const B="@",N=k.split(B);return{handshakeTopic:N[0],version:parseInt(N[1],10)}}const f=i(o),u=typeof r<"u"?t.substr(r):"";function g(k){const B=Xi(k);return{key:B.key||"",bridge:B.bridge||""}}const y=g(u);return Object.assign(Object.assign({protocol:n},f),y)}class Vc{constructor(){this._eventEmitters=[],typeof window<"u"&&typeof window.addEventListener<"u"&&(window.addEventListener("online",()=>this.trigger("online")),window.addEventListener("offline",()=>this.trigger("offline")))}on(e,r){this._eventEmitters.push({event:e,callback:r})}trigger(e){let r=[];e&&(r=this._eventEmitters.filter(n=>n.event===e)),r.forEach(n=>{n.callback()})}}const Yc=typeof global.WebSocket<"u"?global.WebSocket:require("ws");class Gc{constructor(e){if(this.opts=e,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=e.protocol,this._version=e.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=e.subscriptions||[],this._netMonitor=e.netMonitor||new Vc,!e.url||typeof e.url!="string")throw new Error("Missing or invalid WebSocket url");this._url=e.url,this._netMonitor.on("online",()=>this._socketCreate())}set readyState(e){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(e){}get connecting(){return this.readyState===0}set connected(e){}get connected(){return this.readyState===1}set closing(e){}get closing(){return this.readyState===2}set closed(e){}get closed(){return this.readyState===3}open(){this._socketCreate()}close(){this._socketClose()}send(e,r,n){if(!r||typeof r!="string")throw new Error("Missing or invalid topic field");this._socketSend({topic:r,type:"pub",payload:e,silent:!!n})}subscribe(e){this._socketSend({topic:e,type:"sub",payload:"",silent:!0})}on(e,r){this._events.push({event:e,callback:r})}_socketCreate(){if(this._nextSocket)return;const e=Qc(this._url,this._protocol,this._version);if(this._nextSocket=new Yc(e),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=r=>this._socketReceive(r),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=r=>this._socketError(r),this._nextSocket.onclose=()=>{setTimeout(()=>{this._nextSocket=null,this._socketCreate()},1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(e){const r=JSON.stringify(e);this._socket&&this._socket.readyState===1?this._socket.send(r):(this._setToQueue(e),this._socketCreate())}async _socketReceive(e){let r;try{r=JSON.parse(e.data)}catch{return}if(this._socketSend({topic:r.topic,type:"ack",payload:"",silent:!0}),this._socket&&this._socket.readyState===1){const n=this._events.filter(o=>o.event==="message");n&&n.length&&n.forEach(o=>o.callback(r))}}_socketError(e){const r=this._events.filter(n=>n.event==="error");r&&r.length&&r.forEach(n=>n.callback(e))}_queueSubscriptions(){this._subscriptions.forEach(r=>this._queue.push({topic:r,type:"sub",payload:"",silent:!0})),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(e){this._queue.push(e)}_pushQueue(){this._queue.forEach(r=>this._socketSend(r)),this._queue=[]}}function Qc(t,e,r){var n,o;const f=(t.startsWith("https")?t.replace("https","wss"):t.startsWith("http")?t.replace("http","ws"):t).split("?"),u=Ci()?{protocol:e,version:r,env:"browser",host:((n=ki())===null||n===void 0?void 0:n.host)||""}:{protocol:e,version:r,env:((o=sr())===null||o===void 0?void 0:o.name)||""},g=jc(Wc(f[1]||""),u);return f[0]+"?"+g}const ln="Session currently connected",Et="Session currently disconnected",Xc="Session Rejected",Zc="Missing JSON RPC response",eu='JSON-RPC success response must include "result" field',tu='JSON-RPC error response must include "error" field',ru='JSON RPC request must have valid "method" value',nu='JSON RPC request must have valid "id" value',iu="Missing one of the required parameters: bridge / uri / session",Zi="JSON RPC response format is invalid",ou="URI format is invalid",au="QRCode Modal not provided",eo="User close QRCode Modal";class su{constructor(){this._eventEmitters=[]}subscribe(e){this._eventEmitters.push(e)}unsubscribe(e){this._eventEmitters=this._eventEmitters.filter(r=>r.event!==e)}trigger(e){let r=[],n;Oc(e)?n=e.method:zt(e)||pr(e)?n=`response:${e.id}`:Vi(e)?n=e.event:n="",n&&(r=this._eventEmitters.filter(o=>o.event===n)),(!r||!r.length)&&!Bc(n)&&!Vi(n)&&(r=this._eventEmitters.filter(o=>o.event==="call_request")),r.forEach(o=>{if(pr(e)){const i=new Error(e.error.message);o.callback(i,null)}else o.callback(null,e)})}}class cu{constructor(e="walletconnect"){this.storageId=e}getSession(){let e=null;const r=Xr(this.storageId);return r&&Kc(r)&&(e=r),e}setSession(e){return Qr(this.storageId,e),e}removeSession(){Zr(this.storageId)}}const uu="walletconnect.org",hu="abcdefghijklmnopqrstuvwxyz0123456789",to=hu.split("").map(t=>`https://${t}.bridge.walletconnect.org`);function lu(t){let e=t.indexOf("//")>-1?t.split("/")[2]:t.split("/")[0];return e=e.split(":")[0],e=e.split("?")[0],e}function fu(t){return lu(t).split(".").slice(-2).join(".")}function du(){return Math.floor(Math.random()*to.length)}function pu(){return to[du()]}function gu(t){return fu(t)===uu}function _u(t){return gu(t)?pu():t}class mu{constructor(e){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new su,this._clientMeta=Gr()||e.connectorOpts.clientMeta||null,this._cryptoLib=e.cryptoLib,this._sessionStorage=e.sessionStorage||new cu(e.connectorOpts.storageId),this._qrcodeModal=e.connectorOpts.qrcodeModal,this._qrcodeModalOptions=e.connectorOpts.qrcodeModalOptions,this._signingMethods=[...en,...e.connectorOpts.signingMethods||[]],!e.connectorOpts.bridge&&!e.connectorOpts.uri&&!e.connectorOpts.session)throw new Error(iu);e.connectorOpts.bridge&&(this.bridge=_u(e.connectorOpts.bridge)),e.connectorOpts.uri&&(this.uri=e.connectorOpts.uri);const r=e.connectorOpts.session||this._getStorageSession();r&&(this.session=r),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=e.transport||new Gc({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),e.connectorOpts.uri&&this._subscribeToSessionRequest(),e.pushServerOpts&&this._registerPushServer(e.pushServerOpts)}set bridge(e){!e||(this._bridge=e)}get bridge(){return this._bridge}set key(e){if(!e)return;const r=Mc(e);this._key=r}get key(){return this._key?wc(this._key,!0):""}set clientId(e){!e||(this._clientId=e)}get clientId(){let e=this._clientId;return e||(e=this._clientId=sn()),this._clientId}set peerId(e){!e||(this._peerId=e)}get peerId(){return this._peerId}set clientMeta(e){}get clientMeta(){let e=this._clientMeta;return e||(e=this._clientMeta=Gr()),e}set peerMeta(e){this._peerMeta=e}get peerMeta(){return this._peerMeta}set handshakeTopic(e){!e||(this._handshakeTopic=e)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(e){!e||(this._handshakeId=e)}get handshakeId(){return this._handshakeId}get uri(){return this._formatUri()}set uri(e){if(!e)return;const{handshakeTopic:r,bridge:n,key:o}=this._parseUri(e);this.handshakeTopic=r,this.bridge=n,this.key=o}set chainId(e){this._chainId=e}get chainId(){return this._chainId}set networkId(e){this._networkId=e}get networkId(){return this._networkId}set accounts(e){this._accounts=e}get accounts(){return this._accounts}set rpcUrl(e){this._rpcUrl=e}get rpcUrl(){return this._rpcUrl}set connected(e){}get connected(){return this._connected}set pending(e){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(e){!e||(this._connected=e.connected,this.accounts=e.accounts,this.chainId=e.chainId,this.bridge=e.bridge,this.key=e.key,this.clientId=e.clientId,this.clientMeta=e.clientMeta,this.peerId=e.peerId,this.peerMeta=e.peerMeta,this.handshakeId=e.handshakeId,this.handshakeTopic=e.handshakeTopic)}on(e,r){const n={event:e,callback:r};this._eventManager.subscribe(n)}off(e){this._eventManager.unsubscribe(e)}async createInstantRequest(e){this._key=await this._generateKey();const r=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(e)}]});this.handshakeId=r.id,this.handshakeTopic=sn(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",()=>{throw new Error(eo)});const n=()=>{this.killSession()};try{const o=await this._sendCallRequest(r);return o&&n(),o}catch(o){throw n(),o}}async connect(e){if(!this._qrcodeModal)throw new Error(au);return this.connected?{chainId:this.chainId,accounts:this.accounts}:(await this.createSession(e),new Promise(async(r,n)=>{this.on("modal_closed",()=>n(new Error(eo))),this.on("connect",(o,i)=>{if(o)return n(o);r(i.params[0])})}))}async createSession(e){if(this._connected)throw new Error(ln);if(this.pending)return;this._key=await this._generateKey();const r=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:e&&e.chainId?e.chainId:null}]});this.handshakeId=r.id,this.handshakeTopic=sn(),this._sendSessionRequest(r,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]})}approveSession(e){if(this._connected)throw new Error(ln);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const r={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},n={id:this.handshakeId,jsonrpc:"2.0",result:r};this._sendResponse(n),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(e){if(this._connected)throw new Error(ln);const r=e&&e.message?e.message:Xc,n=this._formatResponse({id:this.handshakeId,error:{message:r}});this._sendResponse(n),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:r}]}),this._removeStorageSession()}updateSession(e){if(!this._connected)throw new Error(Et);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const r={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},n=this._formatRequest({method:"wc_sessionUpdate",params:[r]});this._sendSessionRequest(n,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}async killSession(e){const r=e?e.message:"Session Disconnected",n={approved:!1,chainId:null,networkId:null,accounts:null},o=this._formatRequest({method:"wc_sessionUpdate",params:[n]});await this._sendRequest(o),this._handleSessionDisconnect(r)}async sendTransaction(e){if(!this._connected)throw new Error(Et);const r=cn(e),n=this._formatRequest({method:"eth_sendTransaction",params:[r]});return await this._sendCallRequest(n)}async signTransaction(e){if(!this._connected)throw new Error(Et);const r=cn(e),n=this._formatRequest({method:"eth_signTransaction",params:[r]});return await this._sendCallRequest(n)}async signMessage(e){if(!this._connected)throw new Error(Et);const r=this._formatRequest({method:"eth_sign",params:e});return await this._sendCallRequest(r)}async signPersonalMessage(e){if(!this._connected)throw new Error(Et);e=gr(e);const r=this._formatRequest({method:"personal_sign",params:e});return await this._sendCallRequest(r)}async signTypedData(e){if(!this._connected)throw new Error(Et);const r=this._formatRequest({method:"eth_signTypedData",params:e});return await this._sendCallRequest(r)}async updateChain(e){if(!this._connected)throw new Error("Session currently disconnected");const r=this._formatRequest({method:"wallet_updateChain",params:[e]});return await this._sendCallRequest(r)}unsafeSend(e,r){return this._sendRequest(e,r),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:r}]}),new Promise((n,o)=>{this._subscribeToResponse(e.id,(i,f)=>{if(i){o(i);return}if(!f)throw new Error(Zc);n(f)})})}async sendCustomRequest(e,r){if(!this._connected)throw new Error(Et);switch(e.method){case"eth_accounts":return this.accounts;case"eth_chainId":return $i(this.chainId);case"eth_sendTransaction":case"eth_signTransaction":e.params&&(e.params[0]=cn(e.params[0]));break;case"personal_sign":e.params&&(e.params=gr(e.params));break}const n=this._formatRequest(e);return await this._sendCallRequest(n,r)}approveRequest(e){if(zt(e)){const r=this._formatResponse(e);this._sendResponse(r)}else throw new Error(eu)}rejectRequest(e){if(pr(e)){const r=this._formatResponse(e);this._sendResponse(r)}else throw new Error(tu)}transportClose(){this._transport.close()}async _sendRequest(e,r){const n=this._formatRequest(e),o=await this._encrypt(n),i=typeof r?.topic<"u"?r.topic:this.peerId,f=JSON.stringify(o),u=typeof r?.forcePushNotification<"u"?!r.forcePushNotification:Nc(n);this._transport.send(f,i,u)}async _sendResponse(e){const r=await this._encrypt(e),n=this.peerId,o=JSON.stringify(r),i=!0;this._transport.send(o,n,i)}async _sendSessionRequest(e,r,n){this._sendRequest(e,n),this._subscribeToSessionResponse(e.id,r)}_sendCallRequest(e,r){return this._sendRequest(e,r),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:r}]}),this._subscribeToCallResponse(e.id)}_formatRequest(e){if(typeof e.method>"u")throw new Error(ru);return{id:typeof e.id>"u"?an():e.id,jsonrpc:"2.0",method:e.method,params:typeof e.params>"u"?[]:e.params}}_formatResponse(e){if(typeof e.id>"u")throw new Error(nu);const r={id:e.id,jsonrpc:"2.0"};if(pr(e)){const n=Fc(e.error);return Object.assign(Object.assign(Object.assign({},r),e),{error:n})}else if(zt(e))return Object.assign(Object.assign({},r),e);throw new Error(Zi)}_handleSessionDisconnect(e){const r=e||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),Zr(hr)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:r}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(e,r){r?r.approved?(this._connected?(r.chainId&&(this.chainId=r.chainId),r.accounts&&(this.accounts=r.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,r.chainId&&(this.chainId=r.chainId),r.accounts&&(this.accounts=r.accounts),r.peerId&&!this.peerId&&(this.peerId=r.peerId),r.peerMeta&&!this.peerMeta&&(this.peerMeta=r.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(e):this._handleSessionDisconnect(e)}async _handleIncomingMessages(e){if(![this.clientId,this.handshakeTopic].includes(e.topic))return;let n;try{n=JSON.parse(e.payload)}catch{return}const o=await this._decrypt(n);o&&this._eventManager.trigger(o)}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(e,r){this.on(`response:${e}`,r)}_subscribeToSessionResponse(e,r){this._subscribeToResponse(e,(n,o)=>{if(n){this._handleSessionResponse(n.message);return}zt(o)?this._handleSessionResponse(r,o.result):o.error&&o.error.message?this._handleSessionResponse(o.error.message):this._handleSessionResponse(r)})}_subscribeToCallResponse(e){return new Promise((r,n)=>{this._subscribeToResponse(e,(o,i)=>{if(o){n(o);return}zt(i)?r(i.result):i.error&&i.error.message?n(i.error):n(new Error(Zi))})})}_subscribeToInternalEvents(){this.on("display_uri",()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,()=>{this._eventManager.trigger({event:"modal_closed",params:[]})},this._qrcodeModalOptions)}),this.on("connect",()=>{this._qrcodeModal&&this._qrcodeModal.close()}),this.on("call_request_sent",(e,r)=>{const{request:n}=r.params[0];if(Mi()&&this._signingMethods.includes(n.method)){const o=Xr(hr);o&&(window.location.href=o.href)}}),this.on("wc_sessionRequest",(e,r)=>{e&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:e.toString()}]}),this.handshakeId=r.id,this.peerId=r.params[0].peerId,this.peerMeta=r.params[0].peerMeta;const n=Object.assign(Object.assign({},r),{method:"session_request"});this._eventManager.trigger(n)}),this.on("wc_sessionUpdate",(e,r)=>{e&&this._handleSessionResponse(e.message),this._handleSessionResponse("Session disconnected",r.params[0])})}_initTransport(){this._transport.on("message",e=>this._handleIncomingMessages(e)),this._transport.on("open",()=>this._eventManager.trigger({event:"transport_open",params:[]})),this._transport.on("close",()=>this._eventManager.trigger({event:"transport_close",params:[]})),this._transport.on("error",()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})),this._transport.open()}_formatUri(){const e=this.protocol,r=this.handshakeTopic,n=this.version,o=encodeURIComponent(this.bridge),i=this.key;return`${e}:${r}@${n}?bridge=${o}&key=${i}`}_parseUri(e){const r=Jc(e);if(r.protocol===this.protocol){if(!r.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");const n=r.handshakeTopic;if(!r.bridge)throw Error("Invalid or missing bridge url parameter value");const o=decodeURIComponent(r.bridge);if(!r.key)throw Error("Invalid or missing key parameter value");const i=r.key;return{handshakeTopic:n,bridge:o,key:i}}else throw new Error(ou)}async _generateKey(){return this._cryptoLib?await this._cryptoLib.generateKey():null}async _encrypt(e){const r=this._key;return this._cryptoLib&&r?await this._cryptoLib.encrypt(e,r):null}async _decrypt(e){const r=this._key;return this._cryptoLib&&r?await this._cryptoLib.decrypt(e,r):null}_getStorageSession(){let e=null;return this._sessionStorage&&(e=this._sessionStorage.getSession()),e}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(e){if(!e.url||typeof e.url!="string")throw Error("Invalid or missing pushServerOpts.url parameter value");if(!e.type||typeof e.type!="string")throw Error("Invalid or missing pushServerOpts.type parameter value");if(!e.token||typeof e.token!="string")throw Error("Invalid or missing pushServerOpts.token parameter value");const r={bridge:this.bridge,topic:this.clientId,type:e.type,token:e.token,peerName:"",language:e.language||""};this.on("connect",async(n,o)=>{if(n)throw n;if(e.peerMeta){const i=o.params[0].peerMeta.name;r.peerName=i}try{if(!(await(await fetch(`${e.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)})).json()).success)throw Error("Failed to register in Push Server")}catch{throw Error("Failed to register in Push Server")}})}}function vu(t){return Tt.getBrowerCrypto().getRandomValues(new Uint8Array(t))}const ro=256,no=ro,wu=ro,ct="AES-CBC",yu=`SHA-${no}`,fn="HMAC",bu="encrypt",xu="decrypt",Mu="sign",Eu="verify";function Cu(t){return t===ct?{length:no,name:ct}:{hash:{name:yu},name:fn}}function Su(t){return t===ct?[bu,xu]:[Mu,Eu]}async function dn(t,e=ct){return Tt.getSubtleCrypto().importKey("raw",t,Cu(e),!0,Su(e))}async function Au(t,e,r){const n=Tt.getSubtleCrypto(),o=await dn(e,ct),i=await n.encrypt({iv:t,name:ct},o,r);return new Uint8Array(i)}async function ku(t,e,r){const n=Tt.getSubtleCrypto(),o=await dn(e,ct),i=await n.decrypt({iv:t,name:ct},o,r);return new Uint8Array(i)}async function Ru(t,e){const r=Tt.getSubtleCrypto(),n=await dn(t,fn),o=await r.sign({length:wu,name:fn},n,e);return new Uint8Array(o)}function Iu(t,e,r){return Au(t,e,r)}function Tu(t,e,r){return ku(t,e,r)}async function io(t,e){return await Ru(t,e)}async function oo(t){const e=(t||256)/8,r=vu(e);return yc(fr(r))}async function ao(t,e){const r=Rt(t.data),n=Rt(t.iv),o=Rt(t.hmac),i=kt(o,!1),f=Di(r,n),u=await io(e,f),g=kt(u,!1);return ot(i)===ot(g)}async function Ou(t,e,r){const n=At(nn(e)),o=r||await oo(128),i=At(nn(o)),f=kt(i,!1),u=JSON.stringify(t),g=lc(u),y=await Iu(i,n,g),w=kt(y,!1),k=Di(y,i),B=await io(n,k),N=kt(B,!1);return{data:w,hmac:N,iv:f}}async function Bu(t,e){const r=At(nn(e));if(!r)throw new Error("Missing key: required for decryption");if(!await ao(t,r))return null;const o=Rt(t.data),i=Rt(t.iv),f=await Tu(i,r,o),u=uc(f);let g;try{g=JSON.parse(u)}catch{return null}return g}var Nu=Object.freeze({__proto__:null,generateKey:oo,verifyHmac:ao,encrypt:Ou,decrypt:Bu});class Lu extends mu{constructor(e,r){super({cryptoLib:Nu,connectorOpts:e,pushServerOpts:r})}}var Uu=Vr(Gs),Kt={},Fu=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},so={},ut={},Pu={}.toString,pn=Array.isArray||function(t){return Pu.call(t)=="[object Array]"},qu=pn;function Du(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},t.foo()===42}catch{return!1}}le.TYPED_ARRAY_SUPPORT=Du();var co=le.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function le(t,e,r){return!le.TYPED_ARRAY_SUPPORT&&!(this instanceof le)?new le(t,e,r):typeof t=="number"?uo(this,t):Ju(this,t,e,r)}le.TYPED_ARRAY_SUPPORT&&(le.prototype.__proto__=Uint8Array.prototype,le.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&le[Symbol.species]===le&&Object.defineProperty(le,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}));function gn(t){if(t>=co)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+co.toString(16)+" bytes");return t|0}function Hu(t){return t!==t}function Ot(t,e){var r;return le.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=le.prototype):(r=t,r===null&&(r=new le(e)),r.length=e),r}function uo(t,e){var r=Ot(t,e<0?0:gn(e)|0);if(!le.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)r[n]=0;return r}function $u(t,e){var r=lo(e)|0,n=Ot(t,r),o=n.write(e);return o!==r&&(n=n.slice(0,o)),n}function _n(t,e){for(var r=e.length<0?0:gn(e.length)|0,n=Ot(t,r),o=0;o<r;o+=1)n[o]=e[o]&255;return n}function Wu(t,e,r,n){if(r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");var o;return r===void 0&&n===void 0?o=new Uint8Array(e):n===void 0?o=new Uint8Array(e,r):o=new Uint8Array(e,r,n),le.TYPED_ARRAY_SUPPORT?o.__proto__=le.prototype:o=_n(t,o),o}function ju(t,e){if(le.isBuffer(e)){var r=gn(e.length)|0,n=Ot(t,r);return n.length===0||e.copy(n,0,0,r),n}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||Hu(e.length)?Ot(t,0):_n(t,e);if(e.type==="Buffer"&&Array.isArray(e.data))return _n(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function ho(t,e){e=e||1/0;for(var r,n=t.length,o=null,i=[],f=0;f<n;++f){if(r=t.charCodeAt(f),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(f+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return i}function lo(t){if(le.isBuffer(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var e=t.length;return e===0?0:ho(t).length}function zu(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function Ku(t,e,r,n){return zu(ho(e,t.length-r),t,r,n)}function Ju(t,e,r,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?Wu(t,e,r,n):typeof e=="string"?$u(t,e):ju(t,e)}le.prototype.write=function(e,r,n){r===void 0?(n=this.length,r=0):n===void 0&&typeof r=="string"?(n=this.length,r=0):isFinite(r)&&(r=r|0,isFinite(n)?n=n|0:n=void 0);var o=this.length-r;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");return Ku(this,e,r,n)},le.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var o;if(le.TYPED_ARRAY_SUPPORT)o=this.subarray(e,r),o.__proto__=le.prototype;else{var i=r-e;o=new le(i,void 0);for(var f=0;f<i;++f)o[f]=this[f+e]}return o},le.prototype.copy=function(e,r,n,o){if(n||(n=0),!o&&o!==0&&(o=this.length),r>=e.length&&(r=e.length),r||(r=0),o>0&&o<n&&(o=n),o===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-r<o-n&&(o=e.length-r+n);var i=o-n,f;if(this===e&&n<r&&r<o)for(f=i-1;f>=0;--f)e[f+r]=this[f+n];else if(i<1e3||!le.TYPED_ARRAY_SUPPORT)for(f=0;f<i;++f)e[f+r]=this[f+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),r);return i},le.prototype.fill=function(e,r,n){if(typeof e=="string"){if(typeof r=="string"?(r=0,n=this.length):typeof n=="string"&&(n=this.length),e.length===1){var o=e.charCodeAt(0);o<256&&(e=o)}}else typeof e=="number"&&(e=e&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var i;if(typeof e=="number")for(i=r;i<n;++i)this[i]=e;else{var f=le.isBuffer(e)?e:new le(e),u=f.length;for(i=0;i<n-r;++i)this[i+r]=f[i%u]}return this},le.concat=function(e,r){if(!qu(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Ot(null,0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var o=uo(null,r),i=0;for(n=0;n<e.length;++n){var f=e[n];if(!le.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(o,i),i+=f.length}return o},le.byteLength=lo,le.prototype._isBuffer=!0,le.isBuffer=function(e){return!!(e!=null&&e._isBuffer)},ut.alloc=function(t){var e=new le(t);return e.fill(0),e},ut.from=function(t){return new le(t)};var De={},mn,Vu=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];De.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},De.getSymbolTotalCodewords=function(e){return Vu[e]},De.getBCHDigit=function(t){for(var e=0;t!==0;)e++,t>>>=1;return e},De.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');mn=e},De.isKanjiModeEnabled=function(){return typeof mn<"u"},De.toSJIS=function(e){return mn(e)};var _r={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");var n=r.toLowerCase();switch(n){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,o){if(t.isValid(n))return n;try{return e(n)}catch{return o}}})(_r);function fo(){this.buffer=[],this.length=0}fo.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(var r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Yu=fo,po=ut;function Jt(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=po.alloc(t*t),this.reservedBit=po.alloc(t*t)}Jt.prototype.set=function(t,e,r,n){var o=t*this.size+e;this.data[o]=r,n&&(this.reservedBit[o]=!0)},Jt.prototype.get=function(t,e){return this.data[t*this.size+e]},Jt.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},Jt.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Gu=Jt,go={};(function(t){var e=De.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];for(var o=Math.floor(n/7)+2,i=e(n),f=i===145?26:Math.ceil((i-13)/(2*o-2))*2,u=[i-7],g=1;g<o-1;g++)u[g]=u[g-1]-f;return u.push(6),u.reverse()},t.getPositions=function(n){for(var o=[],i=t.getRowColCoords(n),f=i.length,u=0;u<f;u++)for(var g=0;g<f;g++)u===0&&g===0||u===0&&g===f-1||u===f-1&&g===0||o.push([i[u],i[g]]);return o}})(go);var _o={},Qu=De.getSymbolSize,mo=7;_o.getPositions=function(e){var r=Qu(e);return[[0,0],[r-mo,0],[0,r-mo]]};var vo={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},t.from=function(o){return t.isValid(o)?parseInt(o,10):void 0},t.getPenaltyN1=function(o){for(var i=o.size,f=0,u=0,g=0,y=null,w=null,k=0;k<i;k++){u=g=0,y=w=null;for(var B=0;B<i;B++){var N=o.get(k,B);N===y?u++:(u>=5&&(f+=e.N1+(u-5)),y=N,u=1),N=o.get(B,k),N===w?g++:(g>=5&&(f+=e.N1+(g-5)),w=N,g=1)}u>=5&&(f+=e.N1+(u-5)),g>=5&&(f+=e.N1+(g-5))}return f},t.getPenaltyN2=function(o){for(var i=o.size,f=0,u=0;u<i-1;u++)for(var g=0;g<i-1;g++){var y=o.get(u,g)+o.get(u,g+1)+o.get(u+1,g)+o.get(u+1,g+1);(y===4||y===0)&&f++}return f*e.N2},t.getPenaltyN3=function(o){for(var i=o.size,f=0,u=0,g=0,y=0;y<i;y++){u=g=0;for(var w=0;w<i;w++)u=u<<1&2047|o.get(y,w),w>=10&&(u===1488||u===93)&&f++,g=g<<1&2047|o.get(w,y),w>=10&&(g===1488||g===93)&&f++}return f*e.N3},t.getPenaltyN4=function(o){for(var i=0,f=o.data.length,u=0;u<f;u++)i+=o.data[u];var g=Math.abs(Math.ceil(i*100/f/5)-10);return g*e.N4};function r(n,o,i){switch(n){case t.Patterns.PATTERN000:return(o+i)%2===0;case t.Patterns.PATTERN001:return o%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(o+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return o*i%2+o*i%3===0;case t.Patterns.PATTERN110:return(o*i%2+o*i%3)%2===0;case t.Patterns.PATTERN111:return(o*i%3+(o+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(o,i){for(var f=i.size,u=0;u<f;u++)for(var g=0;g<f;g++)i.isReserved(g,u)||i.xor(g,u,r(o,g,u))},t.getBestMask=function(o,i){for(var f=Object.keys(t.Patterns).length,u=0,g=1/0,y=0;y<f;y++){i(y),t.applyMask(y,o);var w=t.getPenaltyN1(o)+t.getPenaltyN2(o)+t.getPenaltyN3(o)+t.getPenaltyN4(o);t.applyMask(y,o),w<g&&(g=w,u=y)}return u}})(vo);var mr={},ht=_r,vr=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],wr=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];mr.getBlocksCount=function(e,r){switch(r){case ht.L:return vr[(e-1)*4+0];case ht.M:return vr[(e-1)*4+1];case ht.Q:return vr[(e-1)*4+2];case ht.H:return vr[(e-1)*4+3];default:return}},mr.getTotalCodewordsCount=function(e,r){switch(r){case ht.L:return wr[(e-1)*4+0];case ht.M:return wr[(e-1)*4+1];case ht.Q:return wr[(e-1)*4+2];case ht.H:return wr[(e-1)*4+3];default:return}};var wo={},yr={},yo=ut,Vt=yo.alloc(512),br=yo.alloc(256);(function(){for(var e=1,r=0;r<255;r++)Vt[r]=e,br[e]=r,e<<=1,e&256&&(e^=285);for(r=255;r<512;r++)Vt[r]=Vt[r-255]})(),yr.log=function(e){if(e<1)throw new Error("log("+e+")");return br[e]},yr.exp=function(e){return Vt[e]},yr.mul=function(e,r){return e===0||r===0?0:Vt[br[e]+br[r]]},function(t){var e=ut,r=yr;t.mul=function(o,i){for(var f=e.alloc(o.length+i.length-1),u=0;u<o.length;u++)for(var g=0;g<i.length;g++)f[u+g]^=r.mul(o[u],i[g]);return f},t.mod=function(o,i){for(var f=e.from(o);f.length-i.length>=0;){for(var u=f[0],g=0;g<i.length;g++)f[g]^=r.mul(i[g],u);for(var y=0;y<f.length&&f[y]===0;)y++;f=f.slice(y)}return f},t.generateECPolynomial=function(o){for(var i=e.from([1]),f=0;f<o;f++)i=t.mul(i,[1,r.exp(f)]);return i}}(wo);var bo={},xr={};xr.byteLength=eh,xr.toByteArray=rh,xr.fromByteArray=oh;for(var ze=[],$e=[],Xu=typeof Uint8Array<"u"?Uint8Array:Array,vn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bt=0,Zu=vn.length;Bt<Zu;++Bt)ze[Bt]=vn[Bt],$e[vn.charCodeAt(Bt)]=Bt;$e["-".charCodeAt(0)]=62,$e["_".charCodeAt(0)]=63;function xo(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function eh(t){var e=xo(t),r=e[0],n=e[1];return(r+n)*3/4-n}function th(t,e,r){return(e+r)*3/4-r}function rh(t){var e,r=xo(t),n=r[0],o=r[1],i=new Xu(th(t,n,o)),f=0,u=o>0?n-4:n,g;for(g=0;g<u;g+=4)e=$e[t.charCodeAt(g)]<<18|$e[t.charCodeAt(g+1)]<<12|$e[t.charCodeAt(g+2)]<<6|$e[t.charCodeAt(g+3)],i[f++]=e>>16&255,i[f++]=e>>8&255,i[f++]=e&255;return o===2&&(e=$e[t.charCodeAt(g)]<<2|$e[t.charCodeAt(g+1)]>>4,i[f++]=e&255),o===1&&(e=$e[t.charCodeAt(g)]<<10|$e[t.charCodeAt(g+1)]<<4|$e[t.charCodeAt(g+2)]>>2,i[f++]=e>>8&255,i[f++]=e&255),i}function nh(t){return ze[t>>18&63]+ze[t>>12&63]+ze[t>>6&63]+ze[t&63]}function ih(t,e,r){for(var n,o=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),o.push(nh(n));return o.join("")}function oh(t){for(var e,r=t.length,n=r%3,o=[],i=16383,f=0,u=r-n;f<u;f+=i)o.push(ih(t,f,f+i>u?u:f+i));return n===1?(e=t[r-1],o.push(ze[e>>2]+ze[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],o.push(ze[e>>10]+ze[e>>4&63]+ze[e<<2&63]+"=")),o.join("")}var wn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */wn.read=function(t,e,r,n,o){var i,f,u=o*8-n-1,g=(1<<u)-1,y=g>>1,w=-7,k=r?o-1:0,B=r?-1:1,N=t[e+k];for(k+=B,i=N&(1<<-w)-1,N>>=-w,w+=u;w>0;i=i*256+t[e+k],k+=B,w-=8);for(f=i&(1<<-w)-1,i>>=-w,w+=n;w>0;f=f*256+t[e+k],k+=B,w-=8);if(i===0)i=1-y;else{if(i===g)return f?NaN:(N?-1:1)*(1/0);f=f+Math.pow(2,n),i=i-y}return(N?-1:1)*f*Math.pow(2,i-n)},wn.write=function(t,e,r,n,o,i){var f,u,g,y=i*8-o-1,w=(1<<y)-1,k=w>>1,B=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=n?0:i-1,U=n?1:-1,K=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,f=w):(f=Math.floor(Math.log(e)/Math.LN2),e*(g=Math.pow(2,-f))<1&&(f--,g*=2),f+k>=1?e+=B/g:e+=B*Math.pow(2,1-k),e*g>=2&&(f++,g/=2),f+k>=w?(u=0,f=w):f+k>=1?(u=(e*g-1)*Math.pow(2,o),f=f+k):(u=e*Math.pow(2,k-1)*Math.pow(2,o),f=0));o>=8;t[r+N]=u&255,N+=U,u/=256,o-=8);for(f=f<<o|u,y+=o;y>0;t[r+N]=f&255,N+=U,f/=256,y-=8);t[r+N-U]|=K*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=xr,r=wn,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=I,t.INSPECT_MAX_BYTES=50;var o=2147483647;t.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=i(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var v=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(v,c),v.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.byteOffset}});function f(v){if(v>o)throw new RangeError('The value "'+v+'" is invalid for option "size"');var c=new Uint8Array(v);return Object.setPrototypeOf(c,u.prototype),c}function u(v,c,h){if(typeof v=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return k(v)}return g(v,c,h)}u.poolSize=8192;function g(v,c,h){if(typeof v=="string")return B(v,c);if(ArrayBuffer.isView(v))return U(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(ce(v,ArrayBuffer)||v&&ce(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ce(v,SharedArrayBuffer)||v&&ce(v.buffer,SharedArrayBuffer)))return K(v,c,h);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var M=v.valueOf&&v.valueOf();if(M!=null&&M!==v)return u.from(M,c,h);var R=C(v);if(R)return R;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return u.from(v[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}u.from=function(v,c,h){return g(v,c,h)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function y(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function w(v,c,h){return y(v),v<=0?f(v):c!==void 0?typeof h=="string"?f(v).fill(c,h):f(v).fill(c):f(v)}u.alloc=function(v,c,h){return w(v,c,h)};function k(v){return y(v),f(v<0?0:T(v)|0)}u.allocUnsafe=function(v){return k(v)},u.allocUnsafeSlow=function(v){return k(v)};function B(v,c){if((typeof c!="string"||c==="")&&(c="utf8"),!u.isEncoding(c))throw new TypeError("Unknown encoding: "+c);var h=A(v,c)|0,M=f(h),R=M.write(v,c);return R!==h&&(M=M.slice(0,R)),M}function N(v){for(var c=v.length<0?0:T(v.length)|0,h=f(c),M=0;M<c;M+=1)h[M]=v[M]&255;return h}function U(v){if(ce(v,Uint8Array)){var c=new Uint8Array(v);return K(c.buffer,c.byteOffset,c.byteLength)}return N(v)}function K(v,c,h){if(c<0||v.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');var M;return c===void 0&&h===void 0?M=new Uint8Array(v):h===void 0?M=new Uint8Array(v,c):M=new Uint8Array(v,c,h),Object.setPrototypeOf(M,u.prototype),M}function C(v){if(u.isBuffer(v)){var c=T(v.length)|0,h=f(c);return h.length===0||v.copy(h,0,0,c),h}if(v.length!==void 0)return typeof v.length!="number"||Q(v.length)?f(0):N(v);if(v.type==="Buffer"&&Array.isArray(v.data))return N(v.data)}function T(v){if(v>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return v|0}function I(v){return+v!=v&&(v=0),u.alloc(+v)}u.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==u.prototype},u.compare=function(c,h){if(ce(c,Uint8Array)&&(c=u.from(c,c.offset,c.byteLength)),ce(h,Uint8Array)&&(h=u.from(h,h.offset,h.byteLength)),!u.isBuffer(c)||!u.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===h)return 0;for(var M=c.length,R=h.length,H=0,z=Math.min(M,R);H<z;++H)if(c[H]!==h[H]){M=c[H],R=h[H];break}return M<R?-1:R<M?1:0},u.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(c,h){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return u.alloc(0);var M;if(h===void 0)for(h=0,M=0;M<c.length;++M)h+=c[M].length;var R=u.allocUnsafe(h),H=0;for(M=0;M<c.length;++M){var z=c[M];if(ce(z,Uint8Array))H+z.length>R.length?u.from(z).copy(R,H):Uint8Array.prototype.set.call(R,z,H);else if(u.isBuffer(z))z.copy(R,H);else throw new TypeError('"list" argument must be an Array of Buffers');H+=z.length}return R};function A(v,c){if(u.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||ce(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);var h=v.length,M=arguments.length>2&&arguments[2]===!0;if(!M&&h===0)return 0;for(var R=!1;;)switch(c){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return q(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return V(v).length;default:if(R)return M?-1:q(v).length;c=(""+c).toLowerCase(),R=!0}}u.byteLength=A;function F(v,c,h){var M=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,c>>>=0,h<=c))return"";for(v||(v="utf8");;)switch(v){case"hex":return s(this,c,h);case"utf8":case"utf-8":return m(this,c,h);case"ascii":return O(this,c,h);case"latin1":case"binary":return b(this,c,h);case"base64":return p(this,c,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,c,h);default:if(M)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),M=!0}}u.prototype._isBuffer=!0;function j(v,c,h){var M=v[c];v[c]=v[h],v[h]=M}u.prototype.swap16=function(){var c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<c;h+=2)j(this,h,h+1);return this},u.prototype.swap32=function(){var c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=0;h<c;h+=4)j(this,h,h+3),j(this,h+1,h+2);return this},u.prototype.swap64=function(){var c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<c;h+=8)j(this,h,h+7),j(this,h+1,h+6),j(this,h+2,h+5),j(this,h+3,h+4);return this},u.prototype.toString=function(){var c=this.length;return c===0?"":arguments.length===0?m(this,0,c):F.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(c){if(!u.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:u.compare(this,c)===0},u.prototype.inspect=function(){var c="",h=t.INSPECT_MAX_BYTES;return c=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(c+=" ... "),"<Buffer "+c+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(c,h,M,R,H){if(ce(c,Uint8Array)&&(c=u.from(c,c.offset,c.byteLength)),!u.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(h===void 0&&(h=0),M===void 0&&(M=c?c.length:0),R===void 0&&(R=0),H===void 0&&(H=this.length),h<0||M>c.length||R<0||H>this.length)throw new RangeError("out of range index");if(R>=H&&h>=M)return 0;if(R>=H)return-1;if(h>=M)return 1;if(h>>>=0,M>>>=0,R>>>=0,H>>>=0,this===c)return 0;for(var z=H-R,re=M-h,oe=Math.min(z,re),fe=this.slice(R,H),he=c.slice(h,M),ae=0;ae<oe;++ae)if(fe[ae]!==he[ae]){z=fe[ae],re=he[ae];break}return z<re?-1:re<z?1:0};function G(v,c,h,M,R){if(v.length===0)return-1;if(typeof h=="string"?(M=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,Q(h)&&(h=R?0:v.length-1),h<0&&(h=v.length+h),h>=v.length){if(R)return-1;h=v.length-1}else if(h<0)if(R)h=0;else return-1;if(typeof c=="string"&&(c=u.from(c,M)),u.isBuffer(c))return c.length===0?-1:ne(v,c,h,M,R);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?R?Uint8Array.prototype.indexOf.call(v,c,h):Uint8Array.prototype.lastIndexOf.call(v,c,h):ne(v,[c],h,M,R);throw new TypeError("val must be string, number or Buffer")}function ne(v,c,h,M,R){var H=1,z=v.length,re=c.length;if(M!==void 0&&(M=String(M).toLowerCase(),M==="ucs2"||M==="ucs-2"||M==="utf16le"||M==="utf-16le")){if(v.length<2||c.length<2)return-1;H=2,z/=2,re/=2,h/=2}function oe(de,pe){return H===1?de[pe]:de.readUInt16BE(pe*H)}var fe;if(R){var he=-1;for(fe=h;fe<z;fe++)if(oe(v,fe)===oe(c,he===-1?0:fe-he)){if(he===-1&&(he=fe),fe-he+1===re)return he*H}else he!==-1&&(fe-=fe-he),he=-1}else for(h+re>z&&(h=z-re),fe=h;fe>=0;fe--){for(var ae=!0,He=0;He<re;He++)if(oe(v,fe+He)!==oe(c,He)){ae=!1;break}if(ae)return fe}return-1}u.prototype.includes=function(c,h,M){return this.indexOf(c,h,M)!==-1},u.prototype.indexOf=function(c,h,M){return G(this,c,h,M,!0)},u.prototype.lastIndexOf=function(c,h,M){return G(this,c,h,M,!1)};function ee(v,c,h,M){h=Number(h)||0;var R=v.length-h;M?(M=Number(M),M>R&&(M=R)):M=R;var H=c.length;M>H/2&&(M=H/2);for(var z=0;z<M;++z){var re=parseInt(c.substr(z*2,2),16);if(Q(re))return z;v[h+z]=re}return z}function ue(v,c,h,M){return J(q(c,v.length-h),v,h,M)}function E(v,c,h,M){return J(W(c),v,h,M)}function a(v,c,h,M){return J(V(c),v,h,M)}function l(v,c,h,M){return J(te(c,v.length-h),v,h,M)}u.prototype.write=function(c,h,M,R){if(h===void 0)R="utf8",M=this.length,h=0;else if(M===void 0&&typeof h=="string")R=h,M=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(M)?(M=M>>>0,R===void 0&&(R="utf8")):(R=M,M=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var H=this.length-h;if((M===void 0||M>H)&&(M=H),c.length>0&&(M<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");R||(R="utf8");for(var z=!1;;)switch(R){case"hex":return ee(this,c,h,M);case"utf8":case"utf-8":return ue(this,c,h,M);case"ascii":case"latin1":case"binary":return E(this,c,h,M);case"base64":return a(this,c,h,M);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l(this,c,h,M);default:if(z)throw new TypeError("Unknown encoding: "+R);R=(""+R).toLowerCase(),z=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function p(v,c,h){return c===0&&h===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(c,h))}function m(v,c,h){h=Math.min(v.length,h);for(var M=[],R=c;R<h;){var H=v[R],z=null,re=H>239?4:H>223?3:H>191?2:1;if(R+re<=h){var oe,fe,he,ae;switch(re){case 1:H<128&&(z=H);break;case 2:oe=v[R+1],(oe&192)===128&&(ae=(H&31)<<6|oe&63,ae>127&&(z=ae));break;case 3:oe=v[R+1],fe=v[R+2],(oe&192)===128&&(fe&192)===128&&(ae=(H&15)<<12|(oe&63)<<6|fe&63,ae>2047&&(ae<55296||ae>57343)&&(z=ae));break;case 4:oe=v[R+1],fe=v[R+2],he=v[R+3],(oe&192)===128&&(fe&192)===128&&(he&192)===128&&(ae=(H&15)<<18|(oe&63)<<12|(fe&63)<<6|he&63,ae>65535&&ae<1114112&&(z=ae))}}z===null?(z=65533,re=1):z>65535&&(z-=65536,M.push(z>>>10&1023|55296),z=56320|z&1023),M.push(z),R+=re}return S(M)}var x=4096;function S(v){var c=v.length;if(c<=x)return String.fromCharCode.apply(String,v);for(var h="",M=0;M<c;)h+=String.fromCharCode.apply(String,v.slice(M,M+=x));return h}function O(v,c,h){var M="";h=Math.min(v.length,h);for(var R=c;R<h;++R)M+=String.fromCharCode(v[R]&127);return M}function b(v,c,h){var M="";h=Math.min(v.length,h);for(var R=c;R<h;++R)M+=String.fromCharCode(v[R]);return M}function s(v,c,h){var M=v.length;(!c||c<0)&&(c=0),(!h||h<0||h>M)&&(h=M);for(var R="",H=c;H<h;++H)R+=ie[v[H]];return R}function _(v,c,h){for(var M=v.slice(c,h),R="",H=0;H<M.length-1;H+=2)R+=String.fromCharCode(M[H]+M[H+1]*256);return R}u.prototype.slice=function(c,h){var M=this.length;c=~~c,h=h===void 0?M:~~h,c<0?(c+=M,c<0&&(c=0)):c>M&&(c=M),h<0?(h+=M,h<0&&(h=0)):h>M&&(h=M),h<c&&(h=c);var R=this.subarray(c,h);return Object.setPrototypeOf(R,u.prototype),R};function D(v,c,h){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+c>h)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(c,h,M){c=c>>>0,h=h>>>0,M||D(c,h,this.length);for(var R=this[c],H=1,z=0;++z<h&&(H*=256);)R+=this[c+z]*H;return R},u.prototype.readUintBE=u.prototype.readUIntBE=function(c,h,M){c=c>>>0,h=h>>>0,M||D(c,h,this.length);for(var R=this[c+--h],H=1;h>0&&(H*=256);)R+=this[c+--h]*H;return R},u.prototype.readUint8=u.prototype.readUInt8=function(c,h){return c=c>>>0,h||D(c,1,this.length),this[c]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(c,h){return c=c>>>0,h||D(c,2,this.length),this[c]|this[c+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(c,h){return c=c>>>0,h||D(c,2,this.length),this[c]<<8|this[c+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(c,h){return c=c>>>0,h||D(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(c,h){return c=c>>>0,h||D(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},u.prototype.readIntLE=function(c,h,M){c=c>>>0,h=h>>>0,M||D(c,h,this.length);for(var R=this[c],H=1,z=0;++z<h&&(H*=256);)R+=this[c+z]*H;return H*=128,R>=H&&(R-=Math.pow(2,8*h)),R},u.prototype.readIntBE=function(c,h,M){c=c>>>0,h=h>>>0,M||D(c,h,this.length);for(var R=h,H=1,z=this[c+--R];R>0&&(H*=256);)z+=this[c+--R]*H;return H*=128,z>=H&&(z-=Math.pow(2,8*h)),z},u.prototype.readInt8=function(c,h){return c=c>>>0,h||D(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},u.prototype.readInt16LE=function(c,h){c=c>>>0,h||D(c,2,this.length);var M=this[c]|this[c+1]<<8;return M&32768?M|4294901760:M},u.prototype.readInt16BE=function(c,h){c=c>>>0,h||D(c,2,this.length);var M=this[c+1]|this[c]<<8;return M&32768?M|4294901760:M},u.prototype.readInt32LE=function(c,h){return c=c>>>0,h||D(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},u.prototype.readInt32BE=function(c,h){return c=c>>>0,h||D(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},u.prototype.readFloatLE=function(c,h){return c=c>>>0,h||D(c,4,this.length),r.read(this,c,!0,23,4)},u.prototype.readFloatBE=function(c,h){return c=c>>>0,h||D(c,4,this.length),r.read(this,c,!1,23,4)},u.prototype.readDoubleLE=function(c,h){return c=c>>>0,h||D(c,8,this.length),r.read(this,c,!0,52,8)},u.prototype.readDoubleBE=function(c,h){return c=c>>>0,h||D(c,8,this.length),r.read(this,c,!1,52,8)};function P(v,c,h,M,R,H){if(!u.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>R||c<H)throw new RangeError('"value" argument is out of bounds');if(h+M>v.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(c,h,M,R){if(c=+c,h=h>>>0,M=M>>>0,!R){var H=Math.pow(2,8*M)-1;P(this,c,h,M,H,0)}var z=1,re=0;for(this[h]=c&255;++re<M&&(z*=256);)this[h+re]=c/z&255;return h+M},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(c,h,M,R){if(c=+c,h=h>>>0,M=M>>>0,!R){var H=Math.pow(2,8*M)-1;P(this,c,h,M,H,0)}var z=M-1,re=1;for(this[h+z]=c&255;--z>=0&&(re*=256);)this[h+z]=c/re&255;return h+M},u.prototype.writeUint8=u.prototype.writeUInt8=function(c,h,M){return c=+c,h=h>>>0,M||P(this,c,h,1,255,0),this[h]=c&255,h+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(c,h,M){return c=+c,h=h>>>0,M||P(this,c,h,2,65535,0),this[h]=c&255,this[h+1]=c>>>8,h+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(c,h,M){return c=+c,h=h>>>0,M||P(this,c,h,2,65535,0),this[h]=c>>>8,this[h+1]=c&255,h+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(c,h,M){return c=+c,h=h>>>0,M||P(this,c,h,4,4294967295,0),this[h+3]=c>>>24,this[h+2]=c>>>16,this[h+1]=c>>>8,this[h]=c&255,h+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(c,h,M){return c=+c,h=h>>>0,M||P(this,c,h,4,4294967295,0),this[h]=c>>>24,this[h+1]=c>>>16,this[h+2]=c>>>8,this[h+3]=c&255,h+4},u.prototype.writeIntLE=function(c,h,M,R){if(c=+c,h=h>>>0,!R){var H=Math.pow(2,8*M-1);P(this,c,h,M,H-1,-H)}var z=0,re=1,oe=0;for(this[h]=c&255;++z<M&&(re*=256);)c<0&&oe===0&&this[h+z-1]!==0&&(oe=1),this[h+z]=(c/re>>0)-oe&255;return h+M},u.prototype.writeIntBE=function(c,h,M,R){if(c=+c,h=h>>>0,!R){var H=Math.pow(2,8*M-1);P(this,c,h,M,H-1,-H)}var z=M-1,re=1,oe=0;for(this[h+z]=c&255;--z>=0&&(re*=256);)c<0&&oe===0&&this[h+z+1]!==0&&(oe=1),this[h+z]=(c/re>>0)-oe&255;return h+M},u.prototype.writeInt8=function(c,h,M){return c=+c,h=h>>>0,M||P(this,c,h,1,127,-128),c<0&&(c=255+c+1),this[h]=c&255,h+1},u.prototype.writeInt16LE=function(c,h,M){return c=+c,h=h>>>0,M||P(this,c,h,2,32767,-32768),this[h]=c&255,this[h+1]=c>>>8,h+2},u.prototype.writeInt16BE=function(c,h,M){return c=+c,h=h>>>0,M||P(this,c,h,2,32767,-32768),this[h]=c>>>8,this[h+1]=c&255,h+2},u.prototype.writeInt32LE=function(c,h,M){return c=+c,h=h>>>0,M||P(this,c,h,4,2147483647,-2147483648),this[h]=c&255,this[h+1]=c>>>8,this[h+2]=c>>>16,this[h+3]=c>>>24,h+4},u.prototype.writeInt32BE=function(c,h,M){return c=+c,h=h>>>0,M||P(this,c,h,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[h]=c>>>24,this[h+1]=c>>>16,this[h+2]=c>>>8,this[h+3]=c&255,h+4};function Y(v,c,h,M,R,H){if(h+M>v.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function X(v,c,h,M,R){return c=+c,h=h>>>0,R||Y(v,c,h,4),r.write(v,c,h,M,23,4),h+4}u.prototype.writeFloatLE=function(c,h,M){return X(this,c,h,!0,M)},u.prototype.writeFloatBE=function(c,h,M){return X(this,c,h,!1,M)};function d(v,c,h,M,R){return c=+c,h=h>>>0,R||Y(v,c,h,8),r.write(v,c,h,M,52,8),h+8}u.prototype.writeDoubleLE=function(c,h,M){return d(this,c,h,!0,M)},u.prototype.writeDoubleBE=function(c,h,M){return d(this,c,h,!1,M)},u.prototype.copy=function(c,h,M,R){if(!u.isBuffer(c))throw new TypeError("argument should be a Buffer");if(M||(M=0),!R&&R!==0&&(R=this.length),h>=c.length&&(h=c.length),h||(h=0),R>0&&R<M&&(R=M),R===M||c.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(M<0||M>=this.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("sourceEnd out of bounds");R>this.length&&(R=this.length),c.length-h<R-M&&(R=c.length-h+M);var H=R-M;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,M,R):Uint8Array.prototype.set.call(c,this.subarray(M,R),h),H},u.prototype.fill=function(c,h,M,R){if(typeof c=="string"){if(typeof h=="string"?(R=h,h=0,M=this.length):typeof M=="string"&&(R=M,M=this.length),R!==void 0&&typeof R!="string")throw new TypeError("encoding must be a string");if(typeof R=="string"&&!u.isEncoding(R))throw new TypeError("Unknown encoding: "+R);if(c.length===1){var H=c.charCodeAt(0);(R==="utf8"&&H<128||R==="latin1")&&(c=H)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(h<0||this.length<h||this.length<M)throw new RangeError("Out of range index");if(M<=h)return this;h=h>>>0,M=M===void 0?this.length:M>>>0,c||(c=0);var z;if(typeof c=="number")for(z=h;z<M;++z)this[z]=c;else{var re=u.isBuffer(c)?c:u.from(c,R),oe=re.length;if(oe===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(z=0;z<M-h;++z)this[z+h]=re[z%oe]}return this};var L=/[^+/0-9A-Za-z-_]/g;function $(v){if(v=v.split("=")[0],v=v.trim().replace(L,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function q(v,c){c=c||1/0;for(var h,M=v.length,R=null,H=[],z=0;z<M;++z){if(h=v.charCodeAt(z),h>55295&&h<57344){if(!R){if(h>56319){(c-=3)>-1&&H.push(239,191,189);continue}else if(z+1===M){(c-=3)>-1&&H.push(239,191,189);continue}R=h;continue}if(h<56320){(c-=3)>-1&&H.push(239,191,189),R=h;continue}h=(R-55296<<10|h-56320)+65536}else R&&(c-=3)>-1&&H.push(239,191,189);if(R=null,h<128){if((c-=1)<0)break;H.push(h)}else if(h<2048){if((c-=2)<0)break;H.push(h>>6|192,h&63|128)}else if(h<65536){if((c-=3)<0)break;H.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((c-=4)<0)break;H.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return H}function W(v){for(var c=[],h=0;h<v.length;++h)c.push(v.charCodeAt(h)&255);return c}function te(v,c){for(var h,M,R,H=[],z=0;z<v.length&&!((c-=2)<0);++z)h=v.charCodeAt(z),M=h>>8,R=h%256,H.push(R),H.push(M);return H}function V(v){return e.toByteArray($(v))}function J(v,c,h,M){for(var R=0;R<M&&!(R+h>=c.length||R>=v.length);++R)c[R+h]=v[R];return R}function ce(v,c){return v instanceof c||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===c.name}function Q(v){return v!==v}var ie=function(){for(var v="0123456789abcdef",c=new Array(256),h=0;h<16;++h)for(var M=h*16,R=0;R<16;++R)c[M+R]=v[h]+v[R];return c}()})(bo);var Mo=ut,Eo=wo,ah=bo.Buffer;function yn(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}yn.prototype.initialize=function(e){this.degree=e,this.genPoly=Eo.generateECPolynomial(this.degree)},yn.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var r=Mo.alloc(this.degree),n=ah.concat([e,r],e.length+this.degree),o=Eo.mod(n,this.genPoly),i=this.degree-o.length;if(i>0){var f=Mo.alloc(this.degree);return o.copy(f,i),f}return o};var sh=yn,Co={},lt={},bn={};bn.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Ke={},So="[0-9]+",ch="[A-Z $%*+\\-./:]+",Yt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Yt=Yt.replace(/u/g,"\\u");var uh="(?:(?![A-Z0-9 $%*+\\-./:]|"+Yt+`)(?:.|[\r
]))+`;Ke.KANJI=new RegExp(Yt,"g"),Ke.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ke.BYTE=new RegExp(uh,"g"),Ke.NUMERIC=new RegExp(So,"g"),Ke.ALPHANUMERIC=new RegExp(ch,"g");var hh=new RegExp("^"+Yt+"$"),lh=new RegExp("^"+So+"$"),fh=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ke.testKanji=function(e){return hh.test(e)},Ke.testNumeric=function(e){return lh.test(e)},Ke.testAlphanumeric=function(e){return fh.test(e)},function(t){var e=bn,r=Ke;t.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,f){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?i.ccBits[0]:f<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return r.testNumeric(i)?t.NUMERIC:r.testAlphanumeric(i)?t.ALPHANUMERIC:r.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function n(o){if(typeof o!="string")throw new Error("Param is not a string");var i=o.toLowerCase();switch(i){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+o)}}t.from=function(i,f){if(t.isValid(i))return i;try{return n(i)}catch{return f}}}(lt),function(t){var e=De,r=mr,n=_r,o=lt,i=bn,f=pn,u=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,g=e.getBCHDigit(u);function y(N,U,K){for(var C=1;C<=40;C++)if(U<=t.getCapacity(C,K,N))return C}function w(N,U){return o.getCharCountIndicator(N,U)+4}function k(N,U){var K=0;return N.forEach(function(C){var T=w(C.mode,U);K+=T+C.getBitsLength()}),K}function B(N,U){for(var K=1;K<=40;K++){var C=k(N,K);if(C<=t.getCapacity(K,U,o.MIXED))return K}}t.from=function(U,K){return i.isValid(U)?parseInt(U,10):K},t.getCapacity=function(U,K,C){if(!i.isValid(U))throw new Error("Invalid QR Code version");typeof C>"u"&&(C=o.BYTE);var T=e.getSymbolTotalCodewords(U),I=r.getTotalCodewordsCount(U,K),A=(T-I)*8;if(C===o.MIXED)return A;var F=A-w(C,U);switch(C){case o.NUMERIC:return Math.floor(F/10*3);case o.ALPHANUMERIC:return Math.floor(F/11*2);case o.KANJI:return Math.floor(F/13);case o.BYTE:default:return Math.floor(F/8)}},t.getBestVersionForData=function(U,K){var C,T=n.from(K,n.M);if(f(U)){if(U.length>1)return B(U,T);if(U.length===0)return 1;C=U[0]}else C=U;return y(C.mode,C.getLength(),T)},t.getEncodedBits=function(U){if(!i.isValid(U)||U<7)throw new Error("Invalid QR Code version");for(var K=U<<12;e.getBCHDigit(K)-g>=0;)K^=u<<e.getBCHDigit(K)-g;return U<<12|K}}(Co);var Ao={},xn=De,ko=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,dh=1<<14|1<<12|1<<10|1<<4|1<<1,Ro=xn.getBCHDigit(ko);Ao.getEncodedBits=function(e,r){for(var n=e.bit<<3|r,o=n<<10;xn.getBCHDigit(o)-Ro>=0;)o^=ko<<xn.getBCHDigit(o)-Ro;return(n<<10|o)^dh};var Io={},ph=lt;function Nt(t){this.mode=ph.NUMERIC,this.data=t.toString()}Nt.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},Nt.prototype.getLength=function(){return this.data.length},Nt.prototype.getBitsLength=function(){return Nt.getBitsLength(this.data.length)},Nt.prototype.write=function(e){var r,n,o;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),o=parseInt(n,10),e.put(o,10);var i=this.data.length-r;i>0&&(n=this.data.substr(r),o=parseInt(n,10),e.put(o,i*3+1))};var gh=Nt,_h=lt,Mn=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Lt(t){this.mode=_h.ALPHANUMERIC,this.data=t}Lt.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},Lt.prototype.getLength=function(){return this.data.length},Lt.prototype.getBitsLength=function(){return Lt.getBitsLength(this.data.length)},Lt.prototype.write=function(e){var r;for(r=0;r+2<=this.data.length;r+=2){var n=Mn.indexOf(this.data[r])*45;n+=Mn.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(Mn.indexOf(this.data[r]),6)};var mh=Lt,vh=ut,wh=lt;function Ut(t){this.mode=wh.BYTE,this.data=vh.from(t)}Ut.getBitsLength=function(e){return e*8},Ut.prototype.getLength=function(){return this.data.length},Ut.prototype.getBitsLength=function(){return Ut.getBitsLength(this.data.length)},Ut.prototype.write=function(t){for(var e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var yh=Ut,bh=lt,xh=De;function Ft(t){this.mode=bh.KANJI,this.data=t}Ft.getBitsLength=function(e){return e*13},Ft.prototype.getLength=function(){return this.data.length},Ft.prototype.getBitsLength=function(){return Ft.getBitsLength(this.data.length)},Ft.prototype.write=function(t){var e;for(e=0;e<this.data.length;e++){var r=xh.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var Mh=Ft,To={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,o){var i={},f={};f[n]=0;var u=e.PriorityQueue.make();u.push(n,0);for(var g,y,w,k,B,N,U,K,C;!u.empty();){g=u.pop(),y=g.value,k=g.cost,B=r[y]||{};for(w in B)B.hasOwnProperty(w)&&(N=B[w],U=k+N,K=f[w],C=typeof f[w]>"u",(C||K>U)&&(f[w]=U,u.push(w,U),i[w]=y))}if(typeof o<"u"&&typeof f[o]>"u"){var T=["Could not find a path from ",n," to ",o,"."].join("");throw new Error(T)}return i},extract_shortest_path_from_predecessor_list:function(r,n){for(var o=[],i=n;i;)o.push(i),r[i],i=r[i];return o.reverse(),o},find_path:function(r,n,o){var i=e.single_source_shortest_paths(r,n,o);return e.extract_shortest_path_from_predecessor_list(i,o)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,o={},i;r=r||{};for(i in n)n.hasOwnProperty(i)&&(o[i]=n[i]);return o.queue=[],o.sorter=r.sorter||n.default_sorter,o},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var o={value:r,cost:n};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(To),function(t){var e=lt,r=gh,n=mh,o=yh,i=Mh,f=Ke,u=De,g=To.exports;function y(T){return unescape(encodeURIComponent(T)).length}function w(T,I,A){for(var F=[],j;(j=T.exec(A))!==null;)F.push({data:j[0],index:j.index,mode:I,length:j[0].length});return F}function k(T){var I=w(f.NUMERIC,e.NUMERIC,T),A=w(f.ALPHANUMERIC,e.ALPHANUMERIC,T),F,j;u.isKanjiModeEnabled()?(F=w(f.BYTE,e.BYTE,T),j=w(f.KANJI,e.KANJI,T)):(F=w(f.BYTE_KANJI,e.BYTE,T),j=[]);var G=I.concat(A,F,j);return G.sort(function(ne,ee){return ne.index-ee.index}).map(function(ne){return{data:ne.data,mode:ne.mode,length:ne.length}})}function B(T,I){switch(I){case e.NUMERIC:return r.getBitsLength(T);case e.ALPHANUMERIC:return n.getBitsLength(T);case e.KANJI:return i.getBitsLength(T);case e.BYTE:return o.getBitsLength(T)}}function N(T){return T.reduce(function(I,A){var F=I.length-1>=0?I[I.length-1]:null;return F&&F.mode===A.mode?(I[I.length-1].data+=A.data,I):(I.push(A),I)},[])}function U(T){for(var I=[],A=0;A<T.length;A++){var F=T[A];switch(F.mode){case e.NUMERIC:I.push([F,{data:F.data,mode:e.ALPHANUMERIC,length:F.length},{data:F.data,mode:e.BYTE,length:F.length}]);break;case e.ALPHANUMERIC:I.push([F,{data:F.data,mode:e.BYTE,length:F.length}]);break;case e.KANJI:I.push([F,{data:F.data,mode:e.BYTE,length:y(F.data)}]);break;case e.BYTE:I.push([{data:F.data,mode:e.BYTE,length:y(F.data)}])}}return I}function K(T,I){for(var A={},F={start:{}},j=["start"],G=0;G<T.length;G++){for(var ne=T[G],ee=[],ue=0;ue<ne.length;ue++){var E=ne[ue],a=""+G+ue;ee.push(a),A[a]={node:E,lastCount:0},F[a]={};for(var l=0;l<j.length;l++){var p=j[l];A[p]&&A[p].node.mode===E.mode?(F[p][a]=B(A[p].lastCount+E.length,E.mode)-B(A[p].lastCount,E.mode),A[p].lastCount+=E.length):(A[p]&&(A[p].lastCount=E.length),F[p][a]=B(E.length,E.mode)+4+e.getCharCountIndicator(E.mode,I))}}j=ee}for(l=0;l<j.length;l++)F[j[l]].end=0;return{map:F,table:A}}function C(T,I){var A,F=e.getBestModeForData(T);if(A=e.from(I,F),A!==e.BYTE&&A.bit<F.bit)throw new Error('"'+T+'" cannot be encoded with mode '+e.toString(A)+`.
 Suggested mode is: `+e.toString(F));switch(A===e.KANJI&&!u.isKanjiModeEnabled()&&(A=e.BYTE),A){case e.NUMERIC:return new r(T);case e.ALPHANUMERIC:return new n(T);case e.KANJI:return new i(T);case e.BYTE:return new o(T)}}t.fromArray=function(I){return I.reduce(function(A,F){return typeof F=="string"?A.push(C(F,null)):F.data&&A.push(C(F.data,F.mode)),A},[])},t.fromString=function(I,A){for(var F=k(I,u.isKanjiModeEnabled()),j=U(F),G=K(j,A),ne=g.find_path(G.map,"start","end"),ee=[],ue=1;ue<ne.length-1;ue++)ee.push(G.table[ne[ue]].node);return t.fromArray(N(ee))},t.rawSplit=function(I){return t.fromArray(k(I,u.isKanjiModeEnabled()))}}(Io);var Oo=ut,Mr=De,En=_r,Eh=Yu,Ch=Gu,Sh=go,Ah=_o,Cn=vo,Sn=mr,kh=sh,Er=Co,Rh=Ao,Ih=lt,An=Io,Th=pn;function Oh(t,e){for(var r=t.size,n=Ah.getPositions(e),o=0;o<n.length;o++)for(var i=n[o][0],f=n[o][1],u=-1;u<=7;u++)if(!(i+u<=-1||r<=i+u))for(var g=-1;g<=7;g++)f+g<=-1||r<=f+g||(u>=0&&u<=6&&(g===0||g===6)||g>=0&&g<=6&&(u===0||u===6)||u>=2&&u<=4&&g>=2&&g<=4?t.set(i+u,f+g,!0,!0):t.set(i+u,f+g,!1,!0))}function Bh(t){for(var e=t.size,r=8;r<e-8;r++){var n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function Nh(t,e){for(var r=Sh.getPositions(e),n=0;n<r.length;n++)for(var o=r[n][0],i=r[n][1],f=-2;f<=2;f++)for(var u=-2;u<=2;u++)f===-2||f===2||u===-2||u===2||f===0&&u===0?t.set(o+f,i+u,!0,!0):t.set(o+f,i+u,!1,!0)}function Lh(t,e){for(var r=t.size,n=Er.getEncodedBits(e),o,i,f,u=0;u<18;u++)o=Math.floor(u/3),i=u%3+r-8-3,f=(n>>u&1)===1,t.set(o,i,f,!0),t.set(i,o,f,!0)}function kn(t,e,r){var n=t.size,o=Rh.getEncodedBits(e,r),i,f;for(i=0;i<15;i++)f=(o>>i&1)===1,i<6?t.set(i,8,f,!0):i<8?t.set(i+1,8,f,!0):t.set(n-15+i,8,f,!0),i<8?t.set(8,n-i-1,f,!0):i<9?t.set(8,15-i-1+1,f,!0):t.set(8,15-i-1,f,!0);t.set(n-8,8,1,!0)}function Uh(t,e){for(var r=t.size,n=-1,o=r-1,i=7,f=0,u=r-1;u>0;u-=2)for(u===6&&u--;;){for(var g=0;g<2;g++)if(!t.isReserved(o,u-g)){var y=!1;f<e.length&&(y=(e[f]>>>i&1)===1),t.set(o,u-g,y),i--,i===-1&&(f++,i=7)}if(o+=n,o<0||r<=o){o-=n,n=-n;break}}}function Fh(t,e,r){var n=new Eh;r.forEach(function(y){n.put(y.mode.bit,4),n.put(y.getLength(),Ih.getCharCountIndicator(y.mode,t)),y.write(n)});var o=Mr.getSymbolTotalCodewords(t),i=Sn.getTotalCodewordsCount(t,e),f=(o-i)*8;for(n.getLengthInBits()+4<=f&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);for(var u=(f-n.getLengthInBits())/8,g=0;g<u;g++)n.put(g%2?17:236,8);return Ph(n,t,e)}function Ph(t,e,r){for(var n=Mr.getSymbolTotalCodewords(e),o=Sn.getTotalCodewordsCount(e,r),i=n-o,f=Sn.getBlocksCount(e,r),u=n%f,g=f-u,y=Math.floor(n/f),w=Math.floor(i/f),k=w+1,B=y-w,N=new kh(B),U=0,K=new Array(f),C=new Array(f),T=0,I=Oo.from(t.buffer),A=0;A<f;A++){var F=A<g?w:k;K[A]=I.slice(U,U+F),C[A]=N.encode(K[A]),U+=F,T=Math.max(T,F)}var j=Oo.alloc(n),G=0,ne,ee;for(ne=0;ne<T;ne++)for(ee=0;ee<f;ee++)ne<K[ee].length&&(j[G++]=K[ee][ne]);for(ne=0;ne<B;ne++)for(ee=0;ee<f;ee++)j[G++]=C[ee][ne];return j}function qh(t,e,r,n){var o;if(Th(t))o=An.fromArray(t);else if(typeof t=="string"){var i=e;if(!i){var f=An.rawSplit(t);i=Er.getBestVersionForData(f,r)}o=An.fromString(t,i||40)}else throw new Error("Invalid data");var u=Er.getBestVersionForData(o,r);if(!u)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=u;else if(e<u)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+u+`.
`);var g=Fh(e,r,o),y=Mr.getSymbolSize(e),w=new Ch(y);return Oh(w,e),Bh(w),Nh(w,e),kn(w,r,0),e>=7&&Lh(w,e),Uh(w,g),isNaN(n)&&(n=Cn.getBestMask(w,kn.bind(null,w,r))),Cn.applyMask(n,w),kn(w,r,n),{modules:w,version:e,errorCorrectionLevel:r,maskPattern:n,segments:o}}so.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");var n=En.M,o,i;return typeof r<"u"&&(n=En.from(r.errorCorrectionLevel,En.M),o=Er.from(r.version),i=Cn.from(r.maskPattern),r.toSJISFunc&&Mr.setToSJISFunction(r.toSJISFunc)),qh(e,o,n,i)};var Bo={},Rn={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");var n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");var o=parseInt(n.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});var o=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,f=n.scale||4;return{width:i,scale:i?4:f,margin:o,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,o){return o.width&&o.width>=n+o.margin*2?o.width/(n+o.margin*2):o.scale},t.getImageWidth=function(n,o){var i=t.getScale(n,o);return Math.floor((n+o.margin*2)*i)},t.qrToImageData=function(n,o,i){for(var f=o.modules.size,u=o.modules.data,g=t.getScale(f,i),y=Math.floor((f+i.margin*2)*g),w=i.margin*g,k=[i.color.light,i.color.dark],B=0;B<y;B++)for(var N=0;N<y;N++){var U=(B*y+N)*4,K=i.color.light;if(B>=w&&N>=w&&B<y-w&&N<y-w){var C=Math.floor((B-w)/g),T=Math.floor((N-w)/g);K=k[u[C*f+T]?1:0]}n[U++]=K.r,n[U++]=K.g,n[U++]=K.b,n[U]=K.a}}})(Rn),function(t){var e=Rn;function r(o,i,f){o.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=f,i.width=f,i.style.height=f+"px",i.style.width=f+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,f,u){var g=u,y=f;typeof g>"u"&&(!f||!f.getContext)&&(g=f,f=void 0),f||(y=n()),g=e.getOptions(g);var w=e.getImageWidth(i.modules.size,g),k=y.getContext("2d"),B=k.createImageData(w,w);return e.qrToImageData(B.data,i,g),r(k,y,w),k.putImageData(B,0,0),y},t.renderToDataURL=function(i,f,u){var g=u;typeof g>"u"&&(!f||!f.getContext)&&(g=f,f=void 0),g||(g={});var y=t.render(i,f,g),w=g.type||"image/png",k=g.rendererOpts||{};return y.toDataURL(w,k.quality)}}(Bo);var No={},Dh=Rn;function Lo(t,e){var r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function In(t,e,r){var n=t+e;return typeof r<"u"&&(n+=" "+r),n}function Hh(t,e,r){for(var n="",o=0,i=!1,f=0,u=0;u<t.length;u++){var g=Math.floor(u%e),y=Math.floor(u/e);!g&&!i&&(i=!0),t[u]?(f++,u>0&&g>0&&t[u-1]||(n+=i?In("M",g+r,.5+y+r):In("m",o,0),o=0,i=!1),g+1<e&&t[u+1]||(n+=In("h",f),f=0)):o++}return n}No.render=function(e,r,n){var o=Dh.getOptions(r),i=e.modules.size,f=e.modules.data,u=i+o.margin*2,g=o.color.light.a?"<path "+Lo(o.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",y="<path "+Lo(o.color.dark,"stroke")+' d="'+Hh(f,i,o.margin)+'"/>',w='viewBox="0 0 '+u+" "+u+'"',k=o.width?'width="'+o.width+'" height="'+o.width+'" ':"",B='<svg xmlns="http://www.w3.org/2000/svg" '+k+w+' shape-rendering="crispEdges">'+g+y+`</svg>
`;return typeof n=="function"&&n(null,B),B};var $h=Fu,Tn=so,Uo=Bo,Wh=No;function On(t,e,r,n,o){var i=[].slice.call(arguments,1),f=i.length,u=typeof i[f-1]=="function";if(!u&&!$h())throw new Error("Callback required as last argument");if(u){if(f<2)throw new Error("Too few arguments provided");f===2?(o=r,r=e,e=n=void 0):f===3&&(e.getContext&&typeof o>"u"?(o=n,n=void 0):(o=n,n=r,r=e,e=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(r=e,e=n=void 0):f===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(y,w){try{var k=Tn.create(r,n);y(t(k,e,n))}catch(B){w(B)}})}try{var g=Tn.create(r,n);o(null,t(g,e,n))}catch(y){o(y)}}Kt.create=Tn.create,Kt.toCanvas=On.bind(null,Uo.render),Kt.toDataURL=On.bind(null,Uo.renderToDataURL),Kt.toString=On.bind(null,function(t,e,r){return Wh.render(t,r)});var jh=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,r=[],n=0;n<t.rangeCount;n++)r.push(t.getRangeAt(n));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||r.forEach(function(o){t.addRange(o)}),e&&e.focus()}},zh=jh,Fo={"text/plain":"Text","text/html":"Url",default:"Text"},Kh="Copy to clipboard: #{key}, Enter";function Jh(t){var e=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}function Vh(t,e){var r,n,o,i,f,u,g=!1;e||(e={}),r=e.debug||!1;try{o=zh(),i=document.createRange(),f=document.getSelection(),u=document.createElement("span"),u.textContent=t,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",function(w){if(w.stopPropagation(),e.format)if(w.preventDefault(),typeof w.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var k=Fo[e.format]||Fo.default;window.clipboardData.setData(k,t)}else w.clipboardData.clearData(),w.clipboardData.setData(e.format,t);e.onCopy&&(w.preventDefault(),e.onCopy(w.clipboardData))}),document.body.appendChild(u),i.selectNodeContents(u),f.addRange(i);var y=document.execCommand("copy");if(!y)throw new Error("copy command was unsuccessful");g=!0}catch(w){r&&console.error("unable to copy using execCommand: ",w),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),g=!0}catch(k){r&&console.error("unable to copy using clipboardData: ",k),r&&console.error("falling back to prompt"),n=Jh("message"in e?e.message:Kh),window.prompt(n,t)}}finally{f&&(typeof f.removeRange=="function"?f.removeRange(i):f.removeAllRanges()),u&&document.body.removeChild(u),o()}return g}var Yh=Vh,se,Gt,Bn,Po,qo,Nn,Do,Ve={},Cr=[],Gh=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function Ye(t,e){for(var r in e)t[r]=e[r];return t}function Ho(t){var e=t.parentNode;e&&e.removeChild(t)}function Ge(t,e,r){var n,o=arguments,i={};for(n in e)n!=="key"&&n!=="ref"&&(i[n]=e[n]);if(arguments.length>3)for(r=[r],n=3;n<arguments.length;n++)r.push(o[n]);if(r!=null&&(i.children=r),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)i[n]===void 0&&(i[n]=t.defaultProps[n]);return Sr(t,i,e&&e.key,e&&e.ref,null)}function Sr(t,e,r,n,o){var i={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o};return o==null&&(i.__v=i),se.vnode&&se.vnode(i),i}function $o(){return{}}function Qt(t){return t.children}function je(t,e){this.props=t,this.context=e}function Xt(t,e){if(e==null)return t.__?Xt(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?Xt(t):null}function Wo(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Wo(t)}}function Ar(t){(!t.__d&&(t.__d=!0)&&Gt.push(t)&&!Bn++||qo!==se.debounceRendering)&&((qo=se.debounceRendering)||Po)(Qh)}function Qh(){for(var t;Bn=Gt.length;)t=Gt.sort(function(e,r){return e.__v.__b-r.__v.__b}),Gt=[],t.some(function(e){var r,n,o,i,f,u,g;e.__d&&(u=(f=(r=e).__v).__e,(g=r.__P)&&(n=[],(o=Ye({},f)).__v=o,i=Ln(g,f,o,r.__n,g.ownerSVGElement!==void 0,null,n,u??Xt(f)),Jo(n,f),i!=u&&Wo(f)))})}function jo(t,e,r,n,o,i,f,u,g){var y,w,k,B,N,U,K,C=r&&r.__k||Cr,T=C.length;if(u==Ve&&(u=i!=null?i[0]:T?Xt(r,0):null),y=0,e.__k=ft(e.__k,function(I){if(I!=null){if(I.__=e,I.__b=e.__b+1,(k=C[y])===null||k&&I.key==k.key&&I.type===k.type)C[y]=void 0;else for(w=0;w<T;w++){if((k=C[w])&&I.key==k.key&&I.type===k.type){C[w]=void 0;break}k=null}if(B=Ln(t,I,k=k||Ve,n,o,i,f,u,g),(w=I.ref)&&k.ref!=w&&(K||(K=[]),k.ref&&K.push(k.ref,null,I),K.push(w,I.__c||B,I)),B!=null){var A;if(U==null&&(U=B),I.__d!==void 0)A=I.__d,I.__d=void 0;else if(i==k||B!=u||B.parentNode==null){e:if(u==null||u.parentNode!==t)t.appendChild(B),A=null;else{for(N=u,w=0;(N=N.nextSibling)&&w<T;w+=2)if(N==B)break e;t.insertBefore(B,u),A=u}e.type=="option"&&(t.value="")}u=A!==void 0?A:B.nextSibling,typeof e.type=="function"&&(e.__d=u)}else u&&k.__e==u&&u.parentNode!=t&&(u=Xt(k))}return y++,I}),e.__e=U,i!=null&&typeof e.type!="function")for(y=i.length;y--;)i[y]!=null&&Ho(i[y]);for(y=T;y--;)C[y]!=null&&Zt(C[y],C[y]);if(K)for(y=0;y<K.length;y++)Vo(K[y],K[++y],K[++y])}function ft(t,e,r){if(r==null&&(r=[]),t==null||typeof t=="boolean")e&&r.push(e(null));else if(Array.isArray(t))for(var n=0;n<t.length;n++)ft(t[n],e,r);else r.push(e?e(typeof t=="string"||typeof t=="number"?Sr(null,t,null,null,t):t.__e!=null||t.__c!=null?Sr(t.type,t.props,t.key,null,t.__v):t):t);return r}function Xh(t,e,r,n,o){var i;for(i in r)i==="children"||i==="key"||i in e||kr(t,i,null,r[i],n);for(i in e)o&&typeof e[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||r[i]===e[i]||kr(t,i,e[i],r[i],n)}function zo(t,e,r){e[0]==="-"?t.setProperty(e,r):t[e]=typeof r=="number"&&Gh.test(e)===!1?r+"px":r??""}function kr(t,e,r,n,o){var i,f,u,g,y;if(o?e==="className"&&(e="class"):e==="class"&&(e="className"),e==="style")if(i=t.style,typeof r=="string")i.cssText=r;else{if(typeof n=="string"&&(i.cssText="",n=null),n)for(g in n)r&&g in r||zo(i,g,"");if(r)for(y in r)n&&r[y]===n[y]||zo(i,y,r[y])}else e[0]==="o"&&e[1]==="n"?(f=e!==(e=e.replace(/Capture$/,"")),u=e.toLowerCase(),e=(u in t?u:e).slice(2),r?(n||t.addEventListener(e,Ko,f),(t.l||(t.l={}))[e]=r):t.removeEventListener(e,Ko,f)):e!=="list"&&e!=="tagName"&&e!=="form"&&e!=="type"&&e!=="size"&&!o&&e in t?t[e]=r??"":typeof r!="function"&&e!=="dangerouslySetInnerHTML"&&(e!==(e=e.replace(/^xlink:?/,""))?r==null||r===!1?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):r==null||r===!1&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,r))}function Ko(t){this.l[t.type](se.event?se.event(t):t)}function Ln(t,e,r,n,o,i,f,u,g){var y,w,k,B,N,U,K,C,T,I,A=e.type;if(e.constructor!==void 0)return null;(y=se.__b)&&y(e);try{e:if(typeof A=="function"){if(C=e.props,T=(y=A.contextType)&&n[y.__c],I=y?T?T.props.value:y.__:n,r.__c?K=(w=e.__c=r.__c).__=w.__E:("prototype"in A&&A.prototype.render?e.__c=w=new A(C,I):(e.__c=w=new je(C,I),w.constructor=A,w.render=el),T&&T.sub(w),w.props=C,w.state||(w.state={}),w.context=I,w.__n=n,k=w.__d=!0,w.__h=[]),w.__s==null&&(w.__s=w.state),A.getDerivedStateFromProps!=null&&(w.__s==w.state&&(w.__s=Ye({},w.__s)),Ye(w.__s,A.getDerivedStateFromProps(C,w.__s))),B=w.props,N=w.state,k)A.getDerivedStateFromProps==null&&w.componentWillMount!=null&&w.componentWillMount(),w.componentDidMount!=null&&w.__h.push(w.componentDidMount);else{if(A.getDerivedStateFromProps==null&&C!==B&&w.componentWillReceiveProps!=null&&w.componentWillReceiveProps(C,I),!w.__e&&w.shouldComponentUpdate!=null&&w.shouldComponentUpdate(C,w.__s,I)===!1||e.__v===r.__v&&!w.__){for(w.props=C,w.state=w.__s,e.__v!==r.__v&&(w.__d=!1),w.__v=e,e.__e=r.__e,e.__k=r.__k,w.__h.length&&f.push(w),y=0;y<e.__k.length;y++)e.__k[y]&&(e.__k[y].__=e);break e}w.componentWillUpdate!=null&&w.componentWillUpdate(C,w.__s,I),w.componentDidUpdate!=null&&w.__h.push(function(){w.componentDidUpdate(B,N,U)})}w.context=I,w.props=C,w.state=w.__s,(y=se.__r)&&y(e),w.__d=!1,w.__v=e,w.__P=t,y=w.render(w.props,w.state,w.context),e.__k=y!=null&&y.type==Qt&&y.key==null?y.props.children:Array.isArray(y)?y:[y],w.getChildContext!=null&&(n=Ye(Ye({},n),w.getChildContext())),k||w.getSnapshotBeforeUpdate==null||(U=w.getSnapshotBeforeUpdate(B,N)),jo(t,e,r,n,o,i,f,u,g),w.base=e.__e,w.__h.length&&f.push(w),K&&(w.__E=w.__=null),w.__e=!1}else i==null&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=Zh(r.__e,e,r,n,o,i,f,g);(y=se.diffed)&&y(e)}catch(F){e.__v=null,se.__e(F,e,r)}return e.__e}function Jo(t,e){se.__c&&se.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(n){n.call(r)})}catch(n){se.__e(n,r.__v)}})}function Zh(t,e,r,n,o,i,f,u){var g,y,w,k,B,N=r.props,U=e.props;if(o=e.type==="svg"||o,i!=null){for(g=0;g<i.length;g++)if((y=i[g])!=null&&((e.type===null?y.nodeType===3:y.localName===e.type)||t==y)){t=y,i[g]=null;break}}if(t==null){if(e.type===null)return document.createTextNode(U);t=o?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,U.is&&{is:U.is}),i=null,u=!1}if(e.type===null)N!==U&&t.data!=U&&(t.data=U);else{if(i!=null&&(i=Cr.slice.call(t.childNodes)),w=(N=r.props||Ve).dangerouslySetInnerHTML,k=U.dangerouslySetInnerHTML,!u){if(N===Ve)for(N={},B=0;B<t.attributes.length;B++)N[t.attributes[B].name]=t.attributes[B].value;(k||w)&&(k&&w&&k.__html==w.__html||(t.innerHTML=k&&k.__html||""))}Xh(t,U,N,o,u),k?e.__k=[]:(e.__k=e.props.children,jo(t,e,r,n,e.type!=="foreignObject"&&o,i,f,Ve,u)),u||("value"in U&&(g=U.value)!==void 0&&g!==t.value&&kr(t,"value",g,N.value,!1),"checked"in U&&(g=U.checked)!==void 0&&g!==t.checked&&kr(t,"checked",g,N.checked,!1))}return t}function Vo(t,e,r){try{typeof t=="function"?t(e):t.current=e}catch(n){se.__e(n,r)}}function Zt(t,e,r){var n,o,i;if(se.unmount&&se.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||Vo(n,null,e)),r||typeof t.type=="function"||(r=(o=t.__e)!=null),t.__e=t.__d=void 0,(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(f){se.__e(f,e)}n.base=n.__P=null}if(n=t.__k)for(i=0;i<n.length;i++)n[i]&&Zt(n[i],e,r);o!=null&&Ho(o)}function el(t,e,r){return this.constructor(t,r)}function er(t,e,r){var n,o,i;se.__&&se.__(t,e),o=(n=r===Nn)?null:r&&r.__k||e.__k,t=Ge(Qt,null,[t]),i=[],Ln(e,(n?e:r||e).__k=t,o||Ve,Ve,e.ownerSVGElement!==void 0,r&&!n?[r]:o?null:Cr.slice.call(e.childNodes),i,r||Ve,n),Jo(i,t)}function Yo(t,e){er(t,e,Nn)}function tl(t,e){var r,n;for(n in e=Ye(Ye({},t.props),e),arguments.length>2&&(e.children=Cr.slice.call(arguments,2)),r={},e)n!=="key"&&n!=="ref"&&(r[n]=e[n]);return Sr(t.type,r,e.key||t.key,e.ref||t.ref,null)}function Go(t){var e={},r={__c:"__cC"+Do++,__:t,Consumer:function(n,o){return n.children(o)},Provider:function(n){var o,i=this;return this.getChildContext||(o=[],this.getChildContext=function(){return e[r.__c]=i,e},this.shouldComponentUpdate=function(f){i.props.value!==f.value&&o.some(function(u){u.context=f.value,Ar(u)})},this.sub=function(f){o.push(f);var u=f.componentWillUnmount;f.componentWillUnmount=function(){o.splice(o.indexOf(f),1),u&&u.call(f)}}),n.children}};return r.Consumer.contextType=r,r.Provider.__=r,r}se={__e:function(t,e){for(var r,n;e=e.__;)if((r=e.__c)&&!r.__)try{if(r.constructor&&r.constructor.getDerivedStateFromError!=null&&(n=!0,r.setState(r.constructor.getDerivedStateFromError(t))),r.componentDidCatch!=null&&(n=!0,r.componentDidCatch(t)),n)return Ar(r.__E=r)}catch(o){t=o}throw t}},je.prototype.setState=function(t,e){var r;r=this.__s!==this.state?this.__s:this.__s=Ye({},this.state),typeof t=="function"&&(t=t(r,this.props)),t&&Ye(r,t),t!=null&&this.__v&&(e&&this.__h.push(e),Ar(this))},je.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ar(this))},je.prototype.render=Qt,Gt=[],Bn=0,Po=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Nn=Ve,Do=0;var Ct,qe,Qo,Pt=0,Un=[],Xo=se.__r,Zo=se.diffed,ea=se.__c,ta=se.unmount;function qt(t,e){se.__h&&se.__h(qe,t,Pt||e),Pt=0;var r=qe.__H||(qe.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function Fn(t){return Pt=1,Pn(ca,t)}function Pn(t,e,r){var n=qt(Ct++,2);return n.__c||(n.__c=qe,n.__=[r?r(e):ca(void 0,e),function(o){var i=t(n.__[0],o);n.__[0]!==i&&(n.__[0]=i,n.__c.setState({}))}]),n.__}function ra(t,e){var r=qt(Ct++,3);!se.__s&&$n(r.__H,e)&&(r.__=t,r.__H=e,qe.__H.__h.push(r))}function qn(t,e){var r=qt(Ct++,4);!se.__s&&$n(r.__H,e)&&(r.__=t,r.__H=e,qe.__h.push(r))}function na(t){return Pt=5,Rr(function(){return{current:t}},[])}function ia(t,e,r){Pt=6,qn(function(){typeof t=="function"?t(e()):t&&(t.current=e())},r==null?r:r.concat(t))}function Rr(t,e){var r=qt(Ct++,7);return $n(r.__H,e)?(r.__H=e,r.__h=t,r.__=t()):r.__}function oa(t,e){return Pt=8,Rr(function(){return t},e)}function aa(t){var e=qe.context[t.__c],r=qt(Ct++,9);return r.__c=t,e?(r.__==null&&(r.__=!0,e.sub(qe)),e.props.value):t.__}function sa(t,e){se.useDebugValue&&se.useDebugValue(e?e(t):t)}function rl(t){var e=qt(Ct++,10),r=Fn();return e.__=t,qe.componentDidCatch||(qe.componentDidCatch=function(n){e.__&&e.__(n),r[1](n)}),[r[0],function(){r[1](void 0)}]}function nl(){Un.some(function(t){if(t.__P)try{t.__H.__h.forEach(Dn),t.__H.__h.forEach(Hn),t.__H.__h=[]}catch(e){return t.__H.__h=[],se.__e(e,t.__v),!0}}),Un=[]}function Dn(t){t.t&&t.t()}function Hn(t){var e=t.__();typeof e=="function"&&(t.t=e)}function $n(t,e){return!t||e.some(function(r,n){return r!==t[n]})}function ca(t,e){return typeof e=="function"?e(t):e}se.__r=function(t){Xo&&Xo(t),Ct=0,(qe=t.__c).__H&&(qe.__H.__h.forEach(Dn),qe.__H.__h.forEach(Hn),qe.__H.__h=[])},se.diffed=function(t){Zo&&Zo(t);var e=t.__c;if(e){var r=e.__H;r&&r.__h.length&&(Un.push(e)!==1&&Qo===se.requestAnimationFrame||((Qo=se.requestAnimationFrame)||function(n){var o,i=function(){clearTimeout(f),cancelAnimationFrame(o),setTimeout(n)},f=setTimeout(i,100);typeof window<"u"&&(o=requestAnimationFrame(i))})(nl))}},se.__c=function(t,e){e.some(function(r){try{r.__h.forEach(Dn),r.__h=r.__h.filter(function(n){return!n.__||Hn(n)})}catch(n){e.some(function(o){o.__h&&(o.__h=[])}),e=[],se.__e(n,r.__v)}}),ea&&ea(t,e)},se.unmount=function(t){ta&&ta(t);var e=t.__c;if(e){var r=e.__H;if(r)try{r.__.forEach(function(n){return n.t&&n.t()})}catch(n){se.__e(n,e.__v)}}};function Wn(t,e){for(var r in e)t[r]=e[r];return t}function jn(t,e){for(var r in t)if(r!=="__source"&&!(r in e))return!0;for(var n in e)if(n!=="__source"&&t[n]!==e[n])return!0;return!1}var ua=function(t){var e,r;function n(o){var i;return(i=t.call(this,o)||this).isPureReactComponent=!0,i}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n.prototype.shouldComponentUpdate=function(o,i){return jn(this.props,o)||jn(this.state,i)},n}(je);function ha(t,e){function r(o){var i=this.props.ref,f=i==o.ref;return!f&&i&&(i.call?i(null):i.current=null),e?!e(this.props,o)||!f:jn(this.props,o)}function n(o){return this.shouldComponentUpdate=r,Ge(t,Wn({},o))}return n.prototype.isReactComponent=!0,n.displayName="Memo("+(t.displayName||t.name)+")",n.t=!0,n}var la=se.__b;function fa(t){function e(r){var n=Wn({},r);return delete n.ref,t(n,r.ref)}return e.prototype.isReactComponent=e.t=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}se.__b=function(t){t.type&&t.type.t&&t.ref&&(t.props.ref=t.ref,t.ref=null),la&&la(t)};var da=function(t,e){return t?ft(t).reduce(function(r,n,o){return r.concat(e(n,o))},[]):null},pa={map:da,forEach:da,count:function(t){return t?ft(t).length:0},only:function(t){if((t=ft(t)).length!==1)throw new Error("Children.only() expects only one child.");return t[0]},toArray:ft},il=se.__e;function ga(t){return t&&((t=Wn({},t)).__c=null,t.__k=t.__k&&t.__k.map(ga)),t}function Ir(){this.__u=0,this.o=null,this.__b=null}function _a(t){var e=t.__.__c;return e&&e.u&&e.u(t)}function ma(t){var e,r,n;function o(i){if(e||(e=t()).then(function(f){r=f.default||f},function(f){n=f}),n)throw n;if(!r)throw e;return Ge(r,i)}return o.displayName="Lazy",o.t=!0,o}function Dt(){this.i=null,this.l=null}se.__e=function(t,e,r){if(t.then){for(var n,o=e;o=o.__;)if((n=o.__c)&&n.__c)return n.__c(t,e.__c)}il(t,e,r)},(Ir.prototype=new je).__c=function(t,e){var r=this;r.o==null&&(r.o=[]),r.o.push(e);var n=_a(r.__v),o=!1,i=function(){o||(o=!0,n?n(f):f())};e.__c=e.componentWillUnmount,e.componentWillUnmount=function(){i(),e.__c&&e.__c()};var f=function(){var u;if(!--r.__u)for(r.__v.__k[0]=r.state.u,r.setState({u:r.__b=null});u=r.o.pop();)u.forceUpdate()};r.__u++||r.setState({u:r.__b=r.__v.__k[0]}),t.then(i,i)},Ir.prototype.render=function(t,e){return this.__b&&(this.__v.__k[0]=ga(this.__b),this.__b=null),[Ge(je,null,e.u?null:t.children),e.u&&t.fallback]};var va=function(t,e,r){if(++r[1]===r[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(r=t.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;t.i=r=r[2]}};(Dt.prototype=new je).u=function(t){var e=this,r=_a(e.__v),n=e.l.get(t);return n[0]++,function(o){var i=function(){e.props.revealOrder?(n.push(o),va(e,t,n)):o()};r?r(i):i()}},Dt.prototype.render=function(t){this.i=null,this.l=new Map;var e=ft(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var r=e.length;r--;)this.l.set(e[r],this.i=[1,0,this.i]);return t.children},Dt.prototype.componentDidUpdate=Dt.prototype.componentDidMount=function(){var t=this;t.l.forEach(function(e,r){va(t,r,e)})};var ol=function(){function t(){}var e=t.prototype;return e.getChildContext=function(){return this.props.context},e.render=function(r){return r.children},t}();function al(t){var e=this,r=t.container,n=Ge(ol,{context:e.context},t.vnode);return e.s&&e.s!==r&&(e.v.parentNode&&e.s.removeChild(e.v),Zt(e.h),e.p=!1),t.vnode?e.p?(r.__k=e.__k,er(n,r),e.__k=r.__k):(e.v=document.createTextNode(""),Yo("",r),r.appendChild(e.v),e.p=!0,e.s=r,er(n,r,e.v),e.__k=e.v.__k):e.p&&(e.v.parentNode&&e.s.removeChild(e.v),Zt(e.h)),e.h=n,e.componentWillUnmount=function(){e.v.parentNode&&e.s.removeChild(e.v),Zt(e.h)},null}function wa(t,e){return Ge(al,{vnode:t,container:e})}var ya=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;je.prototype.isReactComponent={};var ba=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103;function zn(t,e,r){if(e.__k==null)for(;e.firstChild;)e.removeChild(e.firstChild);return er(t,e),typeof r=="function"&&r(),t?t.__c:null}function sl(t,e,r){return Yo(t,e),typeof r=="function"&&r(),t?t.__c:null}var xa=se.event;function Kn(t,e){t["UNSAFE_"+e]&&!t[e]&&Object.defineProperty(t,e,{configurable:!1,get:function(){return this["UNSAFE_"+e]},set:function(r){this["UNSAFE_"+e]=r}})}se.event=function(t){xa&&(t=xa(t)),t.persist=function(){};var e=!1,r=!1,n=t.stopPropagation;t.stopPropagation=function(){n.call(t),e=!0};var o=t.preventDefault;return t.preventDefault=function(){o.call(t),r=!0},t.isPropagationStopped=function(){return e},t.isDefaultPrevented=function(){return r},t.nativeEvent=t};var Ma={configurable:!0,get:function(){return this.class}},Ea=se.vnode;se.vnode=function(t){t.$$typeof=ba;var e=t.type,r=t.props;if(e){if(r.class!=r.className&&(Ma.enumerable="className"in r,r.className!=null&&(r.class=r.className),Object.defineProperty(r,"className",Ma)),typeof e!="function"){var n,o,i;for(i in r.defaultValue&&r.value!==void 0&&(r.value||r.value===0||(r.value=r.defaultValue),delete r.defaultValue),Array.isArray(r.value)&&r.multiple&&e==="select"&&(ft(r.children).forEach(function(f){r.value.indexOf(f.props.value)!=-1&&(f.props.selected=!0)}),delete r.value),r)if(n=ya.test(i))break;if(n)for(i in o=t.props={},r)o[ya.test(i)?i.replace(/[A-Z0-9]/,"-$&").toLowerCase():i]=r[i]}(function(f){var u=t.type,g=t.props;if(g&&typeof u=="string"){var y={};for(var w in g)/^on(Ani|Tra|Tou)/.test(w)&&(g[w.toLowerCase()]=g[w],delete g[w]),y[w.toLowerCase()]=w;if(y.ondoubleclick&&(g.ondblclick=g[y.ondoubleclick],delete g[y.ondoubleclick]),y.onbeforeinput&&(g.onbeforeinput=g[y.onbeforeinput],delete g[y.onbeforeinput]),y.onchange&&(u==="textarea"||u.toLowerCase()==="input"&&!/^fil|che|ra/i.test(g.type))){var k=y.oninput||"oninput";g[k]||(g[k]=g[y.onchange],delete g[y.onchange])}}})(),typeof e=="function"&&!e.m&&e.prototype&&(Kn(e.prototype,"componentWillMount"),Kn(e.prototype,"componentWillReceiveProps"),Kn(e.prototype,"componentWillUpdate"),e.m=!0)}Ea&&Ea(t)};var cl="16.8.0";function Ca(t){return Ge.bind(null,t)}function Jn(t){return!!t&&t.$$typeof===ba}function Sa(t){return Jn(t)?tl.apply(null,arguments):t}function Aa(t){return!!t.__k&&(er(null,t),!0)}function ka(t){return t&&(t.base||t.nodeType===1&&t)||null}var Ra=function(t,e){return t(e)},ul={useState:Fn,useReducer:Pn,useEffect:ra,useLayoutEffect:qn,useRef:na,useImperativeHandle:ia,useMemo:Rr,useCallback:oa,useContext:aa,useDebugValue:sa,version:"16.8.0",Children:pa,render:zn,hydrate:zn,unmountComponentAtNode:Aa,createPortal:wa,createElement:Ge,createContext:Go,createFactory:Ca,cloneElement:Sa,createRef:$o,Fragment:Qt,isValidElement:Jn,findDOMNode:ka,Component:je,PureComponent:ua,memo:ha,forwardRef:fa,unstable_batchedUpdates:Ra,Suspense:Ir,SuspenseList:Dt,lazy:ma},hl=Object.freeze({__proto__:null,default:ul,version:cl,Children:pa,render:zn,hydrate:sl,unmountComponentAtNode:Aa,createPortal:wa,createFactory:Ca,cloneElement:Sa,isValidElement:Jn,findDOMNode:ka,PureComponent:ua,memo:ha,forwardRef:fa,unstable_batchedUpdates:Ra,Suspense:Ir,SuspenseList:Dt,lazy:ma,createElement:Ge,createContext:Go,createRef:$o,Fragment:Qt,Component:je,useState:Fn,useReducer:Pn,useEffect:ra,useLayoutEffect:qn,useRef:na,useImperativeHandle:ia,useMemo:Rr,useCallback:oa,useContext:aa,useDebugValue:sa,useErrorBoundary:rl}),ll=Vr(hl);function Ia(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var Fe=Uu,Ta=Ia(Kt),fl=Ia(Yh),Z=ll;function dl(t){Ta.toString(t,{type:"terminal"}).then(console.log)}var pl=`:root {
  --animation-duration: 300ms;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

#walletconnect-wrapper {
  -webkit-user-select: none;
  align-items: center;
  display: flex;
  height: 100%;
  justify-content: center;
  left: 0;
  pointer-events: none;
  position: fixed;
  top: 0;
  user-select: none;
  width: 100%;
  z-index: 99999999999999;
}

.walletconnect-modal__headerLogo {
  height: 21px;
}

.walletconnect-modal__header p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
  align-items: flex-start;
  display: flex;
  flex: 1;
  margin-left: 5px;
}

.walletconnect-modal__close__wrapper {
  position: absolute;
  top: 0px;
  right: 0px;
  z-index: 10000;
  background: white;
  border-radius: 26px;
  padding: 6px;
  box-sizing: border-box;
  width: 26px;
  height: 26px;
  cursor: pointer;
}

.walletconnect-modal__close__icon {
  position: relative;
  top: 7px;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
}

.walletconnect-modal__close__line1 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
}

.walletconnect-modal__close__line2 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
  transform: rotate(90deg);
}

.walletconnect-qrcode__base {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  background: rgba(37, 41, 46, 0.95);
  height: 100%;
  left: 0;
  pointer-events: auto;
  position: fixed;
  top: 0;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  width: 100%;
  will-change: opacity;
  padding: 40px;
  box-sizing: border-box;
}

.walletconnect-qrcode__text {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 10px 0 20px 0;
  text-align: center;
  width: 100%;
}

@media only screen and (max-width: 768px) {
  .walletconnect-qrcode__text {
    font-size: 4vw;
  }
}

@media only screen and (max-width: 320px) {
  .walletconnect-qrcode__text {
    font-size: 14px;
  }
}

.walletconnect-qrcode__image {
  width: calc(100% - 30px);
  box-sizing: border-box;
  cursor: none;
  margin: 0 auto;
}

.walletconnect-qrcode__notification {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  font-size: 16px;
  padding: 16px 20px;
  border-radius: 16px;
  text-align: center;
  transition: all 0.1s ease-in-out;
  background: white;
  color: black;
  margin-bottom: -60px;
  opacity: 0;
}

.walletconnect-qrcode__notification.notification__show {
  opacity: 1;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__header {
    height: 130px;
  }
  .walletconnect-modal__base {
    overflow: auto;
  }
}

@media only screen and (min-device-width: 415px) and (max-width: 768px) {
  #content {
    max-width: 768px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 375px) and (max-width: 415px) {
  #content {
    max-width: 414px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 320px) and (max-width: 375px) {
  #content {
    max-width: 375px;
    box-sizing: border-box;
  }
}

@media only screen and (max-width: 320px) {
  #content {
    max-width: 320px;
    box-sizing: border-box;
  }
}

.walletconnect-modal__base {
  -webkit-font-smoothing: antialiased;
  background: #ffffff;
  border-radius: 24px;
  box-shadow: 0 10px 50px 5px rgba(0, 0, 0, 0.4);
  font-family: ui-rounded, "SF Pro Rounded", "SF Pro Text", medium-content-sans-serif-font,
    -apple-system, BlinkMacSystemFont, ui-sans-serif, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell,
    "Open Sans", "Helvetica Neue", sans-serif;
  margin-top: 41px;
  padding: 24px 24px 22px;
  pointer-events: auto;
  position: relative;
  text-align: center;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  will-change: transform;
  overflow: visible;
  transform: translateY(-50%);
  top: 50%;
  max-width: 500px;
  margin: auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__base {
    padding: 24px 12px;
  }
}

.walletconnect-modal__base .hidden {
  transform: translateY(150%);
  transition: 0.125s cubic-bezier(0.4, 0, 1, 1);
}

.walletconnect-modal__header {
  align-items: center;
  display: flex;
  height: 26px;
  left: 0;
  justify-content: space-between;
  position: absolute;
  top: -42px;
  width: 100%;
}

.walletconnect-modal__base .wc-logo {
  align-items: center;
  display: flex;
  height: 26px;
  margin-top: 15px;
  padding-bottom: 15px;
  pointer-events: auto;
}

.walletconnect-modal__base .wc-logo div {
  background-color: #3399ff;
  height: 21px;
  margin-right: 5px;
  mask-image: url("images/wc-logo.svg") center no-repeat;
  width: 32px;
}

.walletconnect-modal__base .wc-logo p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
}

.walletconnect-modal__base h2 {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 0 0 19px 0;
  text-align: center;
  width: 100%;
}

.walletconnect-modal__base__row {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  align-items: center;
  border-radius: 20px;
  cursor: pointer;
  display: flex;
  height: 56px;
  justify-content: space-between;
  padding: 0 15px;
  position: relative;
  margin: 0px 0px 8px;
  text-align: left;
  transition: 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  will-change: transform;
  text-decoration: none;
}

.walletconnect-modal__base__row:hover {
  background: rgba(60, 66, 82, 0.06);
}

.walletconnect-modal__base__row:active {
  background: rgba(60, 66, 82, 0.06);
  transform: scale(0.975);
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.walletconnect-modal__base__row__h3 {
  color: #25292e;
  font-size: 20px;
  font-weight: 700;
  margin: 0;
  padding-bottom: 3px;
}

.walletconnect-modal__base__row__right {
  align-items: center;
  display: flex;
  justify-content: center;
}

.walletconnect-modal__base__row__right__app-icon {
  border-radius: 8px;
  height: 34px;
  margin: 0 11px 2px 0;
  width: 34px;
  background-size: 100%;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-modal__base__row__right__caret {
  height: 18px;
  opacity: 0.3;
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  width: 8px;
  will-change: opacity;
}

.walletconnect-modal__base__row:hover .caret,
.walletconnect-modal__base__row:active .caret {
  opacity: 0.6;
}

.walletconnect-modal__mobile__toggle {
  width: 80%;
  display: flex;
  margin: 0 auto;
  position: relative;
  overflow: hidden;
  border-radius: 8px;
  margin-bottom: 18px;
  background: #d4d5d9;
}

.walletconnect-modal__single_wallet {
  display: flex;
  justify-content: center;
  margin-top: 7px;
  margin-bottom: 18px;
}

.walletconnect-modal__single_wallet a {
  cursor: pointer;
  color: rgb(64, 153, 255);
  font-size: 21px;
  font-weight: 800;
  text-decoration: none !important;
  margin: 0 auto;
}

.walletconnect-modal__mobile__toggle_selector {
  width: calc(50% - 8px);
  background: white;
  position: absolute;
  border-radius: 5px;
  height: calc(100% - 8px);
  top: 4px;
  transition: all 0.2s ease-in-out;
  transform: translate3d(4px, 0, 0);
}

.walletconnect-modal__mobile__toggle.right__selected .walletconnect-modal__mobile__toggle_selector {
  transform: translate3d(calc(100% + 12px), 0, 0);
}

.walletconnect-modal__mobile__toggle a {
  font-size: 12px;
  width: 50%;
  text-align: center;
  padding: 8px;
  margin: 0;
  font-weight: 600;
  z-index: 1;
}

.walletconnect-modal__footer {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__footer {
    margin-top: 5vw;
  }
}

.walletconnect-modal__footer a {
  cursor: pointer;
  color: #898d97;
  font-size: 15px;
  margin: 0 auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__footer a {
    font-size: 14px;
  }
}

.walletconnect-connect__buttons__wrapper {
  max-height: 44vh;
}

.walletconnect-connect__buttons__wrapper__android {
  margin: 50% 0;
}

.walletconnect-connect__buttons__wrapper__wrap {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  margin: 10px 0;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__buttons__wrapper__wrap {
    margin-top: 40px;
  }
}

.walletconnect-connect__button {
  background-color: rgb(64, 153, 255);
  padding: 12px;
  border-radius: 8px;
  text-decoration: none;
  color: rgb(255, 255, 255);
  font-weight: 500;
}

.walletconnect-connect__button__icon_anchor {
  cursor: pointer;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  margin: 8px;
  width: 42px;
  justify-self: center;
  flex-direction: column;
  text-decoration: none !important;
}

@media only screen and (max-width: 320px) {
  .walletconnect-connect__button__icon_anchor {
    margin: 4px;
  }
}

.walletconnect-connect__button__icon {
  border-radius: 10px;
  height: 42px;
  margin: 0;
  width: 42px;
  background-size: cover !important;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-connect__button__text {
  color: #424952;
  font-size: 2.7vw;
  text-decoration: none !important;
  padding: 0;
  margin-top: 1.8vw;
  font-weight: 600;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__button__text {
    font-size: 16px;
    margin-top: 12px;
  }
}

.walletconnect-search__input {
  border: none;
  background: #d4d5d9;
  border-style: none;
  padding: 8px 16px;
  outline: none;
  font-style: normal;
  font-stretch: normal;
  font-size: 16px;
  font-style: normal;
  font-stretch: normal;
  line-height: normal;
  letter-spacing: normal;
  text-align: left;
  border-radius: 8px;
  width: calc(100% - 16px);
  margin: 0;
  margin-bottom: 8px;
}
`;typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function gl(t,e){try{var r=t()}catch(n){return e(n)}return r&&r.then?r.then(void 0,e):r}var _l="data:image/svg+xml,%3Csvg height='185' viewBox='0 0 300 185' width='300' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m61.4385429 36.2562612c48.9112241-47.8881663 128.2119871-47.8881663 177.1232091 0l5.886545 5.7634174c2.445561 2.3944081 2.445561 6.2765112 0 8.6709204l-20.136695 19.715503c-1.222781 1.1972051-3.2053 1.1972051-4.428081 0l-8.100584-7.9311479c-34.121692-33.4079817-89.443886-33.4079817-123.5655788 0l-8.6750562 8.4936051c-1.2227816 1.1972041-3.205301 1.1972041-4.4280806 0l-20.1366949-19.7155031c-2.4455612-2.3944092-2.4455612-6.2765122 0-8.6709204zm218.7677961 40.7737449 17.921697 17.546897c2.445549 2.3943969 2.445563 6.2764769.000031 8.6708899l-80.810171 79.121134c-2.445544 2.394426-6.410582 2.394453-8.85616.000062-.00001-.00001-.000022-.000022-.000032-.000032l-57.354143-56.154572c-.61139-.598602-1.60265-.598602-2.21404 0-.000004.000004-.000007.000008-.000011.000011l-57.3529212 56.154531c-2.4455368 2.394432-6.4105755 2.394472-8.8561612.000087-.0000143-.000014-.0000296-.000028-.0000449-.000044l-80.81241943-79.122185c-2.44556021-2.394408-2.44556021-6.2765115 0-8.6709197l17.92172963-17.5468673c2.4455602-2.3944082 6.4105989-2.3944082 8.8561602 0l57.3549775 56.155357c.6113908.598602 1.602649.598602 2.2140398 0 .0000092-.000009.0000174-.000017.0000265-.000024l57.3521031-56.155333c2.445505-2.3944633 6.410544-2.3945531 8.856161-.0002.000034.0000336.000068.0000673.000101.000101l57.354902 56.155432c.61139.598601 1.60265.598601 2.21404 0l57.353975-56.1543249c2.445561-2.3944092 6.410599-2.3944092 8.85616 0z' fill='%233b99fc'/%3E%3C/svg%3E",ml="WalletConnect",vl=300,wl="rgb(64, 153, 255)",Oa="walletconnect-wrapper",Ba="walletconnect-style-sheet",Na="walletconnect-qrcode-modal",yl="walletconnect-qrcode-close",La="walletconnect-qrcode-text",bl="walletconnect-connect-button";function xl(t){return Z.createElement("div",{className:"walletconnect-modal__header"},Z.createElement("img",{src:_l,className:"walletconnect-modal__headerLogo"}),Z.createElement("p",null,ml),Z.createElement("div",{className:"walletconnect-modal__close__wrapper",onClick:t.onClose},Z.createElement("div",{id:yl,className:"walletconnect-modal__close__icon"},Z.createElement("div",{className:"walletconnect-modal__close__line1"}),Z.createElement("div",{className:"walletconnect-modal__close__line2"}))))}function Ml(t){return Z.createElement("a",{className:"walletconnect-connect__button",href:t.href,id:bl+"-"+t.name,onClick:t.onClick,rel:"noopener noreferrer",style:{backgroundColor:t.color},target:"_blank"},t.name)}var El="data:image/svg+xml,%3Csvg fill='none' height='18' viewBox='0 0 8 18' width='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath clip-rule='evenodd' d='m.586301.213898c-.435947.33907-.5144813.967342-.175411 1.403292l4.87831 6.27212c.28087.36111.28087.86677 0 1.22788l-4.878311 6.27211c-.33907.436-.260536 1.0642.175412 1.4033.435949.3391 1.064219.2605 1.403289-.1754l4.87832-6.2721c.84259-1.08336.84259-2.60034 0-3.68367l-4.87832-6.27212c-.33907-.4359474-.96734-.514482-1.403289-.175412z' fill='%233c4252' fill-rule='evenodd'/%3E%3C/svg%3E";function Cl(t){var e=t.color,r=t.href,n=t.name,o=t.logo,i=t.onClick;return Z.createElement("a",{className:"walletconnect-modal__base__row",href:r,onClick:i,rel:"noopener noreferrer",target:"_blank"},Z.createElement("h3",{className:"walletconnect-modal__base__row__h3"},n),Z.createElement("div",{className:"walletconnect-modal__base__row__right"},Z.createElement("div",{className:"walletconnect-modal__base__row__right__app-icon",style:{background:"url('"+o+"') "+e,backgroundSize:"100%"}}),Z.createElement("img",{src:El,className:"walletconnect-modal__base__row__right__caret"})))}function Sl(t){var e=t.color,r=t.href,n=t.name,o=t.logo,i=t.onClick,f=window.innerWidth<768?(n.length>8?2.5:2.7)+"vw":"inherit";return Z.createElement("a",{className:"walletconnect-connect__button__icon_anchor",href:r,onClick:i,rel:"noopener noreferrer",target:"_blank"},Z.createElement("div",{className:"walletconnect-connect__button__icon",style:{background:"url('"+o+"') "+e,backgroundSize:"100%"}}),Z.createElement("div",{style:{fontSize:f},className:"walletconnect-connect__button__text"},n))}var Al=5,Vn=12;function kl(t){var e=Fe.isAndroid(),r=Z.useState(""),n=r[0],o=r[1],i=Z.useState(""),f=i[0],u=i[1],g=Z.useState(1),y=g[0],w=g[1],k=f?t.links.filter(function(F){return F.name.toLowerCase().includes(f.toLowerCase())}):t.links,B=t.errorMessage,N=f||k.length>Al,U=Math.ceil(k.length/Vn),K=[(y-1)*Vn+1,y*Vn],C=k.length?k.filter(function(F,j){return j+1>=K[0]&&j+1<=K[1]}):[],T=!e&&U>1,I=void 0;function A(F){o(F.target.value),clearTimeout(I),F.target.value?I=setTimeout(function(){u(F.target.value),w(1)},1e3):(o(""),u(""),w(1))}return Z.createElement("div",null,Z.createElement("p",{id:La,className:"walletconnect-qrcode__text"},e?t.text.connect_mobile_wallet:t.text.choose_preferred_wallet),!e&&Z.createElement("input",{className:"walletconnect-search__input",placeholder:"Search",value:n,onChange:A}),Z.createElement("div",{className:"walletconnect-connect__buttons__wrapper"+(e?"__android":N&&k.length?"__wrap":"")},e?Z.createElement(Ml,{name:t.text.connect,color:wl,href:t.uri,onClick:Z.useCallback(function(){Fe.saveMobileLinkInfo({name:"Unknown",href:t.uri})},[])}):C.length?C.map(function(F){var j=F.color,G=F.name,ne=F.shortName,ee=F.logo,ue=Fe.formatIOSMobile(t.uri,F),E=Z.useCallback(function(){Fe.saveMobileLinkInfo({name:G,href:ue})},[C]);return N?Z.createElement(Sl,{color:j,href:ue,name:ne||G,logo:ee,onClick:E}):Z.createElement(Cl,{color:j,href:ue,name:G,logo:ee,onClick:E})}):Z.createElement(Z.Fragment,null,Z.createElement("p",null,B.length?t.errorMessage:!!t.links.length&&!k.length?t.text.no_wallets_found:t.text.loading))),T&&Z.createElement("div",{className:"walletconnect-modal__footer"},Array(U).fill(0).map(function(F,j){var G=j+1,ne=y===G;return Z.createElement("a",{style:{margin:"auto 10px",fontWeight:ne?"bold":"normal"},onClick:function(){return w(G)}},G)})))}function Rl(t){var e=!!t.message.trim();return Z.createElement("div",{className:"walletconnect-qrcode__notification"+(e?" notification__show":"")},t.message)}var Il=function(t){try{var e="";return Promise.resolve(Ta.toString(t,{margin:0,type:"svg"})).then(function(r){return typeof r=="string"&&(e=r.replace("<svg",'<svg class="walletconnect-qrcode__image"')),e})}catch(r){return Promise.reject(r)}};function Tl(t){var e=Z.useState(""),r=e[0],n=e[1],o=Z.useState(""),i=o[0],f=o[1];Z.useEffect(function(){try{return Promise.resolve(Il(t.uri)).then(function(g){f(g)})}catch(g){Promise.reject(g)}},[]);var u=function(){var g=fl(t.uri);g?(n(t.text.copied_to_clipboard),setInterval(function(){return n("")},1200)):(n("Error"),setInterval(function(){return n("")},1200))};return Z.createElement("div",null,Z.createElement("p",{id:La,className:"walletconnect-qrcode__text"},t.text.scan_qrcode_with_wallet),Z.createElement("div",{dangerouslySetInnerHTML:{__html:i}}),Z.createElement("div",{className:"walletconnect-modal__footer"},Z.createElement("a",{onClick:u},t.text.copy_to_clipboard)),Z.createElement(Rl,{message:r}))}function Ol(t){var e=Fe.isAndroid(),r=Fe.isMobile(),n=r?t.qrcodeModalOptions&&t.qrcodeModalOptions.mobileLinks?t.qrcodeModalOptions.mobileLinks:void 0:t.qrcodeModalOptions&&t.qrcodeModalOptions.desktopLinks?t.qrcodeModalOptions.desktopLinks:void 0,o=Z.useState(!1),i=o[0],f=o[1],u=Z.useState(!1),g=u[0],y=u[1],w=Z.useState(!r),k=w[0],B=w[1],N={mobile:r,text:t.text,uri:t.uri,qrcodeModalOptions:t.qrcodeModalOptions},U=Z.useState(""),K=U[0],C=U[1],T=Z.useState(!1),I=T[0],A=T[1],F=Z.useState([]),j=F[0],G=F[1],ne=Z.useState(""),ee=ne[0],ue=ne[1],E=function(){g||i||n&&!n.length||j.length>0||Z.useEffect(function(){var l=function(){try{if(e)return Promise.resolve();f(!0);var p=gl(function(){var m=t.qrcodeModalOptions&&t.qrcodeModalOptions.registryUrl?t.qrcodeModalOptions.registryUrl:Fe.getWalletRegistryUrl();return Promise.resolve(fetch(m)).then(function(x){return Promise.resolve(x.json()).then(function(S){var O=S.listings,b=r?"mobile":"desktop",s=Fe.getMobileLinkRegistry(Fe.formatMobileRegistry(O,b),n);f(!1),y(!0),ue(s.length?"":t.text.no_supported_wallets),G(s);var _=s.length===1;_&&(C(Fe.formatIOSMobile(t.uri,s[0])),B(!0)),A(_)})})},function(m){f(!1),y(!0),ue(t.text.something_went_wrong),console.error(m)});return Promise.resolve(p&&p.then?p.then(function(){}):void 0)}catch(m){return Promise.reject(m)}};l()})};E();var a=r?k:!k;return Z.createElement("div",{id:Na,className:"walletconnect-qrcode__base animated fadeIn"},Z.createElement("div",{className:"walletconnect-modal__base"},Z.createElement(xl,{onClose:t.onClose}),I&&k?Z.createElement("div",{className:"walletconnect-modal__single_wallet"},Z.createElement("a",{onClick:function(){return Fe.saveMobileLinkInfo({name:j[0].name,href:K})},href:K,rel:"noopener noreferrer",target:"_blank"},t.text.connect_with+" "+(I?j[0].name:"")+" \u203A")):e||i||!i&&j.length?Z.createElement("div",{className:"walletconnect-modal__mobile__toggle"+(a?" right__selected":"")},Z.createElement("div",{className:"walletconnect-modal__mobile__toggle_selector"}),r?Z.createElement(Z.Fragment,null,Z.createElement("a",{onClick:function(){return B(!1),E()}},t.text.mobile),Z.createElement("a",{onClick:function(){return B(!0)}},t.text.qrcode)):Z.createElement(Z.Fragment,null,Z.createElement("a",{onClick:function(){return B(!0)}},t.text.qrcode),Z.createElement("a",{onClick:function(){return B(!1),E()}},t.text.desktop))):null,Z.createElement("div",null,k||!e&&!i&&!j.length?Z.createElement(Tl,Object.assign({},N)):Z.createElement(kl,Object.assign({},N,{links:j,errorMessage:ee})))))}var Bl={choose_preferred_wallet:"W\xE4hle bevorzugte Wallet",connect_mobile_wallet:"Verbinde mit Mobile Wallet",scan_qrcode_with_wallet:"Scanne den QR-code mit einer WalletConnect kompatiblen Wallet",connect:"Verbinden",qrcode:"QR-Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"In die Zwischenablage kopieren",copied_to_clipboard:"In die Zwischenablage kopiert!",connect_with:"Verbinden mit Hilfe von",loading:"Laden...",something_went_wrong:"Etwas ist schief gelaufen",no_supported_wallets:"Es gibt noch keine unterst\xFCtzten Wallet",no_wallets_found:"keine Wallet gefunden"},Nl={choose_preferred_wallet:"Choose your preferred wallet",connect_mobile_wallet:"Connect to Mobile Wallet",scan_qrcode_with_wallet:"Scan QR code with a WalletConnect-compatible wallet",connect:"Connect",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copy to clipboard",copied_to_clipboard:"Copied to clipboard!",connect_with:"Connect with",loading:"Loading...",something_went_wrong:"Something went wrong",no_supported_wallets:"There are no supported wallets yet",no_wallets_found:"No wallets found"},Ll={choose_preferred_wallet:"Elige tu billetera preferida",connect_mobile_wallet:"Conectar a billetera m\xF3vil",scan_qrcode_with_wallet:"Escanea el c\xF3digo QR con una billetera compatible con WalletConnect",connect:"Conectar",qrcode:"C\xF3digo QR",mobile:"M\xF3vil",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Conectar mediante",loading:"Cargando...",something_went_wrong:"Algo sali\xF3 mal",no_supported_wallets:"Todav\xEDa no hay billeteras compatibles",no_wallets_found:"No se encontraron billeteras"},Ul={choose_preferred_wallet:"Choisissez votre portefeuille pr\xE9f\xE9r\xE9",connect_mobile_wallet:"Se connecter au portefeuille mobile",scan_qrcode_with_wallet:"Scannez le QR code avec un portefeuille compatible WalletConnect",connect:"Se connecter",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copier",copied_to_clipboard:"Copi\xE9!",connect_with:"Connectez-vous \xE0 l'aide de",loading:"Chargement...",something_went_wrong:"Quelque chose a mal tourn\xE9",no_supported_wallets:"Il n'y a pas encore de portefeuilles pris en charge",no_wallets_found:"Aucun portefeuille trouv\xE9"},Fl={choose_preferred_wallet:"\uC6D0\uD558\uB294 \uC9C0\uAC11\uC744 \uC120\uD0DD\uD558\uC138\uC694",connect_mobile_wallet:"\uBAA8\uBC14\uC77C \uC9C0\uAC11\uACFC \uC5F0\uACB0",scan_qrcode_with_wallet:"WalletConnect \uC9C0\uC6D0 \uC9C0\uAC11\uC5D0\uC11C QR\uCF54\uB4DC\uB97C \uC2A4\uCE94\uD558\uC138\uC694",connect:"\uC5F0\uACB0",qrcode:"QR \uCF54\uB4DC",mobile:"\uBAA8\uBC14\uC77C",desktop:"\uB370\uC2A4\uD06C\uD0D1",copy_to_clipboard:"\uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC",copied_to_clipboard:"\uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!",connect_with:"\uC640 \uC5F0\uACB0\uD558\uB2E4",loading:"\uB85C\uB4DC \uC911...",something_went_wrong:"\uBB38\uC81C\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",no_supported_wallets:"\uC544\uC9C1 \uC9C0\uC6D0\uB418\uB294 \uC9C0\uAC11\uC774 \uC5C6\uC2B5\uB2C8\uB2E4",no_wallets_found:"\uC9C0\uAC11\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4"},Pl={choose_preferred_wallet:"Escolha sua carteira preferida",connect_mobile_wallet:"Conectar-se \xE0 carteira m\xF3vel",scan_qrcode_with_wallet:"Ler o c\xF3digo QR com uma carteira compat\xEDvel com WalletConnect",connect:"Conectar",qrcode:"C\xF3digo QR",mobile:"M\xF3vel",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Ligar por meio de",loading:"Carregamento...",something_went_wrong:"Algo correu mal",no_supported_wallets:"Ainda n\xE3o h\xE1 carteiras suportadas",no_wallets_found:"Nenhuma carteira encontrada"},ql={choose_preferred_wallet:"\u9009\u62E9\u4F60\u7684\u94B1\u5305",connect_mobile_wallet:"\u8FDE\u63A5\u81F3\u79FB\u52A8\u7AEF\u94B1\u5305",scan_qrcode_with_wallet:"\u4F7F\u7528\u517C\u5BB9 WalletConnect \u7684\u94B1\u5305\u626B\u63CF\u4E8C\u7EF4\u7801",connect:"\u8FDE\u63A5",qrcode:"\u4E8C\u7EF4\u7801",mobile:"\u79FB\u52A8",desktop:"\u684C\u9762",copy_to_clipboard:"\u590D\u5236\u5230\u526A\u8D34\u677F",copied_to_clipboard:"\u590D\u5236\u5230\u526A\u8D34\u677F\u6210\u529F\uFF01",connect_with:"\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u8FDE\u63A5",loading:"\u6B63\u5728\u52A0\u8F7D...",something_went_wrong:"\u51FA\u4E86\u95EE\u9898",no_supported_wallets:"\u76EE\u524D\u8FD8\u6CA1\u6709\u652F\u6301\u7684\u94B1\u5305",no_wallets_found:"\u6CA1\u6709\u627E\u5230\u94B1\u5305"},Dl={choose_preferred_wallet:"\u06A9\u06CC\u0641 \u067E\u0648\u0644 \u0645\u0648\u0631\u062F \u0646\u0638\u0631 \u062E\u0648\u062F \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F",connect_mobile_wallet:"\u0628\u0647 \u06A9\u06CC\u0641 \u067E\u0648\u0644 \u0645\u0648\u0628\u0627\u06CC\u0644 \u0648\u0635\u0644 \u0634\u0648\u06CC\u062F",scan_qrcode_with_wallet:"\u06A9\u062F QR \u0631\u0627 \u0628\u0627 \u06CC\u06A9 \u06A9\u06CC\u0641 \u067E\u0648\u0644 \u0633\u0627\u0632\u06AF\u0627\u0631 \u0628\u0627 WalletConnect \u0627\u0633\u06A9\u0646 \u06A9\u0646\u06CC\u062F",connect:"\u0627\u062A\u0635\u0627\u0644",qrcode:"\u06A9\u062F QR",mobile:"\u0633\u06CC\u0627\u0631",desktop:"\u062F\u0633\u06A9\u062A\u0627\u067E",copy_to_clipboard:"\u06A9\u067E\u06CC \u0628\u0647 \u06A9\u0644\u06CC\u067E \u0628\u0648\u0631\u062F",copied_to_clipboard:"\u062F\u0631 \u06A9\u0644\u06CC\u067E \u0628\u0648\u0631\u062F \u06A9\u067E\u06CC \u0634\u062F!",connect_with:"\u0627\u0631\u062A\u0628\u0627\u0637 \u0628\u0627",loading:"...\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC",something_went_wrong:"\u0645\u0634\u06A9\u0644\u06CC \u067E\u06CC\u0634 \u0622\u0645\u062F",no_supported_wallets:"\u0647\u0646\u0648\u0632 \u0647\u06CC\u0686 \u06A9\u06CC\u0641 \u067E\u0648\u0644 \u067E\u0634\u062A\u06CC\u0628\u0627\u0646\u06CC \u0634\u062F\u0647 \u0627\u06CC \u0648\u062C\u0648\u062F \u0646\u062F\u0627\u0631\u062F",no_wallets_found:"\u0647\u06CC\u0686 \u06A9\u06CC\u0641 \u067E\u0648\u0644\u06CC \u067E\u06CC\u062F\u0627 \u0646\u0634\u062F"},Ua={de:Bl,en:Nl,es:Ll,fr:Ul,ko:Fl,pt:Pl,zh:ql,fa:Dl};function Hl(){var t=Fe.getDocumentOrThrow(),e=t.getElementById(Ba);e&&t.head.removeChild(e);var r=t.createElement("style");r.setAttribute("id",Ba),r.innerText=pl,t.head.appendChild(r)}function $l(){var t=Fe.getDocumentOrThrow(),e=t.createElement("div");return e.setAttribute("id",Oa),t.body.appendChild(e),e}function Fa(){var t=Fe.getDocumentOrThrow(),e=t.getElementById(Na);e&&(e.className=e.className.replace("fadeIn","fadeOut"),setTimeout(function(){var r=t.getElementById(Oa);r&&t.body.removeChild(r)},vl))}function Wl(t){return function(){Fa(),t&&t()}}function jl(){var t=Fe.getNavigatorOrThrow().language.split("-")[0]||"en";return Ua[t]||Ua.en}function zl(t,e,r){Hl();var n=$l();Z.render(Z.createElement(Ol,{text:jl(),uri:t,onClose:Wl(e),qrcodeModalOptions:r}),n)}function Kl(){Fa()}var Pa=function(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"};function Jl(t,e,r){console.log(t),Pa()?dl(t):zl(t,e,r)}function Vl(){Pa()||Kl()}var Yl={open:Jl,close:Vl},Gl=Yl,qa={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function o(g,y,w){this.fn=g,this.context=y,this.once=w||!1}function i(g,y,w,k,B){if(typeof w!="function")throw new TypeError("The listener must be a function");var N=new o(w,k||g,B),U=r?r+y:y;return g._events[U]?g._events[U].fn?g._events[U]=[g._events[U],N]:g._events[U].push(N):(g._events[U]=N,g._eventsCount++),g}function f(g,y){--g._eventsCount===0?g._events=new n:delete g._events[y]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var y=[],w,k;if(this._eventsCount===0)return y;for(k in w=this._events)e.call(w,k)&&y.push(r?k.slice(1):k);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(w)):y},u.prototype.listeners=function(y){var w=r?r+y:y,k=this._events[w];if(!k)return[];if(k.fn)return[k.fn];for(var B=0,N=k.length,U=new Array(N);B<N;B++)U[B]=k[B].fn;return U},u.prototype.listenerCount=function(y){var w=r?r+y:y,k=this._events[w];return k?k.fn?1:k.length:0},u.prototype.emit=function(y,w,k,B,N,U){var K=r?r+y:y;if(!this._events[K])return!1;var C=this._events[K],T=arguments.length,I,A;if(C.fn){switch(C.once&&this.removeListener(y,C.fn,void 0,!0),T){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,w),!0;case 3:return C.fn.call(C.context,w,k),!0;case 4:return C.fn.call(C.context,w,k,B),!0;case 5:return C.fn.call(C.context,w,k,B,N),!0;case 6:return C.fn.call(C.context,w,k,B,N,U),!0}for(A=1,I=new Array(T-1);A<T;A++)I[A-1]=arguments[A];C.fn.apply(C.context,I)}else{var F=C.length,j;for(A=0;A<F;A++)switch(C[A].once&&this.removeListener(y,C[A].fn,void 0,!0),T){case 1:C[A].fn.call(C[A].context);break;case 2:C[A].fn.call(C[A].context,w);break;case 3:C[A].fn.call(C[A].context,w,k);break;case 4:C[A].fn.call(C[A].context,w,k,B);break;default:if(!I)for(j=1,I=new Array(T-1);j<T;j++)I[j-1]=arguments[j];C[A].fn.apply(C[A].context,I)}}return!0},u.prototype.on=function(y,w,k){return i(this,y,w,k,!1)},u.prototype.once=function(y,w,k){return i(this,y,w,k,!0)},u.prototype.removeListener=function(y,w,k,B){var N=r?r+y:y;if(!this._events[N])return this;if(!w)return f(this,N),this;var U=this._events[N];if(U.fn)U.fn===w&&(!B||U.once)&&(!k||U.context===k)&&f(this,N);else{for(var K=0,C=[],T=U.length;K<T;K++)(U[K].fn!==w||B&&!U[K].once||k&&U[K].context!==k)&&C.push(U[K]);C.length?this._events[N]=C.length===1?C[0]:C:f(this,N)}return this},u.prototype.removeAllListeners=function(y){var w;return y?(w=r?r+y:y,this._events[w]&&f(this,w)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,t.exports=u})(qa);var Ql=qa.exports,Da={},Yn={},Ht={},Gn={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(t,e){(function(r){var n=e&&!e.nodeType&&e,o=t&&!t.nodeType&&t,i=typeof Ue=="object"&&Ue;(i.global===i||i.window===i||i.self===i)&&(r=i);var f,u=2147483647,g=36,y=1,w=26,k=38,B=700,N=72,U=128,K="-",C=/^xn--/,T=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},F=g-y,j=Math.floor,G=String.fromCharCode,ne;function ee(_){throw RangeError(A[_])}function ue(_,D){for(var P=_.length,Y=[];P--;)Y[P]=D(_[P]);return Y}function E(_,D){var P=_.split("@"),Y="";P.length>1&&(Y=P[0]+"@",_=P[1]),_=_.replace(I,".");var X=_.split("."),d=ue(X,D).join(".");return Y+d}function a(_){for(var D=[],P=0,Y=_.length,X,d;P<Y;)X=_.charCodeAt(P++),X>=55296&&X<=56319&&P<Y?(d=_.charCodeAt(P++),(d&64512)==56320?D.push(((X&1023)<<10)+(d&1023)+65536):(D.push(X),P--)):D.push(X);return D}function l(_){return ue(_,function(D){var P="";return D>65535&&(D-=65536,P+=G(D>>>10&1023|55296),D=56320|D&1023),P+=G(D),P}).join("")}function p(_){return _-48<10?_-22:_-65<26?_-65:_-97<26?_-97:g}function m(_,D){return _+22+75*(_<26)-((D!=0)<<5)}function x(_,D,P){var Y=0;for(_=P?j(_/B):_>>1,_+=j(_/D);_>F*w>>1;Y+=g)_=j(_/F);return j(Y+(F+1)*_/(_+k))}function S(_){var D=[],P=_.length,Y,X=0,d=U,L=N,$,q,W,te,V,J,ce,Q,ie;for($=_.lastIndexOf(K),$<0&&($=0),q=0;q<$;++q)_.charCodeAt(q)>=128&&ee("not-basic"),D.push(_.charCodeAt(q));for(W=$>0?$+1:0;W<P;){for(te=X,V=1,J=g;W>=P&&ee("invalid-input"),ce=p(_.charCodeAt(W++)),(ce>=g||ce>j((u-X)/V))&&ee("overflow"),X+=ce*V,Q=J<=L?y:J>=L+w?w:J-L,!(ce<Q);J+=g)ie=g-Q,V>j(u/ie)&&ee("overflow"),V*=ie;Y=D.length+1,L=x(X-te,Y,te==0),j(X/Y)>u-d&&ee("overflow"),d+=j(X/Y),X%=Y,D.splice(X++,0,d)}return l(D)}function O(_){var D,P,Y,X,d,L,$,q,W,te,V,J=[],ce,Q,ie,v;for(_=a(_),ce=_.length,D=U,P=0,d=N,L=0;L<ce;++L)V=_[L],V<128&&J.push(G(V));for(Y=X=J.length,X&&J.push(K);Y<ce;){for($=u,L=0;L<ce;++L)V=_[L],V>=D&&V<$&&($=V);for(Q=Y+1,$-D>j((u-P)/Q)&&ee("overflow"),P+=($-D)*Q,D=$,L=0;L<ce;++L)if(V=_[L],V<D&&++P>u&&ee("overflow"),V==D){for(q=P,W=g;te=W<=d?y:W>=d+w?w:W-d,!(q<te);W+=g)v=q-te,ie=g-te,J.push(G(m(te+v%ie,0))),q=j(v/ie);J.push(G(m(q,0))),d=x(P,Q,Y==X),P=0,++Y}++P,++D}return J.join("")}function b(_){return E(_,function(D){return C.test(D)?S(D.slice(4).toLowerCase()):D})}function s(_){return E(_,function(D){return T.test(D)?"xn--"+O(D):D})}if(f={version:"1.3.2",ucs2:{decode:a,encode:l},decode:S,encode:O,toASCII:s,toUnicode:b},n&&o)if(t.exports==n)o.exports=f;else for(ne in f)f.hasOwnProperty(ne)&&(n[ne]=f[ne]);else r.punycode=f})(Ue)})(Gn,Gn.exports);var Xl={isString:function(t){return typeof t=="string"},isObject:function(t){return typeof t=="object"&&t!==null},isNull:function(t){return t===null},isNullOrUndefined:function(t){return t==null}},tr={};function Zl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var ef=function(t,e,r,n){e=e||"&",r=r||"=";var o={};if(typeof t!="string"||t.length===0)return o;var i=/\+/g;t=t.split(e);var f=1e3;n&&typeof n.maxKeys=="number"&&(f=n.maxKeys);var u=t.length;f>0&&u>f&&(u=f);for(var g=0;g<u;++g){var y=t[g].replace(i,"%20"),w=y.indexOf(r),k,B,N,U;w>=0?(k=y.substr(0,w),B=y.substr(w+1)):(k=y,B=""),N=decodeURIComponent(k),U=decodeURIComponent(B),Zl(o,N)?Array.isArray(o[N])?o[N].push(U):o[N]=[o[N],U]:o[N]=U}return o},rr=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},tf=function(t,e,r,n){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(o){var i=encodeURIComponent(rr(o))+r;return Array.isArray(t[o])?t[o].map(function(f){return i+encodeURIComponent(rr(f))}).join(e):i+encodeURIComponent(rr(t[o]))}).join(e):n?encodeURIComponent(rr(n))+r+encodeURIComponent(rr(t)):""};tr.decode=tr.parse=ef,tr.encode=tr.stringify=tf;var rf=Gn.exports,Je=Xl;Ht.parse=nr,Ht.resolve=df,Ht.resolveObject=pf,Ht.format=ff,Ht.Url=We;function We(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var nf=/^([a-z0-9.+-]+:)/i,of=/:[0-9]*$/,af=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,sf=["<",">",'"',"`"," ","\r",`
`,"	"],cf=["{","}","|","\\","^","`"].concat(sf),Qn=["'"].concat(cf),Ha=["%","/","?",";","#"].concat(Qn),$a=["/","?","#"],uf=255,Wa=/^[+a-z0-9A-Z_-]{0,63}$/,hf=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,lf={javascript:!0,"javascript:":!0},Xn={javascript:!0,"javascript:":!0},$t={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Zn=tr;function nr(t,e,r){if(t&&Je.isObject(t)&&t instanceof We)return t;var n=new We;return n.parse(t,e,r),n}We.prototype.parse=function(t,e,r){if(!Je.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),o=n!==-1&&n<t.indexOf("#")?"?":"#",i=t.split(o),f=/\\/g;i[0]=i[0].replace(f,"/"),t=i.join(o);var u=t;if(u=u.trim(),!r&&t.split("#").length===1){var g=af.exec(u);if(g)return this.path=u,this.href=u,this.pathname=g[1],g[2]?(this.search=g[2],e?this.query=Zn.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var y=nf.exec(u);if(y){y=y[0];var w=y.toLowerCase();this.protocol=w,u=u.substr(y.length)}if(r||y||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var k=u.substr(0,2)==="//";k&&!(y&&Xn[y])&&(u=u.substr(2),this.slashes=!0)}if(!Xn[y]&&(k||y&&!$t[y])){for(var B=-1,N=0;N<$a.length;N++){var U=u.indexOf($a[N]);U!==-1&&(B===-1||U<B)&&(B=U)}var K,C;B===-1?C=u.lastIndexOf("@"):C=u.lastIndexOf("@",B),C!==-1&&(K=u.slice(0,C),u=u.slice(C+1),this.auth=decodeURIComponent(K)),B=-1;for(var N=0;N<Ha.length;N++){var U=u.indexOf(Ha[N]);U!==-1&&(B===-1||U<B)&&(B=U)}B===-1&&(B=u.length),this.host=u.slice(0,B),u=u.slice(B),this.parseHost(),this.hostname=this.hostname||"";var T=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!T)for(var I=this.hostname.split(/\./),N=0,A=I.length;N<A;N++){var F=I[N];if(!!F&&!F.match(Wa)){for(var j="",G=0,ne=F.length;G<ne;G++)F.charCodeAt(G)>127?j+="x":j+=F[G];if(!j.match(Wa)){var ee=I.slice(0,N),ue=I.slice(N+1),E=F.match(hf);E&&(ee.push(E[1]),ue.unshift(E[2])),ue.length&&(u="/"+ue.join(".")+u),this.hostname=ee.join(".");break}}}this.hostname.length>uf?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=rf.toASCII(this.hostname));var a=this.port?":"+this.port:"",l=this.hostname||"";this.host=l+a,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),u[0]!=="/"&&(u="/"+u))}if(!lf[w])for(var N=0,A=Qn.length;N<A;N++){var p=Qn[N];if(u.indexOf(p)!==-1){var m=encodeURIComponent(p);m===p&&(m=escape(p)),u=u.split(p).join(m)}}var x=u.indexOf("#");x!==-1&&(this.hash=u.substr(x),u=u.slice(0,x));var S=u.indexOf("?");if(S!==-1?(this.search=u.substr(S),this.query=u.substr(S+1),e&&(this.query=Zn.parse(this.query)),u=u.slice(0,S)):e&&(this.search="",this.query={}),u&&(this.pathname=u),$t[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var a=this.pathname||"",O=this.search||"";this.path=a+O}return this.href=this.format(),this};function ff(t){return Je.isString(t)&&(t=nr(t)),t instanceof We?t.format():We.prototype.format.call(t)}We.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&Je.isObject(this.query)&&Object.keys(this.query).length&&(i=Zn.stringify(this.query));var f=this.search||i&&"?"+i||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||$t[e])&&o!==!1?(o="//"+(o||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):o||(o=""),n&&n.charAt(0)!=="#"&&(n="#"+n),f&&f.charAt(0)!=="?"&&(f="?"+f),r=r.replace(/[?#]/g,function(u){return encodeURIComponent(u)}),f=f.replace("#","%23"),e+o+r+f+n};function df(t,e){return nr(t,!1,!0).resolve(e)}We.prototype.resolve=function(t){return this.resolveObject(nr(t,!1,!0)).format()};function pf(t,e){return t?nr(t,!1,!0).resolveObject(e):e}We.prototype.resolveObject=function(t){if(Je.isString(t)){var e=new We;e.parse(t,!1,!0),t=e}for(var r=new We,n=Object.keys(this),o=0;o<n.length;o++){var i=n[o];r[i]=this[i]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var f=Object.keys(t),u=0;u<f.length;u++){var g=f[u];g!=="protocol"&&(r[g]=t[g])}return $t[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!$t[t.protocol]){for(var y=Object.keys(t),w=0;w<y.length;w++){var k=y[w];r[k]=t[k]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!Xn[t.protocol]){for(var A=(t.pathname||"").split("/");A.length&&!(t.host=A.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),A[0]!==""&&A.unshift(""),A.length<2&&A.unshift(""),r.pathname=A.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var B=r.pathname||"",N=r.search||"";r.path=B+N}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var U=r.pathname&&r.pathname.charAt(0)==="/",K=t.host||t.pathname&&t.pathname.charAt(0)==="/",C=K||U||r.host&&t.pathname,T=C,I=r.pathname&&r.pathname.split("/")||[],A=t.pathname&&t.pathname.split("/")||[],F=r.protocol&&!$t[r.protocol];if(F&&(r.hostname="",r.port=null,r.host&&(I[0]===""?I[0]=r.host:I.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(A[0]===""?A[0]=t.host:A.unshift(t.host)),t.host=null),C=C&&(A[0]===""||I[0]==="")),K)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,I=A;else if(A.length)I||(I=[]),I.pop(),I=I.concat(A),r.search=t.search,r.query=t.query;else if(!Je.isNullOrUndefined(t.search)){if(F){r.hostname=r.host=I.shift();var j=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;j&&(r.auth=j.shift(),r.host=r.hostname=j.shift())}return r.search=t.search,r.query=t.query,(!Je.isNull(r.pathname)||!Je.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!I.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var G=I.slice(-1)[0],ne=(r.host||t.host||I.length>1)&&(G==="."||G==="..")||G==="",ee=0,ue=I.length;ue>=0;ue--)G=I[ue],G==="."?I.splice(ue,1):G===".."?(I.splice(ue,1),ee++):ee&&(I.splice(ue,1),ee--);if(!C&&!T)for(;ee--;ee)I.unshift("..");C&&I[0]!==""&&(!I[0]||I[0].charAt(0)!=="/")&&I.unshift(""),ne&&I.join("/").substr(-1)!=="/"&&I.push("");var E=I[0]===""||I[0]&&I[0].charAt(0)==="/";if(F){r.hostname=r.host=E?"":I.length?I.shift():"";var j=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;j&&(r.auth=j.shift(),r.host=r.hostname=j.shift())}return C=C||r.host&&I.length,C&&!E&&I.unshift(""),I.length?r.pathname=I.join("/"):(r.pathname=null,r.path=null),(!Je.isNull(r.pathname)||!Je.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},We.prototype.parseHost=function(){var t=this.host,e=of.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var ei={};Object.defineProperty(ei,"__esModule",{value:!0});var gf=function(){function t(e){this.type=e,this.bubbles=!1,this.cancelable=!1,this.loaded=0,this.lengthComputable=!1,this.total=0}return t}();ei.ProgressEvent=gf;var Wt={},Tr=Ue&&Ue.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Wt,"__esModule",{value:!0});var _f=function(t){Tr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Error);Wt.SecurityError=_f;var mf=function(t){Tr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Error);Wt.InvalidStateError=mf;var vf=function(t){Tr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Error);Wt.NetworkError=vf;var wf=function(t){Tr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Error);Wt.SyntaxError=wf;var ir={};Object.defineProperty(ir,"__esModule",{value:!0});var yf=function(){function t(){this.listeners={}}return t.prototype.addEventListener=function(e,r){e=e.toLowerCase(),this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(r.handleEvent||r)},t.prototype.removeEventListener=function(e,r){if(e=e.toLowerCase(),!!this.listeners[e]){var n=this.listeners[e].indexOf(r.handleEvent||r);n<0||this.listeners[e].splice(n,1)}},t.prototype.dispatchEvent=function(e){var r=e.type.toLowerCase();if(e.target=this,this.listeners[r])for(var n=0,o=this.listeners[r];n<o.length;n++){var i=o[n];i.call(this,e)}var f=this["on"+r];return f&&f.call(this,e),!0},t}();ir.XMLHttpRequestEventTarget=yf;var ti={},bf=Ue&&Ue.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ti,"__esModule",{value:!0});var xf=ir,Mf=function(t){bf(e,t);function e(){var r=t.call(this)||this;return r._contentType=null,r._body=null,r._reset(),r}return e.prototype._reset=function(){this._contentType=null,this._body=null},e.prototype._setData=function(r){if(r!=null)if(typeof r=="string")r.length!==0&&(this._contentType="text/plain;charset=UTF-8"),this._body=new Buffer(r,"utf-8");else if(Buffer.isBuffer(r))this._body=r;else if(r instanceof ArrayBuffer){for(var n=new Buffer(r.byteLength),o=new Uint8Array(r),i=0;i<r.byteLength;i++)n[i]=o[i];this._body=n}else if(r.buffer&&r.buffer instanceof ArrayBuffer){for(var n=new Buffer(r.byteLength),f=r.byteOffset,o=new Uint8Array(r.buffer),i=0;i<r.byteLength;i++)n[i]=o[i+f];this._body=n}else throw new Error("Unsupported send() data "+r)},e.prototype._finalizeHeaders=function(r,n){this._contentType&&!n["content-type"]&&(r["Content-Type"]=this._contentType),this._body&&(r["Content-Length"]=this._body.length.toString())},e.prototype._startUpload=function(r){this._body&&r.write(this._body),r.end()},e}(xf.XMLHttpRequestEventTarget);ti.XMLHttpRequestUpload=Mf;var Or={};(function(){function t(o,i,f,u){return this instanceof t?(this.domain=o||void 0,this.path=i||"/",this.secure=!!f,this.script=!!u,this):new t(o,i,f,u)}t.All=Object.freeze(Object.create(null)),Or.CookieAccessInfo=t;function e(o,i,f){return o instanceof e?o:this instanceof e?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(f||"/"),this.explicit_path=!1,this.domain=i||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,o&&this.parse(o,i,f),this):new e(o,i,f)}Or.Cookie=e,e.prototype.toString=function(){var i=[this.name+"="+this.value];return this.expiration_date!==1/0&&i.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&i.push("domain="+this.domain),this.path&&i.push("path="+this.path),this.secure&&i.push("secure"),this.noscript&&i.push("httponly"),i.join("; ")},e.prototype.toValueString=function(){return this.name+"="+this.value};var r=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;e.prototype.parse=function(i,f,u){if(this instanceof e){var g=i.split(";").filter(function(N){return!!N}),y,w=g[0].match(/([^=]+)=([\s\S]*)/);if(!w){console.warn("Invalid cookie header encountered. Header: '"+i+"'");return}var k=w[1],B=w[2];if(typeof k!="string"||k.length===0||typeof B!="string"){console.warn("Unable to extract values from cookie header. Cookie: '"+i+"'");return}for(this.name=k,this.value=B,y=1;y<g.length;y+=1)switch(w=g[y].match(/([^=]+)(?:=([\s\S]*))?/),k=w[1].trim().toLowerCase(),B=w[2],k){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=B?Number(Date.parse(B)):1/0;break;case"path":this.path=B?B.trim():"",this.explicit_path=!0;break;case"domain":this.domain=B?B.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0;break}return this.explicit_path||(this.path=u||"/"),this.explicit_domain||(this.domain=f),this}return new e().parse(i,f,u)},e.prototype.matches=function(i){return i===t.All?!0:!(this.noscript&&i.script||this.secure&&!i.secure||!this.collidesWith(i))},e.prototype.collidesWith=function(i){if(this.path&&!i.path||this.domain&&!i.domain||this.path&&i.path.indexOf(this.path)!==0||this.explicit_path&&i.path.indexOf(this.path)!==0)return!1;var f=i.domain&&i.domain.replace(/^[\.]/,""),u=this.domain&&this.domain.replace(/^[\.]/,"");if(u===f)return!0;if(u){if(!this.explicit_domain)return!1;var g=f.indexOf(u);return!(g===-1||g!==f.length-u.length)}return!0};function n(){var o,i,f;return this instanceof n?(o=Object.create(null),this.setCookie=function(g,y,w){var k,B;if(g=new e(g,y,w),k=g.expiration_date<=Date.now(),o[g.name]!==void 0){for(i=o[g.name],B=0;B<i.length;B+=1)if(f=i[B],f.collidesWith(g))return k?(i.splice(B,1),i.length===0&&delete o[g.name],!1):(i[B]=g,g);return k?!1:(i.push(g),g)}return k?!1:(o[g.name]=[g],o[g.name])},this.getCookie=function(g,y){var w,k;if(i=o[g],!!i)for(k=0;k<i.length;k+=1){if(w=i[k],w.expiration_date<=Date.now()){i.length===0&&delete o[w.name];continue}if(w.matches(y))return w}},this.getCookies=function(g){var y=[],w,k;for(w in o)k=this.getCookie(w,g),k&&y.push(k);return y.toString=function(){return y.join(":")},y.toValueString=function(){return y.map(function(N){return N.toValueString()}).join("; ")},y},this):new n}Or.CookieJar=n,n.prototype.setCookies=function(i,f,u){i=Array.isArray(i)?i:i.split(r);var g=[],y,w;for(i=i.map(function(k){return new e(k,f,u)}),y=0;y<i.length;y+=1)w=i[y],this.setCookie(w,f,u)&&g.push(w);return g}})();var Ef=Ue&&Ue.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cf=Ue&&Ue.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(Yn,"__esModule",{value:!0});var ri=ts.default,ja=rs.default,za=ns.default,ni=Ht,Ka=ei,Br=Wt,Sf=ir,Ja=ti,Va=Or,Nr=function(t){Ef(e,t);function e(r){r===void 0&&(r={});var n=t.call(this)||this;return n.UNSENT=e.UNSENT,n.OPENED=e.OPENED,n.HEADERS_RECEIVED=e.HEADERS_RECEIVED,n.LOADING=e.LOADING,n.DONE=e.DONE,n.onreadystatechange=null,n.readyState=e.UNSENT,n.response=null,n.responseText="",n.responseType="",n.status=0,n.statusText="",n.timeout=0,n.upload=new Ja.XMLHttpRequestUpload,n.responseUrl="",n.withCredentials=!1,n._method=null,n._url=null,n._sync=!1,n._headers={},n._loweredHeaders={},n._mimeOverride=null,n._request=null,n._response=null,n._responseParts=null,n._responseHeaders=null,n._aborting=null,n._error=null,n._loadedBytes=0,n._totalBytes=0,n._lengthComputable=!1,n._restrictedMethods={CONNECT:!0,TRACE:!0,TRACK:!0},n._restrictedHeaders={"accept-charset":!0,"accept-encoding":!0,"access-control-request-headers":!0,"access-control-request-method":!0,connection:!0,"content-length":!0,cookie:!0,cookie2:!0,date:!0,dnt:!0,expect:!0,host:!0,"keep-alive":!0,origin:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,via:!0},n._privateHeaders={"set-cookie":!0,"set-cookie2":!0},n._userAgent="Mozilla/5.0 ("+za.type()+" "+za.arch()+") node.js/"+process.versions.node+" v8/"+process.versions.v8,n._anonymous=r.anon||!1,n}return e.prototype.open=function(r,n,o,i,f){if(o===void 0&&(o=!0),r=r.toUpperCase(),this._restrictedMethods[r])throw new e.SecurityError("HTTP method "+r+" is not allowed in XHR");var u=this._parseUrl(n,i,f);this.readyState===e.HEADERS_RECEIVED||(this.readyState,e.LOADING),this._method=r,this._url=u,this._sync=!o,this._headers={},this._loweredHeaders={},this._mimeOverride=null,this._setReadyState(e.OPENED),this._request=null,this._response=null,this.status=0,this.statusText="",this._responseParts=[],this._responseHeaders=null,this._loadedBytes=0,this._totalBytes=0,this._lengthComputable=!1},e.prototype.setRequestHeader=function(r,n){if(this.readyState!==e.OPENED)throw new e.InvalidStateError("XHR readyState must be OPENED");var o=r.toLowerCase();if(this._restrictedHeaders[o]||/^sec-/.test(o)||/^proxy-/.test(o)){console.warn('Refused to set unsafe header "'+r+'"');return}n=n.toString(),this._loweredHeaders[o]!=null?(r=this._loweredHeaders[o],this._headers[r]=this._headers[r]+", "+n):(this._loweredHeaders[o]=r,this._headers[r]=n)},e.prototype.send=function(r){if(this.readyState!==e.OPENED)throw new e.InvalidStateError("XHR readyState must be OPENED");if(this._request)throw new e.InvalidStateError("send() already called");switch(this._url.protocol){case"file:":return this._sendFile(r);case"http:":case"https:":return this._sendHttp(r);default:throw new e.NetworkError("Unsupported protocol "+this._url.protocol)}},e.prototype.abort=function(){this._request!=null&&(this._request.abort(),this._setError(),this._dispatchProgress("abort"),this._dispatchProgress("loadend"))},e.prototype.getResponseHeader=function(r){if(this._responseHeaders==null||r==null)return null;var n=r.toLowerCase();return this._responseHeaders.hasOwnProperty(n)?this._responseHeaders[r.toLowerCase()]:null},e.prototype.getAllResponseHeaders=function(){var r=this;return this._responseHeaders==null?"":Object.keys(this._responseHeaders).map(function(n){return n+": "+r._responseHeaders[n]}).join(`\r
`)},e.prototype.overrideMimeType=function(r){if(this.readyState===e.LOADING||this.readyState===e.DONE)throw new e.InvalidStateError("overrideMimeType() not allowed in LOADING or DONE");this._mimeOverride=r.toLowerCase()},e.prototype.nodejsSet=function(r){if(this.nodejsHttpAgent=r.httpAgent||this.nodejsHttpAgent,this.nodejsHttpsAgent=r.httpsAgent||this.nodejsHttpsAgent,r.hasOwnProperty("baseUrl")){if(r.baseUrl!=null){var n=ni.parse(r.baseUrl,!1,!0);if(!n.protocol)throw new e.SyntaxError("baseUrl must be an absolute URL")}this.nodejsBaseUrl=r.baseUrl}},e.nodejsSet=function(r){e.prototype.nodejsSet(r)},e.prototype._setReadyState=function(r){this.readyState=r,this.dispatchEvent(new Ka.ProgressEvent("readystatechange"))},e.prototype._sendFile=function(r){throw new Error("Protocol file: not implemented")},e.prototype._sendHttp=function(r){if(this._sync)throw new Error("Synchronous XHR processing not implemented");r&&(this._method==="GET"||this._method==="HEAD")?(console.warn("Discarding entity body for "+this._method+" requests"),r=null):r=r||"",this.upload._setData(r),this._finalizeHeaders(),this._sendHxxpRequest()},e.prototype._sendHxxpRequest=function(){var r=this;if(this.withCredentials){var n=e.cookieJar.getCookies(Va.CookieAccessInfo(this._url.hostname,this._url.pathname,this._url.protocol==="https:")).toValueString();this._headers.cookie=this._headers.cookie2=n}var o=this._url.protocol==="http:"?[ri,this.nodejsHttpAgent]:[ja,this.nodejsHttpsAgent],i=o[0],f=o[1],u=i.request.bind(i),g=u({hostname:this._url.hostname,port:+this._url.port,path:this._url.path,auth:this._url.auth,method:this._method,headers:this._headers,agent:f});this._request=g,this.timeout&&g.setTimeout(this.timeout,function(){return r._onHttpTimeout(g)}),g.on("response",function(y){return r._onHttpResponse(g,y)}),g.on("error",function(y){return r._onHttpRequestError(g,y)}),this.upload._startUpload(g),this._request===g&&this._dispatchProgress("loadstart")},e.prototype._finalizeHeaders=function(){this._headers=Cf({},this._headers,{Connection:"keep-alive",Host:this._url.host,"User-Agent":this._userAgent},this._anonymous?{Referer:"about:blank"}:{}),this.upload._finalizeHeaders(this._headers,this._loweredHeaders)},e.prototype._onHttpResponse=function(r,n){var o=this;if(this._request===r){if(this.withCredentials&&(n.headers["set-cookie"]||n.headers["set-cookie2"])&&e.cookieJar.setCookies(n.headers["set-cookie"]||n.headers["set-cookie2"]),[301,302,303,307,308].indexOf(n.statusCode)>=0){this._url=this._parseUrl(n.headers.location),this._method="GET",this._loweredHeaders["content-type"]&&(delete this._headers[this._loweredHeaders["content-type"]],delete this._loweredHeaders["content-type"]),this._headers["Content-Type"]!=null&&delete this._headers["Content-Type"],delete this._headers["Content-Length"],this.upload._reset(),this._finalizeHeaders(),this._sendHxxpRequest();return}this._response=n,this._response.on("data",function(f){return o._onHttpResponseData(n,f)}),this._response.on("end",function(){return o._onHttpResponseEnd(n)}),this._response.on("close",function(){return o._onHttpResponseClose(n)}),this.responseUrl=this._url.href.split("#")[0],this.status=n.statusCode,this.statusText=ri.STATUS_CODES[this.status],this._parseResponseHeaders(n);var i=this._responseHeaders["content-length"]||"";this._totalBytes=+i,this._lengthComputable=!!i,this._setReadyState(e.HEADERS_RECEIVED)}},e.prototype._onHttpResponseData=function(r,n){this._response===r&&(this._responseParts.push(new Buffer(n)),this._loadedBytes+=n.length,this.readyState!==e.LOADING&&this._setReadyState(e.LOADING),this._dispatchProgress("progress"))},e.prototype._onHttpResponseEnd=function(r){this._response===r&&(this._parseResponse(),this._request=null,this._response=null,this._setReadyState(e.DONE),this._dispatchProgress("load"),this._dispatchProgress("loadend"))},e.prototype._onHttpResponseClose=function(r){if(this._response===r){var n=this._request;this._setError(),n.abort(),this._setReadyState(e.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend")}},e.prototype._onHttpTimeout=function(r){this._request===r&&(this._setError(),r.abort(),this._setReadyState(e.DONE),this._dispatchProgress("timeout"),this._dispatchProgress("loadend"))},e.prototype._onHttpRequestError=function(r,n){this._request===r&&(this._setError(),r.abort(),this._setReadyState(e.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend"))},e.prototype._dispatchProgress=function(r){var n=new e.ProgressEvent(r);n.lengthComputable=this._lengthComputable,n.loaded=this._loadedBytes,n.total=this._totalBytes,this.dispatchEvent(n)},e.prototype._setError=function(){this._request=null,this._response=null,this._responseHeaders=null,this._responseParts=null},e.prototype._parseUrl=function(r,n,o){var i=this.nodejsBaseUrl==null?r:ni.resolve(this.nodejsBaseUrl,r),f=ni.parse(i,!1,!0);f.hash=null;var u=(f.auth||"").split(":"),g=u[0],y=u[1];return(g||y||n||o)&&(f.auth=(n||g||"")+":"+(o||y||"")),f},e.prototype._parseResponseHeaders=function(r){this._responseHeaders={};for(var n in r.headers){var o=n.toLowerCase();this._privateHeaders[o]||(this._responseHeaders[o]=r.headers[n])}this._mimeOverride!=null&&(this._responseHeaders["content-type"]=this._mimeOverride)},e.prototype._parseResponse=function(){var r=Buffer.concat(this._responseParts);switch(this._responseParts=null,this.responseType){case"json":this.responseText=null;try{this.response=JSON.parse(r.toString("utf-8"))}catch{this.response=null}return;case"buffer":this.responseText=null,this.response=r;return;case"arraybuffer":this.responseText=null;for(var n=new ArrayBuffer(r.length),o=new Uint8Array(n),i=0;i<r.length;i++)o[i]=r[i];this.response=n;return;case"text":default:try{this.responseText=r.toString(this._parseResponseEncoding())}catch{this.responseText=r.toString("binary")}this.response=this.responseText}},e.prototype._parseResponseEncoding=function(){return/;\s*charset=(.*)$/.exec(this._responseHeaders["content-type"]||"")[1]||"utf-8"},e.ProgressEvent=Ka.ProgressEvent,e.InvalidStateError=Br.InvalidStateError,e.NetworkError=Br.NetworkError,e.SecurityError=Br.SecurityError,e.SyntaxError=Br.SyntaxError,e.XMLHttpRequestUpload=Ja.XMLHttpRequestUpload,e.UNSENT=0,e.OPENED=1,e.HEADERS_RECEIVED=2,e.LOADING=3,e.DONE=4,e.cookieJar=Va.CookieJar(),e}(Sf.XMLHttpRequestEventTarget);Yn.XMLHttpRequest=Nr,Nr.prototype.nodejsHttpAgent=ri.globalAgent,Nr.prototype.nodejsHttpsAgent=ja.globalAgent,Nr.prototype.nodejsBaseUrl=null,function(t){function e(n){for(var o in n)t.hasOwnProperty(o)||(t[o]=n[o])}Object.defineProperty(t,"__esModule",{value:!0}),e(Yn);var r=ir;t.XMLHttpRequestEventTarget=r.XMLHttpRequestEventTarget}(Da);const Af=Si("XMLHttpRequest")||Da.XMLHttpRequest;class kf extends Ql{constructor(e){super(),this.url=e}formatError(e,r,n=-1){return{error:{message:r,code:n},id:e.id,jsonrpc:e.jsonrpc}}send(e,r){return new Promise(n=>{if(e.method==="eth_subscribe"){const u=this.formatError(e,"Subscriptions are not supported by this HTTP endpoint");return this.emit("error",u),n(u)}const o=new Af;let i=!1;const f=(u,g)=>{if(!i)if(o.abort(),i=!0,r)r(u,g);else{const{id:y,jsonrpc:w}=e,k=u?{id:y,jsonrpc:w,error:{message:u.message,code:u.code}}:{id:y,jsonrpc:w,result:g};this.emit("payload",k),n(k)}};o.open("POST",this.url,!0),o.setRequestHeader("Content-Type","application/json"),o.timeout=60*1e3,o.onerror=f,o.ontimeout=f,o.onreadystatechange=()=>{if(o.readyState===4)try{const u=JSON.parse(o.responseText);f(u.error,u.result)}catch(u){f(u)}},o.send(JSON.stringify(e))})}}const Rf=require("web3-provider-engine"),If=require("web3-provider-engine/subproviders/cache"),Tf=require("web3-provider-engine/subproviders/fixture"),Of=require("web3-provider-engine/subproviders/filters"),Bf=require("web3-provider-engine/subproviders/hooked-wallet"),Nf=require("web3-provider-engine/subproviders/nonce-tracker"),Lf=require("web3-provider-engine/subproviders/subscriptions");class Ya extends Rf{constructor(e){if(super({pollingInterval:e.pollingInterval||8e3}),this.bridge="https://bridge.walletconnect.org",this.qrcode=!0,this.qrcodeModal=Gl,this.qrcodeModalOptions=void 0,this.rpc=null,this.infuraId="",this.http=null,this.isConnecting=!1,this.connected=!1,this.connectCallbacks=[],this.accounts=[],this.chainId=1,this.rpcUrl="",this.enable=async()=>{const r=await this.getWalletConnector();if(r)return this.start(),this.subscribeWalletConnector(),r.accounts;throw new Error("Failed to connect to WalleConnect")},this.request=async r=>this.send(r),this.send=async(r,n)=>{var o;if(typeof r=="string"){const i=r;let f=n;return i==="personal_sign"&&(f=gr(f)),this.sendAsyncPromise(i,f)}if(r=Object.assign({id:an(),jsonrpc:"2.0"},r),r.method==="personal_sign"&&(r.params=gr(r.params)),n){this.sendAsync(r,n);return}if(r.method==="eth_signTypedData_v4"&&((o=this.walletMeta)===null||o===void 0?void 0:o.name)==="MetaMask"){const{result:i}=await this.handleOtherRequests(r);return i}else return this.sendAsyncPromise(r.method,r.params)},this.onConnect=r=>{this.connectCallbacks.push(r)},this.triggerConnect=r=>{this.connectCallbacks&&this.connectCallbacks.length&&this.connectCallbacks.forEach(n=>n(r))},this.bridge=e.connector?e.connector.bridge:e.bridge||"https://bridge.walletconnect.org",this.qrcode=typeof e.qrcode>"u"||e.qrcode!==!1,this.qrcodeModal=e.qrcodeModal||this.qrcodeModal,this.qrcodeModalOptions=e.qrcodeModalOptions,this.wc=e.connector||new Lu({bridge:this.bridge,qrcodeModal:this.qrcode?this.qrcodeModal:void 0,qrcodeModalOptions:this.qrcodeModalOptions,storageId:e?.storageId,signingMethods:e?.signingMethods,clientMeta:e?.clientMeta}),this.rpc=e.rpc||null,!this.rpc&&(!e.infuraId||typeof e.infuraId!="string"||!e.infuraId.trim()))throw new Error("Missing one of the required parameters: rpc or infuraId");this.infuraId=e.infuraId||"",this.chainId=e?.chainId||this.chainId,this.initialize()}get isWalletConnect(){return!0}get connector(){return this.wc}get walletMeta(){return this.wc.peerMeta}async disconnect(){this.close()}async close(){await(await this.getWalletConnector({disableSessionCreation:!0})).killSession(),await this.onDisconnect()}async handleRequest(e){try{let r,n=null;const o=await this.getWalletConnector();switch(e.method){case"wc_killSession":await this.close(),n=null;break;case"eth_accounts":n=o.accounts;break;case"eth_coinbase":n=o.accounts[0];break;case"eth_chainId":n=o.chainId;break;case"net_version":n=o.chainId;break;case"eth_uninstallFilter":this.sendAsync(e,i=>i),n=!0;break;default:r=await this.handleOtherRequests(e)}return r||this.formatResponse(e,n)}catch(r){throw this.emit("error",r),r}}async handleOtherRequests(e){if(!en.includes(e.method)&&e.method.startsWith("eth_"))return this.handleReadRequests(e);const n=await(await this.getWalletConnector()).sendCustomRequest(e);return this.formatResponse(e,n)}async handleReadRequests(e){if(!this.http){const r=new Error("HTTP Connection not available");throw this.emit("error",r),r}return this.http.send(e)}formatResponse(e,r){return{id:e.id,jsonrpc:e.jsonrpc,result:r}}getWalletConnector(e={}){const{disableSessionCreation:r=!1}=e;return new Promise((n,o)=>{const i=this.wc;this.isConnecting?this.onConnect(f=>n(f)):!i.connected&&!r?(this.isConnecting=!0,i.on("modal_closed",()=>{o(new Error("User closed modal"))}),i.createSession({chainId:this.chainId}).then(()=>{i.on("connect",(f,u)=>{if(f)return this.isConnecting=!1,o(f);this.isConnecting=!1,this.connected=!0,u&&this.updateState(u.params[0]),this.emit("connect"),this.triggerConnect(i),n(i)})}).catch(f=>{this.isConnecting=!1,o(f)})):(this.connected||(this.connected=!0,this.updateState(i.session)),n(i))})}async subscribeWalletConnector(){const e=await this.getWalletConnector();e.on("disconnect",r=>{if(r){this.emit("error",r);return}this.onDisconnect()}),e.on("session_update",(r,n)=>{if(r){this.emit("error",r);return}this.updateState(n.params[0])})}async onDisconnect(){await this.stop(),this.emit("close",1e3,"Connection closed"),this.emit("disconnect",1e3,"Connection disconnected"),this.connected=!1}async updateState(e){const{accounts:r,chainId:n,networkId:o,rpcUrl:i}=e;(!this.accounts||r&&this.accounts!==r)&&(this.accounts=r,this.emit("accountsChanged",r)),(!this.chainId||n&&this.chainId!==n)&&(this.chainId=n,this.emit("chainChanged",n)),(!this.networkId||o&&this.networkId!==o)&&(this.networkId=o,this.emit("networkChanged",o)),this.updateRpcUrl(this.chainId,i||"")}updateRpcUrl(e,r=""){const n={infuraId:this.infuraId,custom:this.rpc||void 0};r=r||Rc(e,n),r?(this.rpcUrl=r,this.updateHttpConnection()):this.emit("error",new Error(`No RPC Url available for chainId: ${e}`))}updateHttpConnection(){this.rpcUrl&&(this.http=new kf(this.rpcUrl),this.http.on("payload",e=>this.emit("payload",e)),this.http.on("error",e=>this.emit("error",e)))}sendAsyncPromise(e,r){return new Promise((n,o)=>{this.sendAsync({id:an(),jsonrpc:"2.0",method:e,params:r||[]},(i,f)=>{if(i){o(i);return}n(f.result)})})}initialize(){this.updateRpcUrl(this.chainId),this.addProvider(new Tf({eth_hashrate:"0x00",eth_mining:!1,eth_syncing:!0,net_listening:!0,web3_clientVersion:"WalletConnect/v1.x.x/javascript"})),this.addProvider(new If),this.addProvider(new Lf),this.addProvider(new Of),this.addProvider(new Nf),this.addProvider(new Bf(this.configWallet())),this.addProvider({handleRequest:async(e,r,n)=>{try{const{error:o,result:i}=await this.handleRequest(e);n(o,i)}catch(o){n(o)}},setEngine:e=>e})}configWallet(){return{getAccounts:async e=>{try{const n=(await this.getWalletConnector()).accounts;n&&n.length?e(null,n):e(new Error("Failed to get accounts"))}catch(r){e(r)}},processMessage:async(e,r)=>{try{const o=await(await this.getWalletConnector()).signMessage([e.from,e.data]);r(null,o)}catch(n){r(n)}},processPersonalMessage:async(e,r)=>{try{const o=await(await this.getWalletConnector()).signPersonalMessage([e.data,e.from]);r(null,o)}catch(n){r(n)}},processSignTransaction:async(e,r)=>{try{const o=await(await this.getWalletConnector()).signTransaction(e);r(null,o)}catch(n){r(n)}},processTransaction:async(e,r)=>{try{const o=await(await this.getWalletConnector()).sendTransaction(e);r(null,o)}catch(n){r(n)}},processTypedMessage:async(e,r)=>{try{const o=await(await this.getWalletConnector()).signTypedData([e.from,e.data]);r(null,o)}catch(n){r(n)}}}}}class Uf extends or{constructor({logger:e,chains:r}){super(e,jt.WalletConnect,r),this._rpc={},r.forEach(n=>this._rpc[n.chainId]=n.rpcUrl),this._walletConnect=new Ya({rpc:this._rpc}),this.initListeners(this._walletConnect)}async disconnect(){await super.disconnect(),await this._walletConnect.disconnect()}get canSwitchChain(){return!1}switchChain(e){throw new Error("Method not implemented.")}getRawProvider(){return Promise.resolve(this._walletConnect)}get isConnected(){const e=!!localStorage.getItem("walletconnect")&&this._walletConnect.isWalletConnect;return Promise.resolve(e)}get isInstalled(){return!0}get installUrl(){return""}async connect(e){try{await this._walletConnect.enable()}catch{return this._walletConnect=new Ya({rpc:this._rpc}),!1}return!0}}const Ga=t=>{if(t===1)return Pe.Network.ETHEREUM;if(t===80001)return Pe.Network.MUMBAI;if(t===5)return Pe.Network.GOERLI;throw new Error(`Unknow chain id: ${t}`)};class Ff extends or{constructor({logger:e,chains:r,testnetApiKey:n,mainnetApiKey:o}){if(super(e,jt.FaceWallet,r),this.resolveApiKey=i=>{switch(i){case Pe.Network.ETHEREUM:case Pe.Network.POLYGON:case Pe.Network.BNB_SMART_CHAIN:case Pe.Network.KLAYTN:case Pe.Network.BORA:{if(!this._mainnetApiKey)throw new Error("No API key for mainnet");return this._mainnetApiKey}case Pe.Network.GOERLI:case Pe.Network.MUMBAI:case Pe.Network.BNB_SMART_CHAIN_TESTNET:case Pe.Network.BAOBAB:case Pe.Network.BORA_TESTNET:{if(!this._testnetApiKey)throw new Error("No API key for testnet");return this._testnetApiKey}default:throw new Error("unsupported network error")}},!n&&!o)throw new Error("Set value for testnetApiKey or mainnetApiKey or both");this._mainnetApiKey=o,this._testnetApiKey=n}async disconnect(){await super.disconnect(),await this.face.auth.logout()}get canSwitchChain(){return!0}async switchChain(e){const r=Ga(e);return await this.face.switchNetwork(r),!0}get isConnected(){return this._face?this._face.auth.isLoggedIn():Promise.resolve(!1)}get isInstalled(){return!0}get installUrl(){return""}async connect(e){if(!this._face){const r=Ga(e);this._face=new Pe.Face({network:r,apiKey:this.resolveApiKey(r)})}return await this.face.auth.isLoggedIn()||await this.face.auth.login(),!0}getRawProvider(){return Promise.resolve(this.face.getEthLikeProvider())}get face(){if(!this._face)throw new Error("Provider not connected. Call FaceWalletConnector.connect first");return this._face}}exports.BaseConnector=or,exports.ConnectorNames=jt,exports.ConnectorProvider=ss,exports.FaceWalletConnector=Ff,exports.InjectedConnector=cs,exports.WalletConnectConnector=Uf;
//# sourceMappingURL=index.cjs.js.map

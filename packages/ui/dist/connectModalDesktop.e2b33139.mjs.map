{"version":3,"file":"connectModalDesktop.e2b33139.mjs","sources":["../src/connectModal/connectModalDesktop.tsx"],"sourcesContent":["import { ReactNode, useState } from 'react'\r\nimport { IChain } from \"../typesAndInterfaces\"\r\nimport { Col, Row } from 'antd'\r\nimport \"./connectModalDesktop.less\"\r\nimport { ConnectButton } from './connectButton';\r\nimport { MetamaskIcon } from './metamaskIcon';\r\nimport { WalletConnectIcon } from './walletConnectIcon';\r\nimport { Gutter } from 'antd/lib/grid/row';\r\nimport { ChainButton } from './chainButton';\r\nimport { ConnectorNames } from '@oort/web3-connectors';\r\nimport { OortModal } from '../oortModal';\r\nimport { IWeb3 } from './connectModal';\r\n\r\nexport enum WALLETTYPE {\r\n\tWALLET_METAMASK,\r\n\tWALLET_CONNECT,\r\n}\r\n\r\nconst renderAlert = (account: string, chain: IChain, supportedChains: IChain[]) => {\r\n\r\n\tif (!account) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif (!supportedChains.some(x => x.name === chain!.name)) {\r\n\t\treturn <>\r\n\t\t\tYou connected to <span>{chain!.name}.</span>\r\n\t\t\t<div>\r\n\t\t\t\tPlease connect to the appropriate network. <span>{supportedChains.map(x => x.name).join(', ')}</span>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t}\r\n\r\n\treturn <>\r\n\tYou are currently using <span>Oort Digital</span> on the <span>{chain!.name}</span> network\r\n\t</>\r\n};\r\n\r\ninterface IProps {\r\n\tweb3: IWeb3\r\n\tvisible: boolean\r\n\t /**\r\n     * @deprecated Use onClose, afterConnect, afterChainSwitch\r\n     */\r\n\tonCancel?: () => void\r\n\r\n\t/** executed when user click 'X' in the top right corner */\r\n\tonClose?: () => void\r\n\tafterConnect?: () => void\r\n\tafterChainSwitch?: () => void\r\n}\r\n\r\nconst ConnectModalDesktop = ({ web3, onCancel, visible, onClose, afterChainSwitch, afterConnect }: IProps) => {\r\n\r\n\tconst [ loading, setLoading ] = useState(false)\r\n\tconst {  supportedChains, chain, switchChain, canSwitchChain, connectAsync, account, connectorName, supportedConnectors } = web3\r\n\t\r\n\tconst connectAndClose = async (cnnName: ConnectorNames) => {\r\n\t\tsetLoading(true)\r\n        try {\r\n            await connectAsync(cnnName)\r\n\t\t\tonCancel && onCancel()\r\n\t\t\tafterConnect && afterConnect()\r\n        }\r\n        finally {\r\n            setLoading(false)\r\n        }\r\n\t}\r\n\r\n\tconst switchChainAndClose = async (newChainId: number): Promise<void> => {\t\t\r\n        setLoading(true)\r\n        try {\r\n            await switchChain(newChainId)\r\n\t\t\tonCancel && onCancel()\r\n\t\t\tafterChainSwitch && afterChainSwitch()\r\n        }\r\n        finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n\tconst footer = <>\r\n\t\t<div>By connecting, I accept Oort Digitalâ€™s <a href='https://oort.digital/terms'>Terms of Service</a> and acknowledge</div>\r\n\t\t<div>that you have read and understand the <a href='https://oort.digital/terms#disclaimer'>Oort Digital protocol disclaimer</a></div>\r\n\t</>\r\n\r\n\tconst renderWalletBtn = (walletName: string, cnnName: ConnectorNames, icon: ReactNode) => {\r\n\r\n\t\tif(account && cnnName === connectorName) {\r\n\t\t\treturn <ConnectButton\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\twalletName={walletName}\r\n\t\t\t\t\twalletIcon={icon}\r\n\t\t\t\t\taccount={account}/>\r\n\t\t}\r\n\r\n\t\tconst connector = supportedConnectors[cnnName]\r\n\t\tif(!connector.isInstalled) {\r\n\t\t\treturn <ConnectButton\r\n\t\t\t\twalletName={walletName}\r\n\t\t\t\tonClick={() => window.open(connector.installUrl, '_blank')!.focus()}\r\n\t\t\t\twalletIcon={icon}\r\n\t\t\t\tlabelText=\"Install\"\r\n\t\t\t/>\r\n\t\t}\r\n\r\n\t\treturn <ConnectButton\r\n\t\t\twalletName={walletName}\r\n\t\t\tonClick={() => connectAndClose(cnnName)}\r\n\t\t\twalletIcon={icon}\r\n\t\t\tlabelText=\"Connect\"\r\n\t\t/>\r\n\r\n\t}\r\n\r\n\tconst renderChainBtn = (supportedChain: IChain) => {\r\n\r\n\t\tconst { chainId } = supportedChain\r\n\t\r\n\t\treturn <Col flex={3} key={chainId}>\r\n\t\t\t<ChainButton\r\n\t\t\t\tonClick={() => switchChainAndClose(chainId)}\r\n\t\t\t\tloading={loading}\r\n\t\t\t\tisActive={chainId === chain!.chainId}\r\n\t\t\t\tcanSwitchChain={canSwitchChain}\r\n\t\t\t\tchain={supportedChain} />\r\n\t\t</Col>\r\n\t\r\n\t}\r\n\r\n\tconst btnGutter: [Gutter, Gutter] = [10, 0]\r\n\r\n\tconst _onCancel = () => {\r\n\t\tonClose && onClose()\r\n\t\tonCancel && onCancel()\r\n\t}\r\n\t\r\n\treturn <OortModal \r\n\t\tloading={loading}\r\n\t\tfooter={footer}\r\n\t\tclassName='connect-wallet-desktop-modal'\r\n\t\ttitle='Network & Wallet'\r\n\t\twidth=\"690px\"\r\n\t\tvisible={visible} onCancel={() => _onCancel()}>\r\n\t\t<>\r\n\t\t\t{\r\n\t\t\t\tchain && <>\r\n\t\t\t\t\t<div className=\"description\">\r\n\t\t\t\t\t\t{renderAlert(account, chain, supportedChains)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Row gutter={btnGutter} className='chain-buttons' justify='space-between'>\r\n\t\t\t\t\t\t{supportedChains.map(x => renderChainBtn(x))}\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\t<div className=\"description\">\r\n\t\t\t\t<span>Connect your Wallet</span> and jump into the world of NFT's\r\n\t\t\t</div>\r\n\t\t\t<Row gutter={btnGutter} justify='space-between'>\r\n\t\t\t\t<Col span={12}>{renderWalletBtn(\"Metamask\", ConnectorNames.Injected, MetamaskIcon)}</Col>\r\n\t\t\t\t<Col span={12}>{renderWalletBtn(\"WalletConnect\", ConnectorNames.WalletConnect, WalletConnectIcon)}</Col>\r\n\t\t\t</Row>\r\n\t\t</>\r\n\t</OortModal>\r\n\t\t\r\n\t\r\n};\r\n\r\nexport default ConnectModalDesktop\r\n"],"names":["WALLETTYPE","WALLET_METAMASK","WALLET_CONNECT","renderAlert","account","chain","supportedChains","some","x","name","_Fragment","_jsx","_jsxs","map","join","ConnectModalDesktop","web3","onCancel","visible","onClose","afterChainSwitch","afterConnect","loading","setLoading","useState","switchChain","canSwitchChain","connectAsync","connectorName","supportedConnectors","connectAndClose","cnnName","switchChainAndClose","newChainId","footer","renderWalletBtn","walletName","icon","ConnectButton","connector","isInstalled","window","open","installUrl","focus","renderChainBtn","supportedChain","chainId","Col","ChainButton","btnGutter","_onCancel","OortModal","Row","ConnectorNames","Injected","MetamaskIcon","WalletConnect","WalletConnectIcon"],"mappings":"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"}
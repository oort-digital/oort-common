{"version":3,"file":"connectModalDesktop.3e25b7e2.js","sources":["../src/connectModal/connectModalDesktop.tsx"],"sourcesContent":["import { ReactNode, useState } from 'react'\r\nimport { IChain, isChainEmpty } from \"../typesAndInterfaces\"\r\nimport { Col, Row } from 'antd'\r\nimport styles from \"./connectModalDesktop.module.less\"\r\nimport { ConnectButton } from './connectButton';\r\nimport { MetamaskIcon } from './metamaskIcon';\r\nimport { WalletConnectIcon } from './walletConnectIcon';\r\nimport { Gutter } from 'antd/lib/grid/row';\r\nimport { ConnectorNames } from '@oort/web3-connectors';\r\nimport { OortModal } from '../oortModal';\r\nimport { IWeb3 } from './connectModal';\r\nimport { ChainButtonWithLogic } from './chainButtonWithLogic';\r\nimport { Alert } from './alert';\r\nimport { Bold } from './bold';\r\n\r\ninterface IProps {\r\n\tweb3: IWeb3\r\n\texpectedChainId?: number\r\n\tvisible: boolean\r\n\t /**\r\n     * @deprecated Use onClose, afterConnect, afterChainSwitch\r\n     */\r\n\tonCancel?: () => void\r\n\r\n\t/** executed when user click 'X' in the top right corner */\r\n\tonClose?: () => void\r\n\tafterConnect?: () => void\r\n\tafterChainSwitch?: () => void\r\n}\r\n\r\nconst ConnectModalDesktop = ({ web3, onCancel, visible, onClose, afterChainSwitch, afterConnect, expectedChainId }: IProps) => {\r\n\r\n\tconst [ loading, setLoading ] = useState(false)\r\n\tconst {  supportedChains, chain, switchChain, canSwitchChain, connect, account, connectorName, supportedConnectors } = web3\r\n\t\r\n\tconst connectAndClose = async (chainId: number, cnnName: ConnectorNames) => {\r\n\t\tsetLoading(true)\r\n        try {\r\n            await connect(chainId, cnnName)\r\n\t\t\tonCancel && onCancel()\r\n\t\t\tafterConnect && afterConnect()\r\n        }\r\n        finally {\r\n            setLoading(false)\r\n        }\r\n\t}\r\n\r\n\tconst switchChainAndClose = async (newChainId: number): Promise<void> => {\t\t\r\n        setLoading(true)\r\n        try {\r\n            await switchChain(newChainId)\r\n\t\t\tonCancel && onCancel()\r\n\t\t\tafterChainSwitch && afterChainSwitch()\r\n        }\r\n        finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n\tconst footer = <>\r\n\t\t<div>By connecting, I accept Oort Digitalâ€™s <a href='https://oort.digital/terms'>Terms of Service</a> and acknowledge</div>\r\n\t\t<div>that you have read and understand the <a href='https://oort.digital/terms#disclaimer'>Oort Digital protocol disclaimer</a></div>\r\n\t</>\r\n\r\n\tconst renderWalletBtn = (chainId: number, walletName: string, cnnName: ConnectorNames, icon: ReactNode) => {\r\n\r\n\t\tif(account && cnnName === connectorName) {\r\n\t\t\treturn <ConnectButton\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\twalletName={walletName}\r\n\t\t\t\t\twalletIcon={icon}\r\n\t\t\t\t\taccount={account}/>\r\n\t\t}\r\n\r\n\t\tconst connector = supportedConnectors[cnnName]\r\n\t\tif(!connector.isInstalled) {\r\n\t\t\treturn <ConnectButton\r\n\t\t\t\twalletName={walletName}\r\n\t\t\t\tonClick={() => window.open(connector.installUrl, '_blank')!.focus()}\r\n\t\t\t\twalletIcon={icon}\r\n\t\t\t\tlabelText=\"Install\"\r\n\t\t\t/>\r\n\t\t}\r\n\r\n\t\treturn <ConnectButton\r\n\t\t\twalletName={walletName}\r\n\t\t\tonClick={() => connectAndClose(chainId, cnnName)}\r\n\t\t\twalletIcon={icon}\r\n\t\t\tlabelText=\"Connect\"\r\n\t\t/>\r\n\r\n\t}\r\n\r\n\tconst renderChainBtn = (supportedChain: IChain) => {\r\n\r\n\t\tconst { chainId } = supportedChain\r\n\t\r\n\t\treturn <Col flex={3} key={chainId}>\r\n\t\t\t<ChainButtonWithLogic\r\n\t\t\t\tonClick={() => switchChainAndClose(chainId)}\r\n\t\t\t\tloading={loading}\r\n\t\t\t\texpectedChainId={expectedChainId}\r\n\t\t\t\tconnectedChainId={chain.chainId}\r\n\t\t\t\tcanSwitchChain={canSwitchChain}\r\n\t\t\t\tchain={supportedChain} />\r\n\t\t</Col>\r\n\t\r\n\t}\r\n\r\n\tconst btnGutter: [Gutter, Gutter] = [10, 0]\r\n\r\n\tconst _onCancel = () => {\r\n\t\tonClose && onClose()\r\n\t\tonCancel && onCancel()\r\n\t}\r\n\t\r\n\treturn <OortModal \r\n\t\tloading={loading}\r\n\t\tfooter={footer}\r\n\t\tclassName={styles.modal}\r\n\t\ttitle='Network & Wallet'\r\n\t\twidth=\"690px\"\r\n\t\tvisible={visible} onCancel={() => _onCancel()}>\r\n\t\t<>\r\n\t\t\t{\r\n\t\t\t\t!isChainEmpty(chain) && <>\r\n\t\t\t\t\t<div className={styles.description}>\r\n\t\t\t\t\t\t<Alert account={account} chain={chain} supportedChains={supportedChains} expectedChainId={expectedChainId} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Row gutter={btnGutter} className={styles.chain_buttons} justify='space-between'>\r\n\t\t\t\t\t\t{supportedChains.map(x => renderChainBtn(x))}\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\t<div className={styles.description}>\r\n\t\t\t\t<Bold>Connect your Wallet</Bold> and jump into the world of NFT's\r\n\t\t\t</div>\r\n\t\t\t<Row gutter={btnGutter} justify='space-between'>\r\n\t\t\t\t<Col span={12}>{renderWalletBtn(supportedChains[0].chainId, \"Metamask\", ConnectorNames.Injected, MetamaskIcon)}</Col>\r\n\t\t\t\t<Col span={12}>{renderWalletBtn(supportedChains[0].chainId, \"WalletConnect\", ConnectorNames.WalletConnect, WalletConnectIcon)}</Col>\r\n\t\t\t</Row>\r\n\t\t</>\r\n\t</OortModal>\r\n\t\t\r\n\t\r\n};\r\n\r\nexport default ConnectModalDesktop\r\n"],"names":["ConnectModalDesktop","web3","onCancel","visible","onClose","afterChainSwitch","afterConnect","expectedChainId","loading","setLoading","useState","supportedChains","chain","switchChain","canSwitchChain","connect","account","connectorName","supportedConnectors","connectAndClose","chainId","cnnName","switchChainAndClose","newChainId","footer","_Fragment","_jsxs","_jsx","renderWalletBtn","walletName","icon","ConnectButton","connector","isInstalled","window","open","installUrl","focus","renderChainBtn","supportedChain","Col","ChainButtonWithLogic","btnGutter","_onCancel","OortModal","styles","modal","isChainEmpty","description","Alert","Row","chain_buttons","map","x","Bold","ConnectorNames","Injected","MetamaskIcon","WalletConnect","WalletConnectIcon"],"mappings":"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"}
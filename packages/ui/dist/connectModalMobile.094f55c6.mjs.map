{"version":3,"file":"connectModalMobile.094f55c6.mjs","sources":["../src/connectModal/connectModalMobile.tsx"],"sourcesContent":["import { ReactNode, useState } from 'react'\r\nimport { Col, Row } from 'antd'\r\nimport styles from \"./connectModalMobile.module.less\"\r\n\r\nimport { ConnectButton } from './connectButton';\r\nimport { MetamaskIcon } from './metamaskIcon';\r\nimport { WalletConnectIcon } from './walletConnectIcon';\r\nimport { Gutter } from 'antd/lib/grid/row';\r\nimport { ConnectorNames } from \"@oort/web3-connectors\";\r\nimport { IChain, isChainEmpty } from '../typesAndInterfaces';\r\nimport { OortModalMobile } from '../oortModal';\r\nimport { IWeb3 } from './connectModal';\r\nimport { ChainButtonWithLogic } from './chainButtonWithLogic';\r\nimport { Alert } from './alert';\r\nimport { Bold } from './bold';\r\n\r\n\r\ninterface IProps {\r\n\tweb3: IWeb3\r\n\texpectedChainId?: number\r\n\tvisible: boolean\r\n\t/**\r\n\t * @deprecated Use onClose, afterConnect, afterChainSwitch\r\n\t */\r\n\tonCancel?: () => void\r\n\r\n\t/** executed when user click 'X' in the top right corner */\r\n\tonClose?: () => void\r\n\tafterConnect?: () => void\r\n\tafterChainSwitch?: () => void\r\n}\r\n\r\nconst ConnectModalMobile = ({ web3, visible, onCancel, onClose, afterConnect, afterChainSwitch, expectedChainId }: IProps) => {\r\n\r\n\tconst [ loading, setLoading ] = useState(false)\r\n\t\r\n\tconst { supportedChains, chain, switchChain, canSwitchChain, connectAsync, account, connectorName, supportedConnectors } = web3\r\n\r\n\tconst connectAndClose = async (cnnName: ConnectorNames) => {\r\n\t\tsetLoading(true)\r\n        try {\r\n            await connectAsync(cnnName)\r\n\t\t\tonCancel && onCancel()\r\n\t\t\tafterConnect && afterConnect()\r\n        }\r\n        finally {\r\n            setLoading(false)\r\n        }\r\n\t}\r\n\r\n\tconst switchChainAndClose = async (newChainId: number): Promise<void> => {\t\t\r\n        setLoading(true)\r\n        try {\r\n            await switchChain(newChainId)\r\n\t\t\tonCancel && onCancel()\r\n\t\t\tafterChainSwitch && afterChainSwitch()\r\n        }\r\n        finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n\tconst footer = <>\r\n\t\tBy connecting, I accept Oort Digitalâ€™s <a href='https://oort.digital/terms'>Terms of Service</a> and acknowledge that you have read and understand the <a href='https://oort.digital/terms#disclaimer'>Oort Digital protocol disclaimer</a>\r\n\t</>\r\n\r\n\tconst renderWalletBtn = (walletName: string, cnnName: ConnectorNames, icon: ReactNode) => {\r\n\r\n\t\tif(account && cnnName === connectorName) {\r\n\t\t\treturn <ConnectButton\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\twalletName={walletName}\r\n\t\t\t\t\twalletIcon={icon}\r\n\t\t\t\t\taccount={account}/>\r\n\t\t}\r\n\r\n\t\tconst connector = supportedConnectors[cnnName]\r\n\t\tif(!connector.isInstalled) {\r\n\t\t\treturn <ConnectButton\r\n\t\t\t\twalletName={walletName}\r\n\t\t\t\tonClick={() => window.open(connector.installUrl, '_blank')!.focus()}\r\n\t\t\t\twalletIcon={icon}\r\n\t\t\t\tlabelText=\"Install\"\r\n\t\t\t/>\r\n\t\t}\r\n\r\n\t\treturn <ConnectButton\r\n\t\t\twalletName={walletName}\r\n\t\t\tonClick={() => connectAndClose(cnnName)}\r\n\t\t\twalletIcon={icon}\r\n\t\t\tlabelText=\"Connect\"\r\n\t\t/>\r\n\r\n\t}\r\n\r\n\tconst renderChainBtn = (supportedChain: IChain) => {\r\n\r\n\t\tconst { chainId } = supportedChain\r\n\t\r\n\t\treturn <Col span=\"24\" key={chainId}>\r\n\t\t\t<ChainButtonWithLogic\r\n\t\t\t\tonClick={() => switchChainAndClose(chainId)}\r\n\t\t\t\tloading={loading}\r\n\t\t\t\texpectedChainId={expectedChainId}\r\n\t\t\t\tconnectedChainId={chain.chainId}\r\n\t\t\t\tcanSwitchChain={canSwitchChain}\r\n\t\t\t\tchain={supportedChain} />\r\n\t\t</Col>\r\n\t\r\n\t}\r\n\r\n\tconst btnGutter: [Gutter, Gutter] = [0, 12]\r\n\r\n\tconst _onCancel = () => {\r\n\t\tonClose && onClose()\r\n\t\tonCancel && onCancel()\r\n\t}\r\n\t\r\n\treturn <OortModalMobile viewMode=\"topGap\" loading={loading} footer={footer}\r\n\t\tclassName={styles.modal} title='Network & Wallet' visible={visible}\r\n\t\tonCancel={() => _onCancel()}>\r\n\t\t<>\r\n\t\t\t{\r\n\t\t\t\t!isChainEmpty(chain) && <>\r\n\t\t\t\t\t<div className={styles.description}>\r\n\t\t\t\t\t\t<Alert account={account} chain={chain} supportedChains={supportedChains} expectedChainId={expectedChainId} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Row gutter={btnGutter} className={styles.chain_buttons}>\r\n\t\t\t\t\t\t{supportedChains.map(x => renderChainBtn(x))}\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\t<div className={styles.description}>\r\n\t\t\t\t<Bold>Connect your Wallet</Bold> and jump into the world of NFT's\r\n\t\t\t</div>\r\n\t\t\t<Row gutter={btnGutter}>\r\n\t\t\t\t{window.ethereum && <Col span=\"24\">{renderWalletBtn(\"Metamask\", ConnectorNames.Injected, MetamaskIcon)}</Col>}\r\n\t\t\t\t<Col span=\"24\">{renderWalletBtn(\"WalletConnect\", ConnectorNames.WalletConnect, WalletConnectIcon)}</Col>\r\n\t\t\t</Row>\r\n\t\t</>\r\n\t</OortModalMobile>\r\n\t\t\r\n\t\r\n};\r\n\r\nexport default ConnectModalMobile"],"names":["ConnectModalMobile","web3","visible","onCancel","onClose","afterConnect","afterChainSwitch","expectedChainId","loading","setLoading","useState","supportedChains","chain","switchChain","canSwitchChain","connectAsync","account","connectorName","supportedConnectors","connectAndClose","cnnName","switchChainAndClose","newChainId","footer","_Fragment","_jsx","renderWalletBtn","walletName","icon","ConnectButton","connector","isInstalled","window","open","installUrl","focus","renderChainBtn","supportedChain","chainId","Col","ChainButtonWithLogic","btnGutter","_onCancel","OortModalMobile","styles","modal","isChainEmpty","description","Alert","Row","chain_buttons","map","x","_jsxs","Bold","ethereum","ConnectorNames","Injected","MetamaskIcon","WalletConnect","WalletConnectIcon"],"mappings":"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"}
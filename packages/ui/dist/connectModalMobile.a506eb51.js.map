{"version":3,"file":"connectModalMobile.a506eb51.js","sources":["../src/connectModal/connectModalMobile.tsx"],"sourcesContent":["import React, { ReactNode, useState } from 'react'\r\nimport { Col, Row } from 'antd'\r\nimport \"./connectModalMobile.less\"\r\n\r\nimport { ConnectButton } from './connectButton';\r\nimport { MetamaskIcon } from './metamaskIcon';\r\nimport { WalletConnectIcon } from './walletConnectIcon';\r\nimport { Gutter } from 'antd/lib/grid/row';\r\nimport { ChainButton } from './chainButton';\r\nimport { ConnectorNames, IConnector } from \"@oort/web3-connectors\";\r\nimport { IChain } from '../typesAndInterfaces';\r\nimport { OortModalMobile } from '../oortModal';\r\n\r\n\r\nexport enum WALLETTYPE {\r\n\tWALLET_METAMASK,\r\n\tWALLET_CONNECT,\r\n}\r\n\r\nconst renderAlert = (account: string, chain: IChain, supportedChains: IChain[]) => {\r\n\r\n\tif (!account) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif (!supportedChains.some(x => x.name === chain!.name)) {\r\n\t\treturn <>\r\n\t\t\tYou connected to <span>{chain!.name}.</span>\r\n\t\t\t<div>\r\n\t\t\t\tPlease connect to the appropriate network. <span>{supportedChains.map(x => x.name).join(', ')}</span>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t}\r\n\r\n\treturn <>\r\n\tYou are currently using <span>Oort Digital</span> on the <span>{chain!.name}</span> network\r\n\t</>\r\n};\r\n\r\n\r\ninterface IProps {\r\n\tchain: IChain\r\n\tsupportedChains: IChain[]\r\n\taccount: string\r\n\tcanSwitchChain: boolean\r\n\tconnectorName: ConnectorNames\r\n\tsupportedConnectors: { [name: string]: IConnector }\r\n\tvisible: boolean\r\n\tonCancel: () => void\r\n\tswitchChain: (newChainId: number) => Promise<void>\r\n\tconnectAsync: (connectorName: ConnectorNames) => Promise<void>\r\n}\r\n\r\nconst ConnectModalMobile = (props: IProps) => {\r\n\r\n\tconst [ loading, setLoading ] = useState(false)\r\n\t\r\n\tconst { onCancel, visible, supportedChains, chain, switchChain, canSwitchChain, connectAsync, account, connectorName, supportedConnectors } = props\r\n\r\n\tconst connectAndClose = async (cnnName: ConnectorNames) => {\r\n\t\tsetLoading(true)\r\n        try {\r\n            await connectAsync(cnnName)\r\n\t\t\tonCancel()\r\n        }\r\n        finally {\r\n            setLoading(false)\r\n        }\r\n\t}\r\n\r\n\tconst switchChainAndClose = async (newChainId: number): Promise<void> => {\t\t\r\n        setLoading(true)\r\n        try {\r\n            await switchChain(newChainId)\r\n\t\t\tonCancel()\r\n        }\r\n        finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n\tconst footer = <>\r\n\t\tBy connecting, I accept Oort Digitalâ€™s <a href='https://oort.digital/terms'>Terms of Service</a> and acknowledge that you have read and understand the <a href='https://oort.digital/terms#disclaimer'>Oort Digital protocol disclaimer</a>\r\n\t</>\r\n\r\n\tconst renderWalletBtn = (walletName: string, cnnName: ConnectorNames, icon: ReactNode) => {\r\n\r\n\t\tif(account && cnnName === connectorName) {\r\n\t\t\treturn <ConnectButton\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\twalletName={walletName}\r\n\t\t\t\t\twalletIcon={icon}\r\n\t\t\t\t\taccount={account}/>\r\n\t\t}\r\n\r\n\t\tconst connector = supportedConnectors[cnnName]\r\n\t\tif(!connector.isInstalled) {\r\n\t\t\treturn <ConnectButton\r\n\t\t\t\twalletName={walletName}\r\n\t\t\t\tonClick={() => window.open(connector.installUrl, '_blank')!.focus()}\r\n\t\t\t\twalletIcon={icon}\r\n\t\t\t\tlabelText=\"Install\"\r\n\t\t\t/>\r\n\t\t}\r\n\r\n\t\treturn <ConnectButton\r\n\t\t\twalletName={walletName}\r\n\t\t\tonClick={() => connectAndClose(cnnName)}\r\n\t\t\twalletIcon={icon}\r\n\t\t\tlabelText=\"Connect\"\r\n\t\t/>\r\n\r\n\t}\r\n\r\n\tconst renderChainBtn = (supportedChain: IChain) => {\r\n\r\n\t\tconst { chainId } = supportedChain\r\n\t\r\n\t\treturn <Col span=\"24\" key={chainId}>\r\n\t\t\t<ChainButton\r\n\t\t\t\tonClick={() => switchChainAndClose(chainId)}\r\n\t\t\t\tloading={loading}\r\n\t\t\t\tisActive={chainId === chain!.chainId}\r\n\t\t\t\tcanSwitchChain={canSwitchChain}\r\n\t\t\t\tchain={supportedChain} />\r\n\t\t</Col>\r\n\t\r\n\t}\r\n\r\n\tconst btnGutter: [Gutter, Gutter] = [0, 12]\r\n\t\r\n\treturn <OortModalMobile viewMode=\"topGap\" loading={loading} footer={footer} className='connect-wallet-mobile-modal' title='Network & Wallet' visible={visible} onCancel={onCancel}>\r\n\t\t<>\r\n\t\t\t{\r\n\t\t\t\tchain && <>\r\n\t\t\t\t\t<div className=\"description\">\r\n\t\t\t\t\t\t{renderAlert(account, chain, supportedChains)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Row gutter={btnGutter} className='chain-buttons'>\r\n\t\t\t\t\t\t{supportedChains.map(x => renderChainBtn(x))}\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\t<div className=\"description\">\r\n\t\t\t\t<span>Connect your Wallet</span> and jump into the world of NFT's\r\n\t\t\t</div>\r\n\t\t\t<Row gutter={btnGutter}>\r\n\t\t\t\t{window.ethereum && <Col span=\"24\">{renderWalletBtn(\"Metamask\", ConnectorNames.Injected, MetamaskIcon)}</Col>}\r\n\t\t\t\t<Col span=\"24\">{renderWalletBtn(\"WalletConnect\", ConnectorNames.WalletConnect, WalletConnectIcon)}</Col>\r\n\t\t\t</Row>\r\n\t\t</>\r\n\t</OortModalMobile>\r\n\t\t\r\n\t\r\n};\r\n\r\nexport default ConnectModalMobile"],"names":["WALLETTYPE","WALLET_METAMASK","WALLET_CONNECT","renderAlert","account","chain","supportedChains","some","x","name","_Fragment","_jsx","_jsxs","map","join","ConnectModalMobile","props","loading","setLoading","useState","onCancel","visible","switchChain","canSwitchChain","connectAsync","connectorName","supportedConnectors","connectAndClose","cnnName","switchChainAndClose","newChainId","footer","renderWalletBtn","walletName","icon","ConnectButton","connector","isInstalled","window","open","installUrl","focus","renderChainBtn","supportedChain","chainId","Col","ChainButton","btnGutter","OortModalMobile","Row","ethereum","ConnectorNames","Injected","MetamaskIcon","WalletConnect","WalletConnectIcon"],"mappings":"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"}